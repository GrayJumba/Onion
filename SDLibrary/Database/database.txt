CREATE DATABASE  IF NOT EXISTS `school` /*!40100 DEFAULT CHARACTER SET utf8 */;
USE `school`;
-- MySQL dump 10.13  Distrib 5.6.24, for Win64 (x86_64)
--
-- Host: localhost    Database: school
-- ------------------------------------------------------
-- Server version	5.6.27-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `bank`
--

DROP TABLE IF EXISTS `bank`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `bank` (
  `name` varchar(45) NOT NULL,
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `visible` tinyint(4) NOT NULL,
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `name_UNIQUE` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `bank`
--

LOCK TABLES `bank` WRITE;
/*!40000 ALTER TABLE `bank` DISABLE KEYS */;
INSERT INTO `bank` VALUES ('Cooperative Bank',1,1),('Standard Chatered Bank',3,1),('National Bank',4,1),('KCB',5,0),('Barclays Bank',6,1),('Central Bank of Kenya',7,0),('Equity Bank',8,1),('Family Bank',9,1),('K-Rep Bank',10,1),('World Bank',11,0);
/*!40000 ALTER TABLE `bank` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `book`
--

DROP TABLE IF EXISTS `book`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `book` (
  `idBook` int(11) NOT NULL,
  `author` varchar(45) NOT NULL,
  `canBeBorrowed` tinyint(1) NOT NULL,
  `edition` int(11) NOT NULL,
  `numOfCopy` int(11) NOT NULL,
  `title` varchar(45) NOT NULL,
  `year` int(11) NOT NULL,
  `shelfNumber` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`idBook`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `book`
--

LOCK TABLES `book` WRITE;
/*!40000 ALTER TABLE `book` DISABLE KEYS */;
/*!40000 ALTER TABLE `book` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `borrower`
--

DROP TABLE IF EXISTS `borrower`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `borrower` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `students_admno` varchar(20) DEFAULT NULL,
  `teacher_code` int(11) DEFAULT NULL,
  PRIMARY KEY (`auto_id`),
  KEY `fk_person_students1_idx` (`students_admno`),
  KEY `fk_person_teacher1_idx` (`teacher_code`),
  CONSTRAINT `fk_person_students1` FOREIGN KEY (`students_admno`) REFERENCES `students` (`admno`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_person_teacher1` FOREIGN KEY (`teacher_code`) REFERENCES `teacher` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `borrower`
--

LOCK TABLES `borrower` WRITE;
/*!40000 ALTER TABLE `borrower` DISABLE KEYS */;
/*!40000 ALTER TABLE `borrower` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `class_exam_aggregates`
--

DROP TABLE IF EXISTS `class_exam_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `class_exam_aggregates` (
  `class_of` int(11) NOT NULL,
  `exam_auto_id` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `position` int(11) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`class_of`,`exam_auto_id`),
  KEY `exam_class_foreign-key_idx` (`exam_auto_id`),
  CONSTRAINT `exam_class_foreign-key` FOREIGN KEY (`exam_auto_id`) REFERENCES `exam` (`auto_id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `class_exam_aggregates`
--

LOCK TABLES `class_exam_aggregates` WRITE;
/*!40000 ALTER TABLE `class_exam_aggregates` DISABLE KEYS */;
/*!40000 ALTER TABLE `class_exam_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `class_exam_subject_aggregates`
--

DROP TABLE IF EXISTS `class_exam_subject_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `class_exam_subject_aggregates` (
  `class_of` int(11) NOT NULL,
  `exam_auto_id` int(11) NOT NULL,
  `subject_code` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `position` int(11) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`class_of`,`exam_auto_id`,`subject_code`),
  KEY `exam_class_subject_foreign-key_idx` (`exam_auto_id`),
  KEY `exam_class_subect_Code_foreinnh_idx` (`subject_code`),
  CONSTRAINT `exam_class_subect_Code_foreinnh` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `exam_class_subjectforeign-key` FOREIGN KEY (`exam_auto_id`) REFERENCES `exam` (`auto_id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `class_exam_subject_aggregates`
--

LOCK TABLES `class_exam_subject_aggregates` WRITE;
/*!40000 ALTER TABLE `class_exam_subject_aggregates` DISABLE KEYS */;
/*!40000 ALTER TABLE `class_exam_subject_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `class_stream`
--

DROP TABLE IF EXISTS `class_stream`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `class_stream` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `stream_name` varchar(45) NOT NULL,
  `class_of` int(11) NOT NULL,
  `teacher_auto_id` int(11) NOT NULL,
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `primary_con` (`class_of`,`stream_name`),
  KEY `teachersubject_idx` (`teacher_auto_id`),
  CONSTRAINT `teacher_stream-for_key` FOREIGN KEY (`teacher_auto_id`) REFERENCES `teacher` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=28 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `class_stream`
--

LOCK TABLES `class_stream` WRITE;
/*!40000 ALTER TABLE `class_stream` DISABLE KEYS */;
INSERT INTO `class_stream` VALUES (21,'NORTH',2015,118),(22,'NORTH',2016,121),(23,'NORTH',2017,119),(24,'NORTH',2018,122),(25,'EAST',2087,119),(26,'jkuat',2098,122);
/*!40000 ALTER TABLE `class_stream` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `class_term_aggregates`
--

DROP TABLE IF EXISTS `class_term_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `class_term_aggregates` (
  `class_of` int(11) NOT NULL,
  `term_auto_id` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `position` int(11) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`class_of`,`term_auto_id`),
  KEY `term_class_foreign-key_idx` (`term_auto_id`),
  CONSTRAINT `term_class_foreign-key` FOREIGN KEY (`term_auto_id`) REFERENCES `term` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `class_term_aggregates`
--

LOCK TABLES `class_term_aggregates` WRITE;
/*!40000 ALTER TABLE `class_term_aggregates` DISABLE KEYS */;
INSERT INTO `class_term_aggregates` VALUES (2016,57,4,'E',2,NULL),(2017,57,16,'E',1,NULL),(2018,57,0,'E',3,NULL);
/*!40000 ALTER TABLE `class_term_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `class_term_subject_aggregates`
--

DROP TABLE IF EXISTS `class_term_subject_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `class_term_subject_aggregates` (
  `class_of` int(11) NOT NULL,
  `term_auto_id` int(11) NOT NULL,
  `subject_code` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `position` int(11) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`class_of`,`term_auto_id`,`subject_code`),
  KEY `term_class_subjectforeign-key_idx` (`term_auto_id`),
  KEY `subject_class_term_aggregtaes_foreinkey_idx` (`subject_code`),
  CONSTRAINT `subject_class_term_aggregtaes_foreinkey` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `term_class_subject_foreign-key` FOREIGN KEY (`term_auto_id`) REFERENCES `term` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `class_term_subject_aggregates`
--

LOCK TABLES `class_term_subject_aggregates` WRITE;
/*!40000 ALTER TABLE `class_term_subject_aggregates` DISABLE KEYS */;
INSERT INTO `class_term_subject_aggregates` VALUES (2016,57,101,1,'E',2,NULL),(2016,57,102,7,'E',1,NULL),(2016,57,121,0,'E',1,NULL),(2016,57,231,4,'E',1,NULL),(2016,57,232,NULL,NULL,1,NULL),(2016,57,233,1,'E',1,NULL),(2016,57,311,6,'E',1,NULL),(2016,57,312,14,'E',1,NULL),(2016,57,313,1,'E',1,NULL),(2016,57,443,6,'E',1,NULL),(2016,57,565,NULL,NULL,1,NULL),(2017,57,101,16,'E',1,NULL),(2018,57,101,0,'E',3,NULL);
/*!40000 ALTER TABLE `class_term_subject_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `currentstudent`
--

DROP TABLE IF EXISTS `currentstudent`;
/*!50001 DROP VIEW IF EXISTS `currentstudent`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `currentstudent` AS SELECT 
 1 AS `auto_id`,
 1 AS `admno`,
 1 AS `name`,
 1 AS `kcpe_mark`,
 1 AS `gender`,
 1 AS `image_filepath`,
 1 AS `guardian_name`,
 1 AS `guardian_phone_no`,
 1 AS `class_stream_auto_id`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `dbversion`
--

DROP TABLE IF EXISTS `dbversion`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `dbversion` (
  `major` int(11) NOT NULL,
  `minor` int(11) NOT NULL,
  `patch` int(11) NOT NULL,
  PRIMARY KEY (`major`,`minor`,`patch`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `dbversion`
--

LOCK TABLES `dbversion` WRITE;
/*!40000 ALTER TABLE `dbversion` DISABLE KEYS */;
INSERT INTO `dbversion` VALUES (1,1,1);
/*!40000 ALTER TABLE `dbversion` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `done_subject`
--

DROP TABLE IF EXISTS `done_subject`;
/*!50001 DROP VIEW IF EXISTS `done_subject`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `done_subject` AS SELECT 
 1 AS `code`,
 1 AS `name`,
 1 AS `abbreviation`,
 1 AS `group`,
 1 AS `is_junior_compulsory`,
 1 AS `is_senior_compulsory`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `exam`
--

DROP TABLE IF EXISTS `exam`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `exam` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `term_auto_id` int(11) NOT NULL,
  `out_of` int(11) NOT NULL,
  `start_date` date NOT NULL,
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `exam_name_term_uniq` (`name`,`term_auto_id`),
  KEY `term_jfKeyhhh_idx` (`term_auto_id`),
  CONSTRAINT `term_jfKeyhhh` FOREIGN KEY (`term_auto_id`) REFERENCES `term` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=167 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `exam`
--

LOCK TABLES `exam` WRITE;
/*!40000 ALTER TABLE `exam` DISABLE KEYS */;
INSERT INTO `exam` VALUES (164,'Exam A',12,100,'2016-01-20'),(165,'Exam B',21,100,'2016-01-26'),(166,'Exam C',23,100,'2016-01-28');
/*!40000 ALTER TABLE `exam` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `exam_class`
--

DROP TABLE IF EXISTS `exam_class`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `exam_class` (
  `exam_auto_id` int(11) NOT NULL,
  `featured_class` int(11) NOT NULL,
  `account_for` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`exam_auto_id`,`featured_class`),
  CONSTRAINT `exam_auto_class_key` FOREIGN KEY (`exam_auto_id`) REFERENCES `exam` (`auto_id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `exam_class`
--

LOCK TABLES `exam_class` WRITE;
/*!40000 ALTER TABLE `exam_class` DISABLE KEYS */;
INSERT INTO `exam_class` VALUES (164,1,20),(164,2,20),(164,3,20),(164,4,20),(165,1,15),(165,2,20),(165,3,20),(165,4,20),(166,1,20),(166,2,20),(166,3,20),(166,4,20);
/*!40000 ALTER TABLE `exam_class` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `exam_mark`
--

DROP TABLE IF EXISTS `exam_mark`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `exam_mark` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `student_auto_id` int(11) NOT NULL,
  `exam_auto_id` int(11) NOT NULL,
  `subject_code` int(11) NOT NULL,
  `mark` int(11) NOT NULL,
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `exam_stude_subj_unique` (`student_auto_id`,`exam_auto_id`,`subject_code`),
  KEY `sub_fore_idx` (`subject_code`),
  KEY `stu_fore_idx` (`student_auto_id`),
  KEY `exam_fore_idx` (`exam_auto_id`),
  KEY `exam_stude_subj_index` (`student_auto_id`,`exam_auto_id`,`subject_code`),
  CONSTRAINT `exam_fore` FOREIGN KEY (`exam_auto_id`) REFERENCES `exam` (`auto_id`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `stu_fore` FOREIGN KEY (`student_auto_id`) REFERENCES `students` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `sub_fore` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=436401 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `exam_mark`
--

LOCK TABLES `exam_mark` WRITE;
/*!40000 ALTER TABLE `exam_mark` DISABLE KEYS */;
/*!40000 ALTER TABLE `exam_mark` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `exam_view`
--

DROP TABLE IF EXISTS `exam_view`;
/*!50001 DROP VIEW IF EXISTS `exam_view`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `exam_view` AS SELECT 
 1 AS `auto_id`,
 1 AS `name`,
 1 AS `term_auto_id`,
 1 AS `out_of`,
 1 AS `start_date`,
 1 AS `exam_auto_id`,
 1 AS `featured_class`,
 1 AS `account_for`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `fee_amount`
--

DROP TABLE IF EXISTS `fee_amount`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `fee_amount` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `term_auto_id` int(11) NOT NULL,
  `form` int(11) NOT NULL,
  `amount` double DEFAULT NULL,
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `uniq_key` (`form`,`term_auto_id`),
  KEY `term_prim_key_idx` (`term_auto_id`),
  CONSTRAINT `term_prim_key` FOREIGN KEY (`term_auto_id`) REFERENCES `term` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `fee_amount`
--

LOCK TABLES `fee_amount` WRITE;
/*!40000 ALTER TABLE `fee_amount` DISABLE KEYS */;
/*!40000 ALTER TABLE `fee_amount` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `fee_credit`
--

DROP TABLE IF EXISTS `fee_credit`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `fee_credit` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `student_auto_id` int(11) NOT NULL,
  `description` varchar(100) NOT NULL,
  `date` date NOT NULL,
  `amount` double NOT NULL,
  PRIMARY KEY (`auto_id`),
  KEY ` fee_cre_stud_quot_fkey_idx` (`student_auto_id`),
  CONSTRAINT `fee_cred_stud_quot_fkey` FOREIGN KEY (`student_auto_id`) REFERENCES `students` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `fee_credit`
--

LOCK TABLES `fee_credit` WRITE;
/*!40000 ALTER TABLE `fee_credit` DISABLE KEYS */;
/*!40000 ALTER TABLE `fee_credit` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `fee_transaction`
--

DROP TABLE IF EXISTS `fee_transaction`;
/*!50001 DROP VIEW IF EXISTS `fee_transaction`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `fee_transaction` AS SELECT 
 1 AS `student_auto_id`,
 1 AS `date`,
 1 AS `trans_type`,
 1 AS `trans_number`,
 1 AS `description`,
 1 AS `amount`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `field`
--

DROP TABLE IF EXISTS `field`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `field` (
  `auto_id` int(11) NOT NULL,
  `name` varchar(250) NOT NULL,
  `parent` int(11) DEFAULT NULL,
  PRIMARY KEY (`auto_id`),
  KEY `field_field_fkx_idx` (`parent`),
  CONSTRAINT `field_field_fkx` FOREIGN KEY (`parent`) REFERENCES `field` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `field`
--

LOCK TABLES `field` WRITE;
/*!40000 ALTER TABLE `field` DISABLE KEYS */;
/*!40000 ALTER TABLE `field` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `general_grade`
--

DROP TABLE IF EXISTS `general_grade`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `general_grade` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `grade_points` int(11) NOT NULL,
  `form` int(11) NOT NULL,
  `lower_bound` int(11) NOT NULL,
  `comment` text,
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `grade_form_unigque` (`grade_points`,`form`),
  KEY `grade_form_ub` (`grade_points`,`form`),
  CONSTRAINT `grade_point_class_grade` FOREIGN KEY (`grade_points`) REFERENCES `grade` (`points`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=197 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `general_grade`
--

LOCK TABLES `general_grade` WRITE;
/*!40000 ALTER TABLE `general_grade` DISABLE KEYS */;
INSERT INTO `general_grade` VALUES (149,12,1,80,'Excellent'),(150,11,1,75,'Very Good'),(151,10,1,70,'Good'),(152,9,1,65,'Fair'),(153,8,1,60,'Nice work'),(154,7,1,55,'Above average'),(155,6,1,50,'Average'),(156,5,1,45,'Below average'),(157,4,1,40,'Can do better'),(158,3,1,35,'Pull up your socks'),(159,2,1,30,'Put more effort.'),(160,1,1,0,'Try harder.'),(161,12,2,80,'Excellent'),(162,11,2,75,'Very Good'),(163,10,2,70,'Good'),(164,9,2,65,'Fair'),(165,8,2,60,'Nice work'),(166,7,2,55,'Above average'),(167,6,2,50,'Average'),(168,5,2,45,'Below average'),(169,4,2,40,'Can do better'),(170,3,2,35,'Pull up your socks'),(171,2,2,30,'Put more effort.'),(172,1,2,0,'Try harder.'),(173,12,3,80,'Excellent'),(174,11,3,75,'Very Good'),(175,10,3,70,'Good'),(176,9,3,65,'Fair'),(177,8,3,60,'Nice work'),(178,7,3,55,'Above average'),(179,6,3,50,'Average'),(180,5,3,45,'Below average'),(181,4,3,40,'Can do better'),(182,3,3,35,'Pull up your socks'),(183,2,3,30,'Put more effort.'),(184,1,3,0,'Try harder.'),(185,12,4,80,'Excellent'),(186,11,4,75,'Very Good'),(187,10,4,70,'Good'),(188,9,4,65,'Fair'),(189,8,4,60,'Nice work'),(190,7,4,55,'Above average'),(191,6,4,50,'Average'),(192,5,4,45,'Below average'),(193,4,4,40,'Can do better'),(194,3,4,35,'Pull up your socks'),(195,2,4,30,'Put more effort.'),(196,1,4,0,'Try harder.');
/*!40000 ALTER TABLE `general_grade` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `general_grade_view`
--

DROP TABLE IF EXISTS `general_grade_view`;
/*!50001 DROP VIEW IF EXISTS `general_grade_view`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `general_grade_view` AS SELECT 
 1 AS `auto_id`,
 1 AS `name`,
 1 AS `points`,
 1 AS `form`,
 1 AS `lower_bound`,
 1 AS `comment`,
 1 AS `upper_bound`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `grade`
--

DROP TABLE IF EXISTS `grade`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `grade` (
  `name` varchar(2) NOT NULL,
  `comment` varchar(100) NOT NULL,
  `points` int(11) NOT NULL,
  PRIMARY KEY (`points`),
  UNIQUE KEY `name_UNIQUE` (`name`),
  KEY `name_index` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `grade`
--

LOCK TABLES `grade` WRITE;
/*!40000 ALTER TABLE `grade` DISABLE KEYS */;
INSERT INTO `grade` VALUES ('E','Improve',1),('D-','Put More Effort',2),('D','More Effort',3),('D+','Can do Better',4),('C-','Fair',5),('C','Average',6),('C+','Fair Trial',7),('B-','Well Done',8),('B','Good',9),('B+','Very Good',10),('A-','Impressive',11),('A','Excellent',12);
/*!40000 ALTER TABLE `grade` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `invoice`
--

DROP TABLE IF EXISTS `invoice`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `invoice` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `student_auto_id` int(11) NOT NULL,
  `description` varchar(100) NOT NULL,
  `date` date NOT NULL,
  `amount` double NOT NULL,
  PRIMARY KEY (`auto_id`),
  KEY `stud_quot_fkey_idx` (`student_auto_id`),
  CONSTRAINT `stud_quot_fkey` FOREIGN KEY (`student_auto_id`) REFERENCES `students` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `invoice`
--

LOCK TABLES `invoice` WRITE;
/*!40000 ALTER TABLE `invoice` DISABLE KEYS */;
/*!40000 ALTER TABLE `invoice` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `junior_student_v`
--

DROP TABLE IF EXISTS `junior_student_v`;
/*!50001 DROP VIEW IF EXISTS `junior_student_v`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `junior_student_v` AS SELECT 
 1 AS `auto_id`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `junior_students_subject`
--

DROP TABLE IF EXISTS `junior_students_subject`;
/*!50001 DROP VIEW IF EXISTS `junior_students_subject`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `junior_students_subject` AS SELECT 
 1 AS `student_auto_id`,
 1 AS `subject_code`,
 1 AS `doing`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `junior_subject_selection`
--

DROP TABLE IF EXISTS `junior_subject_selection`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `junior_subject_selection` (
  `student_auto_id` int(11) NOT NULL,
  `subject_code` int(11) NOT NULL,
  PRIMARY KEY (`student_auto_id`,`subject_code`),
  KEY `subject_done_idx` (`subject_code`),
  KEY `subject_done_id` (`subject_code`),
  CONSTRAINT `studenyfgkey` FOREIGN KEY (`student_auto_id`) REFERENCES `students` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `subject_auto_id` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `junior_subject_selection`
--

LOCK TABLES `junior_subject_selection` WRITE;
/*!40000 ALTER TABLE `junior_subject_selection` DISABLE KEYS */;
/*!40000 ALTER TABLE `junior_subject_selection` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `marks_extended`
--

DROP TABLE IF EXISTS `marks_extended`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `marks_extended` (
  `exam_mark_auto_id` int(11) NOT NULL,
  `percentage` int(11) DEFAULT NULL,
  `grade_name` varchar(2) DEFAULT NULL,
  `grade_points` int(11) DEFAULT NULL,
  `comment` varchar(100) DEFAULT NULL,
  `stream_position` int(11) DEFAULT NULL,
  `class_position` int(11) DEFAULT NULL,
  `improvement` int(11) DEFAULT NULL,
  PRIMARY KEY (`exam_mark_auto_id`),
  CONSTRAINT `exaam_mark_fkey` FOREIGN KEY (`exam_mark_auto_id`) REFERENCES `exam_mark` (`auto_id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `marks_extended`
--

LOCK TABLES `marks_extended` WRITE;
/*!40000 ALTER TABLE `marks_extended` DISABLE KEYS */;
/*!40000 ALTER TABLE `marks_extended` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `marks_view`
--

DROP TABLE IF EXISTS `marks_view`;
/*!50001 DROP VIEW IF EXISTS `marks_view`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `marks_view` AS SELECT 
 1 AS `auto_id`,
 1 AS `student_auto_id`,
 1 AS `exam_auto_id`,
 1 AS `subject_code`,
 1 AS `mark`,
 1 AS `exam_mark_auto_id`,
 1 AS `percentage`,
 1 AS `grade_name`,
 1 AS `grade_points`,
 1 AS `comment`,
 1 AS `stream_position`,
 1 AS `class_position`,
 1 AS `improvement`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `payment_method`
--

DROP TABLE IF EXISTS `payment_method`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_method` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  `allowed` tinyint(4) NOT NULL DEFAULT '1',
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `name_UNIQUE` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `payment_method`
--

LOCK TABLES `payment_method` WRITE;
/*!40000 ALTER TABLE `payment_method` DISABLE KEYS */;
INSERT INTO `payment_method` VALUES (1,'Cash',1),(2,'Cheque',1),(3,'Direct Deposit',1),(4,'Money Order',1),(5,'Mpesa',1),(6,'Western Union',1),(7,'Pesapal',0),(8,'Paypal',1);
/*!40000 ALTER TABLE `payment_method` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `receipt`
--

DROP TABLE IF EXISTS `receipt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `receipt` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `receipt_no` varchar(45) NOT NULL,
  `date` date NOT NULL,
  `received_from` varchar(45) NOT NULL,
  `payment_method` varchar(45) NOT NULL,
  `bank` varchar(45) DEFAULT NULL,
  `ref_no` varchar(45) NOT NULL,
  `amount` double NOT NULL,
  `processed` smallint(6) DEFAULT '0',
  `student_auto_id` int(11) NOT NULL,
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `receipt_no_UNIQUE` (`receipt_no`),
  KEY `fk_receipt_students_idx` (`student_auto_id`),
  CONSTRAINT `receipt_student_fx` FOREIGN KEY (`student_auto_id`) REFERENCES `students` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `receipt`
--

LOCK TABLES `receipt` WRITE;
/*!40000 ALTER TABLE `receipt` DISABLE KEYS */;
/*!40000 ALTER TABLE `receipt` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `receipt_number_gen`
--

DROP TABLE IF EXISTS `receipt_number_gen`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `receipt_number_gen` (
  `next_receipt_number` int(11) NOT NULL DEFAULT '1',
  `prefix` varchar(45) NOT NULL,
  `suffix` varchar(45) CHARACTER SET latin2 COLLATE latin2_croatian_ci NOT NULL,
  PRIMARY KEY (`next_receipt_number`,`prefix`,`suffix`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `receipt_number_gen`
--

LOCK TABLES `receipt_number_gen` WRITE;
/*!40000 ALTER TABLE `receipt_number_gen` DISABLE KEYS */;
/*!40000 ALTER TABLE `receipt_number_gen` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `record`
--

DROP TABLE IF EXISTS `record`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `record` (
  `idBook` int(11) NOT NULL,
  `check_out_condition` varchar(45) NOT NULL,
  `dueDate` date NOT NULL,
  `isBack` tinyint(1) NOT NULL,
  `borrow_date` date NOT NULL,
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `borrower_auto_id` int(11) NOT NULL,
  PRIMARY KEY (`auto_id`),
  KEY `fk_record_borrower1_idx` (`borrower_auto_id`),
  CONSTRAINT `fk_record_borrower1` FOREIGN KEY (`borrower_auto_id`) REFERENCES `borrower` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `record`
--

LOCK TABLES `record` WRITE;
/*!40000 ALTER TABLE `record` DISABLE KEYS */;
/*!40000 ALTER TABLE `record` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `req_student_view`
--

DROP TABLE IF EXISTS `req_student_view`;
/*!50001 DROP VIEW IF EXISTS `req_student_view`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `req_student_view` AS SELECT 
 1 AS `auto_id`,
 1 AS `admno`,
 1 AS `name`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `school`
--

DROP TABLE IF EXISTS `school`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `school` (
  `name` varchar(100) NOT NULL,
  `email` varchar(100) DEFAULT NULL,
  `address` varchar(100) DEFAULT NULL,
  `phone_no` varchar(20) DEFAULT NULL,
  `logo` varchar(300) DEFAULT NULL,
  PRIMARY KEY (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `school`
--

LOCK TABLES `school` WRITE;
/*!40000 ALTER TABLE `school` DISABLE KEYS */;
/*!40000 ALTER TABLE `school` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `school_exam_aggregates`
--

DROP TABLE IF EXISTS `school_exam_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `school_exam_aggregates` (
  `exam_auto_id` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`exam_auto_id`),
  CONSTRAINT `exam_school_ferign_key` FOREIGN KEY (`exam_auto_id`) REFERENCES `exam` (`auto_id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `school_exam_aggregates`
--

LOCK TABLES `school_exam_aggregates` WRITE;
/*!40000 ALTER TABLE `school_exam_aggregates` DISABLE KEYS */;
/*!40000 ALTER TABLE `school_exam_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `school_exam_subject_aggregates`
--

DROP TABLE IF EXISTS `school_exam_subject_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `school_exam_subject_aggregates` (
  `exam_auto_id` int(11) NOT NULL,
  `subject_code` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`exam_auto_id`,`subject_code`),
  KEY `school_exam_subject_aggregates_subject_foren_idx` (`subject_code`),
  CONSTRAINT `exam_school_subject_ferign_key` FOREIGN KEY (`exam_auto_id`) REFERENCES `exam` (`auto_id`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `school_exam_subject_aggregates_subject_foren` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `school_exam_subject_aggregates`
--

LOCK TABLES `school_exam_subject_aggregates` WRITE;
/*!40000 ALTER TABLE `school_exam_subject_aggregates` DISABLE KEYS */;
/*!40000 ALTER TABLE `school_exam_subject_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `school_term_aggregates`
--

DROP TABLE IF EXISTS `school_term_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `school_term_aggregates` (
  `term_auto_id` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`term_auto_id`),
  CONSTRAINT `term_schoool_fkx` FOREIGN KEY (`term_auto_id`) REFERENCES `term` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `school_term_aggregates`
--

LOCK TABLES `school_term_aggregates` WRITE;
/*!40000 ALTER TABLE `school_term_aggregates` DISABLE KEYS */;
INSERT INTO `school_term_aggregates` VALUES (57,5,'E',NULL);
/*!40000 ALTER TABLE `school_term_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `school_term_subject_aggregates`
--

DROP TABLE IF EXISTS `school_term_subject_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `school_term_subject_aggregates` (
  `term_auto_id` int(11) NOT NULL,
  `subject_code` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`term_auto_id`,`subject_code`),
  KEY `school_term_subject_aggregates_subject_fkx_idx` (`subject_code`),
  CONSTRAINT `school_term_subject_aggregates_subject_fkx` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `term_schoool_subject_fkx` FOREIGN KEY (`term_auto_id`) REFERENCES `term` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `school_term_subject_aggregates`
--

LOCK TABLES `school_term_subject_aggregates` WRITE;
/*!40000 ALTER TABLE `school_term_subject_aggregates` DISABLE KEYS */;
INSERT INTO `school_term_subject_aggregates` VALUES (57,101,2,'E',NULL),(57,102,7,'E',NULL),(57,121,0,'E',NULL),(57,231,4,'E',NULL),(57,232,NULL,NULL,NULL),(57,233,1,'E',NULL),(57,311,6,'E',NULL),(57,312,14,'E',NULL),(57,313,1,'E',NULL),(57,443,6,'E',NULL);
/*!40000 ALTER TABLE `school_term_subject_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `senior_student_v`
--

DROP TABLE IF EXISTS `senior_student_v`;
/*!50001 DROP VIEW IF EXISTS `senior_student_v`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `senior_student_v` AS SELECT 
 1 AS `auto_id`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `senior_students_subject`
--

DROP TABLE IF EXISTS `senior_students_subject`;
/*!50001 DROP VIEW IF EXISTS `senior_students_subject`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `senior_students_subject` AS SELECT 
 1 AS `student_auto_id`,
 1 AS `subject_code`,
 1 AS `doing`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `senior_subject_selection`
--

DROP TABLE IF EXISTS `senior_subject_selection`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `senior_subject_selection` (
  `student_auto_id` int(11) NOT NULL,
  `subject_code` int(11) NOT NULL,
  PRIMARY KEY (`subject_code`,`student_auto_id`),
  KEY `fk_students_has_subject_subject1_idx` (`subject_code`),
  KEY `fk_students_has_subject_students1_idx` (`student_auto_id`),
  CONSTRAINT `fk_students_has_subject_students1` FOREIGN KEY (`student_auto_id`) REFERENCES `students` (`auto_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_students_has_subject_subject1` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `senior_subject_selection`
--

LOCK TABLES `senior_subject_selection` WRITE;
/*!40000 ALTER TABLE `senior_subject_selection` DISABLE KEYS */;
INSERT INTO `senior_subject_selection` VALUES (482,231),(490,231),(482,311),(483,311),(484,311),(485,311),(486,311),(487,311),(488,311),(490,311),(491,311),(492,311),(493,311),(500,311),(501,311),(502,311),(520,311),(535,311),(537,311),(538,311),(540,311),(542,311),(544,311),(545,311),(554,311),(555,311),(608,311),(609,311),(616,311),(619,311),(624,311),(631,311),(641,311),(490,312),(542,312),(482,313),(483,313),(485,313),(486,313),(487,313),(489,313),(490,313),(491,313),(493,313),(500,313),(501,313),(502,313),(520,313),(535,313),(537,313),(538,313),(540,313),(544,313),(545,313),(554,313),(555,313),(608,313),(609,313),(616,313),(619,313),(624,313),(631,313),(641,313),(482,443),(483,443),(484,443),(485,443),(486,443),(487,443),(490,443),(493,443),(520,443),(535,443),(538,443),(540,443),(545,443),(554,443),(608,443),(616,443),(624,443),(631,443),(489,565),(491,565),(500,565),(501,565),(502,565),(520,565),(537,565),(542,565),(544,565),(555,565),(609,565),(619,565);
/*!40000 ALTER TABLE `senior_subject_selection` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `settings`
--

DROP TABLE IF EXISTS `settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `settings` (
  `key` varchar(45) NOT NULL,
  `value` text,
  PRIMARY KEY (`key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `settings`
--

LOCK TABLES `settings` WRITE;
/*!40000 ALTER TABLE `settings` DISABLE KEYS */;
INSERT INTO `settings` VALUES ('school_address','PO Box 369-00100'),('school_email','trialversion@smartdesk.co.ke'),('school_name','Trial Version High School'),('school_phone','0713 132 132');
/*!40000 ALTER TABLE `settings` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `stream_exam_aggregates`
--

DROP TABLE IF EXISTS `stream_exam_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stream_exam_aggregates` (
  `stream_auto_id` int(11) NOT NULL,
  `exam_auto_id` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `class_position` int(11) DEFAULT NULL,
  `school_position` int(11) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`stream_auto_id`,`exam_auto_id`),
  KEY `exam_aggr_forein_key_idx` (`exam_auto_id`),
  CONSTRAINT `exam_aggr_forein_key` FOREIGN KEY (`exam_auto_id`) REFERENCES `exam` (`auto_id`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `stream_aggr_forein_key` FOREIGN KEY (`stream_auto_id`) REFERENCES `class_stream` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `stream_exam_aggregates`
--

LOCK TABLES `stream_exam_aggregates` WRITE;
/*!40000 ALTER TABLE `stream_exam_aggregates` DISABLE KEYS */;
/*!40000 ALTER TABLE `stream_exam_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `stream_exam_subject_aggregates`
--

DROP TABLE IF EXISTS `stream_exam_subject_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stream_exam_subject_aggregates` (
  `stream_auto_id` int(11) NOT NULL,
  `exam_auto_id` int(11) NOT NULL,
  `subject_code` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `class_position` int(11) DEFAULT NULL,
  `school_position` int(11) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`stream_auto_id`,`exam_auto_id`,`subject_code`),
  KEY `exam_aggr_forein_key_idx` (`exam_auto_id`),
  KEY `stream_exam_subject_aggregates_subject_fkx_idx` (`subject_code`),
  CONSTRAINT `exam_aggr_subject_forein_key` FOREIGN KEY (`exam_auto_id`) REFERENCES `exam` (`auto_id`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `stream_aggr_subject_forein_key` FOREIGN KEY (`stream_auto_id`) REFERENCES `class_stream` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `stream_exam_subject_aggregates_subject_fkx` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `stream_exam_subject_aggregates`
--

LOCK TABLES `stream_exam_subject_aggregates` WRITE;
/*!40000 ALTER TABLE `stream_exam_subject_aggregates` DISABLE KEYS */;
/*!40000 ALTER TABLE `stream_exam_subject_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `stream_fee_amount`
--

DROP TABLE IF EXISTS `stream_fee_amount`;
/*!50001 DROP VIEW IF EXISTS `stream_fee_amount`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `stream_fee_amount` AS SELECT 
 1 AS `class_stream_auto_id`,
 1 AS `class_of`,
 1 AS `stream_name`,
 1 AS `year`,
 1 AS `term_number`,
 1 AS `posting_date`,
 1 AS `form`,
 1 AS `amount`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stream_teacher_subject`
--

DROP TABLE IF EXISTS `stream_teacher_subject`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stream_teacher_subject` (
  `subject_code` int(11) NOT NULL,
  `stream_auto_id` int(11) NOT NULL,
  `teacher_auto_id` int(11) NOT NULL,
  PRIMARY KEY (`subject_code`,`stream_auto_id`,`teacher_auto_id`),
  KEY `stream_straem_auto_id_ehdfd_idx` (`stream_auto_id`),
  KEY `teacher_dsahdjf_idx` (`teacher_auto_id`),
  CONSTRAINT `stream_straem_auto_id_ehdfd` FOREIGN KEY (`stream_auto_id`) REFERENCES `class_stream` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `subject_ssuhfss` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `teacher_dsahdjf` FOREIGN KEY (`teacher_auto_id`) REFERENCES `teacher` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `stream_teacher_subject`
--

LOCK TABLES `stream_teacher_subject` WRITE;
/*!40000 ALTER TABLE `stream_teacher_subject` DISABLE KEYS */;
INSERT INTO `stream_teacher_subject` VALUES (101,21,120),(102,21,120),(121,21,117),(121,21,118),(312,21,119),(101,23,118),(102,23,118),(121,23,117),(231,23,118),(232,23,118);
/*!40000 ALTER TABLE `stream_teacher_subject` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `stream_term_aggregates`
--

DROP TABLE IF EXISTS `stream_term_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stream_term_aggregates` (
  `stream_auto_id` int(11) NOT NULL,
  `term_auto_id` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `class_position` int(11) DEFAULT NULL,
  `school_position` int(11) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`stream_auto_id`,`term_auto_id`),
  KEY `exam_aggr_forein_key_idx` (`term_auto_id`),
  CONSTRAINT `stream_term_aggr_forein_key` FOREIGN KEY (`stream_auto_id`) REFERENCES `class_stream` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `term_aggr_forein_key` FOREIGN KEY (`term_auto_id`) REFERENCES `term` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `stream_term_aggregates`
--

LOCK TABLES `stream_term_aggregates` WRITE;
/*!40000 ALTER TABLE `stream_term_aggregates` DISABLE KEYS */;
INSERT INTO `stream_term_aggregates` VALUES (22,57,4,'E',1,2,NULL),(23,57,16,'E',1,1,NULL),(24,57,0,'E',1,3,NULL);
/*!40000 ALTER TABLE `stream_term_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `stream_term_subject_aggregates`
--

DROP TABLE IF EXISTS `stream_term_subject_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stream_term_subject_aggregates` (
  `stream_auto_id` int(11) NOT NULL,
  `term_auto_id` int(11) NOT NULL,
  `subject_Code` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `class_position` int(11) DEFAULT NULL,
  `school_position` int(11) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`stream_auto_id`,`term_auto_id`,`subject_Code`),
  KEY `exam_aggr_forein_key_idx` (`term_auto_id`),
  KEY `stream_term_subject_aggregates_subject_fkx_idx` (`subject_Code`),
  CONSTRAINT `stream_term_subject_aggr_forein_key` FOREIGN KEY (`stream_auto_id`) REFERENCES `class_stream` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `stream_term_subject_aggregates_subject_fkx` FOREIGN KEY (`subject_Code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `term_subject_aggr_forein_key` FOREIGN KEY (`term_auto_id`) REFERENCES `term` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `stream_term_subject_aggregates`
--

LOCK TABLES `stream_term_subject_aggregates` WRITE;
/*!40000 ALTER TABLE `stream_term_subject_aggregates` DISABLE KEYS */;
INSERT INTO `stream_term_subject_aggregates` VALUES (22,57,101,1,'E',1,2,NULL),(22,57,102,7,'E',1,1,NULL),(22,57,121,0,'E',1,1,NULL),(22,57,231,4,'E',1,1,NULL),(22,57,232,NULL,NULL,1,1,NULL),(22,57,233,1,'E',1,1,NULL),(22,57,311,6,'E',1,1,NULL),(22,57,312,14,'E',1,1,NULL),(22,57,313,1,'E',1,1,NULL),(22,57,443,6,'E',1,1,NULL),(22,57,565,NULL,NULL,1,1,NULL),(23,57,101,16,'E',1,1,NULL),(24,57,101,0,'E',1,3,NULL);
/*!40000 ALTER TABLE `stream_term_subject_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `student_basic_info`
--

DROP TABLE IF EXISTS `student_basic_info`;
/*!50001 DROP VIEW IF EXISTS `student_basic_info`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `student_basic_info` AS SELECT 
 1 AS `auto_id`,
 1 AS `admno`,
 1 AS `name`,
 1 AS `class_stream_auto_id`,
 1 AS `class_of`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `student_exam_aggregates`
--

DROP TABLE IF EXISTS `student_exam_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `student_exam_aggregates` (
  `student_auto_id` int(11) NOT NULL,
  `exam_auto_id` int(11) NOT NULL,
  `total` int(11) DEFAULT NULL,
  `average` float DEFAULT NULL,
  `average_grade` varchar(2) DEFAULT NULL,
  `comment` varchar(100) DEFAULT NULL,
  `agg_cluster_point` int(11) DEFAULT NULL,
  `agg_cluster_grade` varchar(2) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  `kcpe_improvement_index` float DEFAULT NULL,
  `stream_position` int(11) DEFAULT NULL,
  `class_position` int(11) DEFAULT NULL,
  PRIMARY KEY (`student_auto_id`,`exam_auto_id`),
  KEY `fk_student_exam_averages_exam1_idx` (`exam_auto_id`),
  CONSTRAINT `fk_student_exam_averages_exam1` FOREIGN KEY (`exam_auto_id`) REFERENCES `exam` (`auto_id`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `student_progress_id1` FOREIGN KEY (`student_auto_id`) REFERENCES `students` (`auto_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `student_exam_aggregates`
--

LOCK TABLES `student_exam_aggregates` WRITE;
/*!40000 ALTER TABLE `student_exam_aggregates` DISABLE KEYS */;
/*!40000 ALTER TABLE `student_exam_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `student_fee_invoice`
--

DROP TABLE IF EXISTS `student_fee_invoice`;
/*!50001 DROP VIEW IF EXISTS `student_fee_invoice`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `student_fee_invoice` AS SELECT 
 1 AS `date`,
 1 AS `student_auto_id`,
 1 AS `invoice_number`,
 1 AS `description`,
 1 AS `amount`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `student_junior_subject_doing`
--

DROP TABLE IF EXISTS `student_junior_subject_doing`;
/*!50001 DROP VIEW IF EXISTS `student_junior_subject_doing`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `student_junior_subject_doing` AS SELECT 
 1 AS `student_auto_id`,
 1 AS `subject_code`,
 1 AS `doing`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `student_senior_subject_doing`
--

DROP TABLE IF EXISTS `student_senior_subject_doing`;
/*!50001 DROP VIEW IF EXISTS `student_senior_subject_doing`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `student_senior_subject_doing` AS SELECT 
 1 AS `student_auto_id`,
 1 AS `subject_code`,
 1 AS `doing`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `student_subject`
--

DROP TABLE IF EXISTS `student_subject`;
/*!50001 DROP VIEW IF EXISTS `student_subject`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `student_subject` AS SELECT 
 1 AS `student_auto_id`,
 1 AS `subject_code`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `student_term_aggregates`
--

DROP TABLE IF EXISTS `student_term_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `student_term_aggregates` (
  `student_auto_id` int(11) NOT NULL,
  `term_auto_id` int(11) NOT NULL,
  `average` float DEFAULT NULL,
  `average_grade` varchar(2) DEFAULT NULL,
  `comment` varchar(100) DEFAULT NULL,
  `agg_cluster_point` int(11) DEFAULT NULL,
  `agg_cluster_grade` varchar(2) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  `kcpe_improvement_index` float DEFAULT NULL,
  `stream_position` int(11) DEFAULT NULL,
  `class_position` int(11) DEFAULT NULL,
  PRIMARY KEY (`student_auto_id`,`term_auto_id`),
  KEY `term_fkey_idx` (`term_auto_id`),
  CONSTRAINT `student_f_key_f` FOREIGN KEY (`student_auto_id`) REFERENCES `students` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `term_fkey` FOREIGN KEY (`term_auto_id`) REFERENCES `term` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `student_term_aggregates`
--

LOCK TABLES `student_term_aggregates` WRITE;
/*!40000 ALTER TABLE `student_term_aggregates` DISABLE KEYS */;
INSERT INTO `student_term_aggregates` VALUES (482,57,1,'E','Try harder.',NULL,'C',NULL,-15,2,2),(483,57,0,'E','Try harder.',NULL,NULL,NULL,-43,3,3),(484,57,0,'E','Try harder.',NULL,'C-',NULL,-18,3,3),(485,57,0,'E','Try harder.',NULL,'E',NULL,-38,3,3),(486,57,0,'E','Try harder.',NULL,'C-',NULL,-27,3,3),(487,57,0,'E','Try harder.',NULL,'C-',NULL,-34,3,3),(488,57,0,'E','Try harder.',NULL,'A-',NULL,-45,3,3),(489,57,0,'E','Try harder.',NULL,'A-',NULL,-27,3,3),(490,57,7,'E','Try harder.',NULL,'C',NULL,-42,1,1),(503,57,2,'E','Try harder.',NULL,'D-',NULL,-22,1,1),(504,57,2,'E','Try harder.',NULL,'D-',NULL,-23,1,1),(564,57,0,'E','Try harder.',NULL,'A',NULL,-50,1,1),(565,57,0,'E','Try harder.',NULL,'B-',NULL,-30,1,1);
/*!40000 ALTER TABLE `student_term_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `student_term_subject_aggregates`
--

DROP TABLE IF EXISTS `student_term_subject_aggregates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `student_term_subject_aggregates` (
  `student_auto_id` int(11) NOT NULL,
  `subject_code` int(11) NOT NULL,
  `term_auto_id` int(11) NOT NULL,
  `average` float NOT NULL,
  `points` int(11) DEFAULT NULL,
  `grade` varchar(2) DEFAULT NULL,
  `comment` varchar(100) DEFAULT NULL,
  `stream_position` int(11) DEFAULT NULL,
  `class_position` int(11) DEFAULT NULL,
  `improvement` float DEFAULT NULL,
  PRIMARY KEY (`student_auto_id`,`subject_code`,`term_auto_id`),
  KEY `fk_student_subject_term_progress_subject1_idx` (`subject_code`),
  KEY `term_here_fkey_idx` (`term_auto_id`),
  CONSTRAINT `fk_student_subject_term_progress_subject1` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `student_f_key` FOREIGN KEY (`student_auto_id`) REFERENCES `students` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `term_here_fkey` FOREIGN KEY (`term_auto_id`) REFERENCES `term` (`auto_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `student_term_subject_aggregates`
--

LOCK TABLES `student_term_subject_aggregates` WRITE;
/*!40000 ALTER TABLE `student_term_subject_aggregates` DISABLE KEYS */;
INSERT INTO `student_term_subject_aggregates` VALUES (482,101,57,0,NULL,'E','Try harder.',3,3,NULL),(482,102,57,3,NULL,'E','Try harder.',NULL,NULL,NULL),(482,121,57,0,NULL,'E','Try harder.',NULL,NULL,NULL),(482,231,57,1,NULL,'E','Try harder.',NULL,NULL,NULL),(482,233,57,1,NULL,'E','Try harder.',NULL,NULL,NULL),(482,311,57,1,NULL,'E','Try harder.',NULL,NULL,NULL),(482,313,57,1,NULL,'E','Try harder.',NULL,NULL,NULL),(482,443,57,1,NULL,'E','Try harder.',NULL,NULL,NULL),(483,101,57,2,NULL,'E','Try harder.',2,2,NULL),(484,101,57,0,NULL,'E','Try harder.',3,3,NULL),(485,101,57,0,NULL,'E','Try harder.',3,3,NULL),(486,101,57,0,NULL,'E','Try harder.',3,3,NULL),(487,101,57,0,NULL,'E','Try harder.',3,3,NULL),(488,101,57,0,NULL,'E','Try harder.',3,3,NULL),(489,101,57,0,NULL,'E','Try harder.',3,3,NULL),(490,101,57,5,NULL,'E','Try harder.',1,1,NULL),(490,102,57,11,NULL,'E','Try harder.',NULL,NULL,NULL),(490,121,57,0,NULL,'E','Try harder.',NULL,NULL,NULL),(490,231,57,8,NULL,'E','Try harder.',NULL,NULL,NULL),(490,233,57,1,NULL,'E','Try harder.',NULL,NULL,NULL),(490,311,57,11,NULL,'E','Try harder.',NULL,NULL,NULL),(490,312,57,14,NULL,'E','Try harder.',NULL,NULL,NULL),(490,443,57,11,NULL,'E','Try harder.',NULL,NULL,NULL),(503,101,57,16,NULL,'E','Try harder.',1,1,NULL),(504,101,57,16,NULL,'E','Try harder.',1,1,NULL),(564,101,57,0,NULL,'E','Try harder.',1,1,NULL),(565,101,57,0,NULL,'E','Try harder.',1,1,NULL);
/*!40000 ALTER TABLE `student_term_subject_aggregates` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `students`
--

DROP TABLE IF EXISTS `students`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `students` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `admno` varchar(20) NOT NULL,
  `name` varchar(45) NOT NULL,
  `kcpe_mark` int(11) NOT NULL,
  `gender` varchar(10) NOT NULL,
  `image_filepath` varchar(100) DEFAULT NULL,
  `guardian_name` varchar(45) DEFAULT NULL,
  `guardian_phone_no` int(11) NOT NULL,
  `class_stream_auto_id` int(11) NOT NULL,
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `admno_UNIQUE` (`admno`),
  KEY `fk_students_class_stream1_idx` (`class_stream_auto_id`),
  CONSTRAINT `fk_students_class_stream1` FOREIGN KEY (`class_stream_auto_id`) REFERENCES `class_stream` (`auto_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=642 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `students`
--

LOCK TABLES `students` WRITE;
/*!40000 ALTER TABLE `students` DISABLE KEYS */;
INSERT INTO `students` VALUES (482,'101','EUNICE NYAGUTHII KIBIRU',80,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','STANLEY KIBIRU',729423392,22),(483,'102','ALEX GITHINJI KIMANI',214,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','DANIEL KIMANI',720462267,22),(484,'106','NEWTON NG\'ENYI WAITHAKA',89,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','STANLEY WAITHAKA',722630743,22),(485,'107','EDWARD NGAHU MUHORO',190,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PETER MUHORO',725731631,22),(486,'112','NAHASHION KINYUA MUTHONI',136,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JACINTA MUTHONI',717483770,22),(487,'114','SIMON GITHUKU TARIRA',168,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPH TARIRA',724771301,22),(488,'118','JANE  NJOKI NJORA',226,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GERALD NJORA',726214580,22),(489,'119','DENNIS MUTHANGA WANJA',136,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JANE WANJA',711132454,22),(490,'120','LILIAN WAMAITHA WANGUI',243,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PALINE WANGUI',718338975,22),(491,'122','REUBEN NJOGU MAINA',241,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','RICHARD MAINA',723864889,22),(492,'124','HANNAH WAIRIMU MWANGI',221,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JACKSON MWANGI',723806373,22),(493,'128','JANE WAITHIRA MWANGI',181,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','HARRY MUTHANGA',724771302,22),(494,'129','IBRAHIM GATUTHA KURIA',255,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','FRANCIS KURIA',7,21),(495,'130','ESTHER WANGARI WANJA',247,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JANE WANJA',711132454,21),(496,'131','MIRIAM WANJIKU KIORIA',196,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ELIUD KIORIA',706056362,21),(497,'135','ROBERT GAITHO WAGITHUNU',272,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','VERONICA NJOKI',727005209,21),(498,'136','CHARLES MAINA WAIRIMA',221,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','VERONICA WANJIRU',722562698,21),(499,'137','JOHN NGENYI NJUHA',244,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','CHARLES NJUHA',726095738,21),(500,'139','KENNETH KAGECHU MAINA',311,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PAUL MAINA',724839017,22),(501,'140','IRENE WANGECHI WAMBUI',290,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GRACE WAMBUI',7,22),(502,'141','GLADYS WAIRIMU MAINA',139,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ALEX MAINA WAINAINA ',704612450,22),(503,'142','TARCISIO GITAU',122,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JAMES MUTERO',725814584,23),(504,'144','SIMON GITHUKU WAHIGA',123,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MARY WAHIGA GITHUKU',714846968,23),(505,'145','JAMES MUKUHA WAIRIMU',152,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOYCE WAIRIMU',715412390,23),(506,'147','SAMUEL GITONGA MWANGI',219,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','STEPHEN MWANGI',720220330,23),(507,'148','JAMES THIONGO MUCHIRI',196,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOEL MUCHIRI',711527939,23),(508,'150','HARRISON MUCHIRI MUGEREKI',234,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','KANJIRU MUGEREKI',715285055,23),(509,'151','NANCY NJAMBI WAITHERA',250,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','RUTH WAITHERA',716079516,23),(510,'152','MAURINE GATHONI RITHO',204,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','DANIEL RITHO',728496930,23),(511,'153','ALEX KIBE KONDIA',154,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPH KONDIA',726337132,23),(512,'155','FLORAGRACE WANGUI MWANGI',209,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','NAHASHON MWANGI',712529865,23),(513,'156','JACINTA WAIRIMU MUNGAI',162,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ISAAC MUNGAI',714059304,23),(514,'157','JOSEPH CHEGE MWANGI',349,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','DANIEL MWANGI',716079516,23),(515,'158','STEPHEN NJOMO KARIUKI',278,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JAMES KARIUKI',711752622,23),(516,'159','MARY NYAMBURA MACHARIA',253,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','FRANCIS MACHARIA',722270443,23),(517,'160','TERESA NYAMBURA KAMOTHO',130,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','DANIEL KAMOTHO',704374143,23),(518,'161','ELLEN WANGUI KIGUNDA',155,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','LUKE KIGUNDA',729150874,23),(519,'162','VERONICA MUTHONI',146,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ANN NJOKI',720767832,23),(520,'163','DAVID KARIUKI NGARI',161,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','BERNARD NGARI KARIUKI',713814747,22),(521,'164','MIRIAM GATHONI MAINA',251,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PETER MAINA',702612620,23),(522,'166','CATHERINE WAMBUI WAWERU',223,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MONICA WANGUI',724698144,23),(523,'167','AICE WAKURU WAMBUGU',262,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','SAMUE WAMBUGU',715031019,23),(524,'168','REUBEN WAWERU',196,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOHN KIMOTHO',711307261,23),(525,'169','ZACHARY MUNA RUGA',184,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PAUL RUGA',718827900,23),(526,'171','LOISE MUTHONI GACHII',223,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','SABASTIANO GACIE',723178522,21),(527,'172','JOSPHAT KING\'ORI WAITHAKA',336,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOHNWAITHAKA',700514073,21),(528,'175','TERESA MWIHAKI KIRINGA',262,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GODFREY KIRINGA',719222707,21),(529,'176','FELISHINA WANJIKU',280,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GEORGE KANYAGO',703220860,23),(530,'177','AGATHA NJERI',154,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GODFREY ICHANJIRU',736024299,23),(531,'178','ALEX MAINA WACHUMA',357,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MONICA WACHUMA',712171245,21),(532,'179','JOSEPH KIBUNJA NGERA',273,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JULIUS NGERA KIMENJU',727022092,21),(533,'180','PAUL MUBEU MAHIANYU',218,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','HESBORA MAHIANYU',713993470,21),(534,'181','LYDIAH NJERI WARUIRU',1,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','LAWRENCE WARUIRU',7,21),(535,'184','JOSEPH KARURU GATHU',205,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOHN GATHUU',724113660,22),(536,'185','JANE MUTHONI GATHURA',226,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPH GATHURA',71600044,23),(537,'186','JEREMIAH GIKONYO MWANGI',225,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PETER MWANGI',714440264,22),(538,'187','MERCY  RUTH WANGARI',162,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','FLORENCE WARUGURU',715201637,22),(539,'188','KAMOTHO MARY WANJITU',202,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JACKSON KAMOTHO',726463923,23),(540,'190','JECINTA MUTHONI WAWERU',228,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPH WAWERU',717442155,22),(541,'191','JAMES GACHAGUA NJERI',328,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ANN NJERI WARUIRU',720925959,21),(542,'192','MERCY WAITHERERO GICHIA',265,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GEOFFREY GACHIE',71347168,22),(543,'193','JOSEPH KIBUNJA MAINA',0,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MAINA KIBUNJA',7,22),(544,'194','RICHARD KARIUKI KAMAU',149,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ISAAC KAMAU',724646218,22),(545,'195','TIMOTY NGUCHIE MUNANDA',339,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','SIMON MUNANDA',710522901,22),(546,'196','SOLOMON NGATIA MAINA',325,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PAUL MAINA',726461782,21),(547,'197','MICHAEL MURIITHI WACHIRA',272,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','LAWRENCE WACHIRA',700633321,23),(548,'198','STEPHEN MATHENGE NDIRANGU',296,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PETER NDIRANGU',726056209,23),(549,'199','LUCY WANJIRU WANGECHI',215,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PAULINE WANGECHI',712698338,23),(550,'200','JOHN KIRUI CHELULE',251,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPK KIPKIRUI',700055115,23),(551,'201','AGNES WANJIKU NYAWIRA',214,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ANN NYAWIRA',726955104,23),(552,'202','MOSES  KIMOTHO GITHAIGA',162,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','CHARLES GITHAIGA',708781052,23),(553,'203','JOSEPH MURAYA GICHORA',214,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MAIKO GICHORA',729040336,24),(554,'204','JOSEPH   CHEGE GACHOKA',305,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PETER GACHOKA MWANGI',716502248,22),(555,'206','EBRAHIM GITAHI GACHIE',293,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPH GACHIE',727646229,22),(556,'207','CHARLES MIRICHO GACHIE',278,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPH GACHIE',723709456,23),(557,'208',' SUSAN WAIRIMU GIKINYO',318,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOHN WAITHERA WAITHAKA',716547679,21),(558,'209','LYDIAH NJOKI WACHIRA',180,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskApp-login-manager-icon.jpeg','STANLEY WACHIRA',715561150,24),(559,'210','BENSON RWARA NGATIA',132,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskApp-login-manager-icon.jpeg','CHARLES NGATIA',705265540,24),(560,'211','JOHN KARIUKI MWANGI',187,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskHellen.jpeg','GODFREY MWANGI',705561157,24),(561,'212','JORAM KAGERI WANJAU',206,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskApp-login-manager-icon.jpeg','GODFREY WANJAU',702225929,24),(562,'213','ANN WANGUI WAIRIMU',251,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','EUGENIA WAIRIMU',700113316,24),(563,'214','MARY WANGARI WAIRIMU',301,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','EUGINIA WAIRIMU',700113316,24),(564,'215','STELLA WANGARI GITHAIGA',248,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PETER GITHAIGA',725919454,24),(565,'216','BERNARD THUKU NJOGU',152,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ELIAH NJOGU',726400629,24),(566,'217','MAXWEL GICHUKI THAIGWWE ',191,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PAUL THAIGWA',726400629,24),(567,'218','MERCY  NJAMBI MWANGI',129,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','WILSON MWANGI',715462416,24),(568,'219','MARY WANJIKU MUTARA',195,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MOSES MUTARA',719687602,24),(569,'220','MILKA WANJIRU NJOGO',243,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ISAAC NJOGO',719687602,24),(570,'221','MERCY WACUKA WANJIKU',164,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MARY WANJIKU',717201066,24),(571,'222','HIRAM KIBAKI MUTURI',192,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOHN MUTURI',710529073,24),(572,'223','LAZARO KAMAU MAINA',188,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ROBERT MAINA',728562548,24),(573,'224','DERRICK KIHARA WAIRAGU',251,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ROBERT WAIRAGU',721470707,24),(574,'225','PAUL MWANGI GACHIE',194,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','STANLEY GACHIE',721470707,24),(575,'226','ROSE WANJIKU MUTURI',215,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PETER MUTURI',726343984,24),(576,'227','JACK MUTERO KIRUGO',163,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JAMES KIRUGO',726343984,24),(577,'228','JAMES MUTHEE KAROKI',166,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ANGELO KAROKI',701360687,24),(578,'229','CAROLINE NDUTA MWANIKI',179,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPH MWANIKI',727558179,24),(579,'230','ELIJAH GACHANJA GATHERU',191,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','CHARLES GATHERU',710717547,24),(580,'231','JERVASIO MUCHIRI WAMBUI',165,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GLADYS WAMBUI',729097573,24),(581,'232','MICHAEL MAINA KARIMI',157,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PETER KARIMI',702988262,24),(582,'233','SIMON MWANGI RUGA',180,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PAUL RUGA NJIMA',718827900,24),(583,'234','HARRISON MWANGI NYAMBURA',180,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MARY NYAMBURA',726073355,24),(584,'235','JOYCE MWIHAKI MAINA',175,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','HARRISON MAINA',712507524,24),(585,'236','PETER NDEGWA KUIYARA',181,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','DAVID KUIYARA',723372580,24),(586,'237','PETER NJIMA KIMATHI',130,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','HARRISON KIMATHI',719428539,24),(587,'238','DENVAS KAIRU NJOGO',130,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ERNEST NJOGO',718937672,24),(588,'239','STEPHEN MAINA WARINGA',208,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','WARINGA',701331867,24),(589,'240','GLADYS WANJIKU KIMANI',167,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','CHARLES KIMANI',724334836,24),(590,'241','ALICE NJAMBI WAWERU',183,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPH WAWERU',719716126,24),(591,'242','ALICE WAMBUI MIGWI',194,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JAMES MIGWI',724109304,24),(592,'243','FIDELIUS WANJIRU MAINA',197,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','SAMUEL MAINA',723662962,24),(593,'244','NANCY WAIRIMU NGERA',262,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GERALD NGERA',721310021,24),(594,'245','NAFTALI WAGATHU',274,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PETER NJUGUNA',727399954,24),(595,'246',' MUREITHI MUREITHI KIIGE ',318,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ARTHER KIIGE',734495093,21),(596,'247','NANCY WANJERU MBARIRE',181,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MOSES MBARIRE',727710855,24),(597,'248','LUCY WAMBUI GACHOKA',211,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','DANIEL GACHOKA',727201725,24),(598,'249','PAUL MACHARIA MAINA',168,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOHN MAINA',707124157,24),(599,'25','MARY NYAWIRA WAITHERA',1,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','RUTH WAITHERA',722544394,21),(600,'250','VERONICA WANJIKU',129,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','DAVID MUCHAI',712275401,24),(601,'251','CECILIA MUMBI',261,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','RUTH MAINA',715258828,24),(602,'252','CAROLINE WANJIRU KANYUNGU',224,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GEORGE KANYUNGU',713149151,24),(603,'253','ESTHER WANGARI KIMANI',168,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','WILSON KIMANI',705392684,24),(604,'254','MOSES MATHENGE GACHOKA',286,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GERALD GACHOKA',720745873,24),(605,'255','PIUS KANUNU KIHATO',135,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','SOLOMMON KIHATO',722570891,24),(606,'256','HENRY WAHUGU WAIRIA',204,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOHN WAIRIA',704057483,24),(607,'257','JAPHIS KINYARI WAHOME',145,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPH WAHOME',722381765,24),(608,'258','MARY NJERI MUTHONI ',179,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','CAROL MUTHONI',722608356,22),(609,'260','JOHN MUITA',294,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JAMES GICHOHI',720858528,22),(610,'261','MARY WAMBUI MUNENE',230,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JAMES GACHOHI',727209988,24),(611,'262','IRENE MUTHONI WAHOME',190,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MOSES WAHOME',728022032,24),(612,'263','PETER MWANGI MAINA',174,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPH MAINA',728695435,24),(613,'264','SUSAN NJERI MWANGI',198,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MOSES MWANGI',720837876,24),(614,'265','MARY NYAWIRA NJERI',199,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','NAOMI NJERI',701218418,24),(615,'266','JANE MUMBI WANGUI',200,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','PAULINE WANGUI',718428539,24),(616,'267','NEHEMIAH MWANGI',329,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','TABITHA WANGUI',712171275,22),(617,'268','DAVID WAMAI NJERI',272,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOYCE NJERI',726722745,21),(618,'269','LAWRENCE GItHINJI WARIMA',333,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','LABA WAIRIMA',7,21),(619,'270','GEORGE KIHORO NJERI',339,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','AGNES NJERI',708725036,22),(620,'271','REBECCA WANGUI WACHIRA',202,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOHN WACHIRA THIONGO',711527939,24),(621,'272','NEWTON NDEGWA',213,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ROSE WAMBUI GITHUI',7,23),(622,'273','JANE MUTHONI MAKENA',143,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','IRENE WANJIRU',722499170,24),(623,'274','MOSES MWANGI NYAMU',325,'MALE','C:\\Users\\Canjetan\\Documents\\Analyzer\\Images\\user.png','PETER NYAMU',720245676,23),(624,'275','MATHEW NDENE MWANGI',305,'MALE','C:\\Users\\Canjetan\\Documents\\Analyzer\\Images\\user.png','JOEL MWANGI',715561121,22),(625,'33','PATRIC NGAHU WANGUI',1,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','FELISHINA WANGUI',7,21),(626,'455','john kamau',350,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ngahu',1111111111,21),(627,'61','DANIEL TOM WAGATHUO',1,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MUCHIRI WAGATHUO',702686568,21),(628,'66','KELVIN MAINA WANJIKU',223,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JULIAH WANGUI',7,21),(629,'67','JOSEPH MBOGO MAINA ',152,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','DANIEL MAINA',727123077,21),(630,'69','CECILIA WANJIRA KANYIRI',149,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','KANYIRI',721315119,21),(631,'71','LYDIAH MIRIGO MAINA',142,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','HARRISON MAINA',712507524,22),(632,'73','PAUL KIIRU MACHARIA',288,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','BONFACE MACHARIA',705306266,21),(633,'77','KELVIN NYURURU WAITHAKA',152,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','LAWRENCE WAITHAKA',7,21),(634,'80','JULIUS THUITA MAINA',234,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','MARY NJOKI MAINA',701686145,21),(635,'81','ROSELINE WANJIRU GATHONI',231,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','AGNES GATHONI',724713275,21),(636,'87','BEATRICE WANJIRU MAINA',234,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','JOSEPH MAINA',727243551,24),(637,'89','JACKSON WAITHAKA WACHIRA',249,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GERALD WACHIRA',713862410,21),(638,'91','ISAAC WAITHAKA KAHIHU',225,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','GERALD KAHIHU',722933442,21),(639,'96','GRACE NYAMBURA KAGO',159,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','SIMON KAGO',720374886,23),(640,'99','ONESMUS MUYA NJERI',269,'FEMALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','DAVID KIRAGU',714968362,21),(641,'205','SAMUEL WANdfdf',314,'MALE','C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg','ELIUD KIORIA',70605,25);
/*!40000 ALTER TABLE `students` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `subject`
--

DROP TABLE IF EXISTS `subject`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `subject` (
  `code` int(11) NOT NULL DEFAULT '0',
  `name` varchar(30) NOT NULL,
  `abbreviation` varchar(10) NOT NULL,
  `group` int(11) NOT NULL,
  `is_done_by_school` tinyint(4) NOT NULL DEFAULT '0',
  `is_junior_compulsory` tinyint(4) NOT NULL DEFAULT '0',
  `is_senior_compulsory` tinyint(4) NOT NULL DEFAULT '0',
  PRIMARY KEY (`code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `subject`
--

LOCK TABLES `subject` WRITE;
/*!40000 ALTER TABLE `subject` DISABLE KEYS */;
INSERT INTO `subject` VALUES (101,'ENGLISH','ENG',1,1,1,1),(102,'KISWAHILI','KISW',1,1,1,1),(121,'MATHEMATICS ALT A','MATH A',1,1,1,1),(122,'MATHEMATICS ALT B','MATH B',1,0,1,1),(231,'BIOLOGY','BIO',2,1,1,1),(232,'PHYSICS','PHY',2,1,1,1),(233,'CHEMISTRY','CHEM',2,1,1,1),(237,'GENERAL SCIENCE','G.SCIENCE',2,0,1,1),(311,'HISTORY AND GOVERNMENT','HISTO',3,1,1,1),(312,'GEOGRAPHY','GEO',3,1,1,1),(313,'CRE','CRE',3,1,1,1),(314,'IRE','IRE',3,1,0,0),(315,'HRE','HRE',3,1,0,1),(441,'HOMESCIENCE','H/SCI',4,0,0,0),(442,'ART AND DESIGN','ART',4,0,0,0),(443,'AGRICULTURE','AGRI',4,1,0,1),(444,'WOODWORK','WOOD',4,0,1,1),(445,'METALWORK','METAL',4,0,0,0),(446,'BUILDING CONSTRUCTION','BUILDING',4,0,0,0),(447,'POWER MECHANICS','POWER',4,0,0,0),(448,'ELECTRICITY','ELEC ',4,0,0,0),(449,'DRAWING AND DESIGN','DRAWING',4,0,0,0),(450,'AVIATION TECHNOLOGY','AVIAT',4,0,0,0),(451,'COMPUTER STUDIES','COMP',4,0,0,0),(501,'FRENCH','FRE',5,0,0,0),(502,'GERMAN','GER',5,1,0,0),(503,'ARABIC','ARA',5,1,0,0),(504,'KENYAN SIGN LANGUAGE','KSIGN',5,1,0,0),(511,'MUSIC ','MUS',5,1,0,0),(565,'BUSINESS STUDIES','BS',5,1,1,0);
/*!40000 ALTER TABLE `subject` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `subject_grade`
--

DROP TABLE IF EXISTS `subject_grade`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `subject_grade` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `subject_code` int(11) NOT NULL,
  `grade_points` int(11) NOT NULL,
  `form` int(11) NOT NULL,
  `lower_bound` int(11) NOT NULL,
  `comment` text,
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `grades_subject` (`subject_code`,`grade_points`,`form`),
  KEY `subject_subject_grades_idx` (`subject_code`),
  KEY `fk_subjectgrades_grades1` (`grade_points`),
  CONSTRAINT `grade_points_foreig` FOREIGN KEY (`grade_points`) REFERENCES `grade` (`points`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `subject_subject_grades` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=1917 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `subject_grade`
--

LOCK TABLES `subject_grade` WRITE;
/*!40000 ALTER TABLE `subject_grade` DISABLE KEYS */;
INSERT INTO `subject_grade` VALUES (477,101,12,1,80,'Excellent'),(478,101,11,1,75,'Very Good'),(479,101,10,1,70,'Good'),(480,101,9,1,65,'Fair'),(481,101,8,1,60,'Nice work'),(482,101,7,1,55,'Above average'),(483,101,6,1,50,'Average'),(484,101,5,1,45,'Below average'),(485,101,4,1,40,'Can do better'),(486,101,3,1,35,'Pull up your socks'),(487,101,2,1,30,'Put more effort.'),(488,101,1,1,0,'Try harder.'),(489,102,12,1,80,'Excellent'),(490,102,11,1,75,'Very Good'),(491,102,10,1,70,'Good'),(492,102,9,1,65,'Fair'),(493,102,8,1,60,'Nice work'),(494,102,7,1,55,'Above average'),(495,102,6,1,50,'Average'),(496,102,5,1,45,'Below average'),(497,102,4,1,40,'Can do better'),(498,102,3,1,35,'Pull up your socks'),(499,102,2,1,30,'Put more effort.'),(500,102,1,1,0,'Try harder.'),(501,121,12,1,80,'Excellent'),(502,121,11,1,75,'Very Good'),(503,121,10,1,70,'Good'),(504,121,9,1,65,'Fair'),(505,121,8,1,60,'Nice work'),(506,121,7,1,55,'Above average'),(507,121,6,1,50,'Average'),(508,121,5,1,45,'Below average'),(509,121,4,1,40,'Can do better'),(510,121,3,1,35,'Pull up your socks'),(511,121,2,1,30,'Put more effort.'),(512,121,1,1,0,'Try harder.'),(513,122,12,1,80,'Excellent'),(514,122,11,1,75,'Very Good'),(515,122,10,1,70,'Good'),(516,122,9,1,65,'Fair'),(517,122,8,1,60,'Nice work'),(518,122,7,1,55,'Above average'),(519,122,6,1,50,'Average'),(520,122,5,1,45,'Below average'),(521,122,4,1,40,'Can do better'),(522,122,3,1,35,'Pull up your socks'),(523,122,2,1,30,'Put more effort.'),(524,122,1,1,0,'Try harder.'),(525,231,12,1,80,'Excellent'),(526,231,11,1,75,'Very Good'),(527,231,10,1,70,'Good'),(528,231,9,1,65,'Fair'),(529,231,8,1,60,'Nice work'),(530,231,7,1,55,'Above average'),(531,231,6,1,50,'Average'),(532,231,5,1,45,'Below average'),(533,231,4,1,40,'Can do better'),(534,231,3,1,35,'Pull up your socks'),(535,231,2,1,30,'Put more effort.'),(536,231,1,1,0,'Try harder.'),(537,232,12,1,80,'Excellent'),(538,232,11,1,75,'Very Good'),(539,232,10,1,70,'Good'),(540,232,9,1,65,'Fair'),(541,232,8,1,60,'Nice work'),(542,232,7,1,55,'Above average'),(543,232,6,1,50,'Average'),(544,232,5,1,45,'Below average'),(545,232,4,1,40,'Can do better'),(546,232,3,1,35,'Pull up your socks'),(547,232,2,1,30,'Put more effort.'),(548,232,1,1,0,'Try harder.'),(549,233,12,1,80,'Excellent'),(550,233,11,1,75,'Very Good'),(551,233,10,1,70,'Good'),(552,233,9,1,65,'Fair'),(553,233,8,1,60,'Nice work'),(554,233,7,1,55,'Above average'),(555,233,6,1,50,'Average'),(556,233,5,1,45,'Below average'),(557,233,4,1,40,'Can do better'),(558,233,3,1,35,'Pull up your socks'),(559,233,2,1,30,'Put more effort.'),(560,233,1,1,0,'Try harder.'),(561,237,12,1,80,'Excellent'),(562,237,11,1,75,'Very Good'),(563,237,10,1,70,'Good'),(564,237,9,1,65,'Fair'),(565,237,8,1,60,'Nice work'),(566,237,7,1,55,'Above average'),(567,237,6,1,50,'Average'),(568,237,5,1,45,'Below average'),(569,237,4,1,40,'Can do better'),(570,237,3,1,35,'Pull up your socks'),(571,237,2,1,30,'Put more effort.'),(572,237,1,1,0,'Try harder.'),(573,311,12,1,80,'Excellent'),(574,311,11,1,75,'Very Good'),(575,311,10,1,70,'Good'),(576,311,9,1,65,'Fair'),(577,311,8,1,60,'Nice work'),(578,311,7,1,55,'Above average'),(579,311,6,1,50,'Average'),(580,311,5,1,45,'Below average'),(581,311,4,1,40,'Can do better'),(582,311,3,1,35,'Pull up your socks'),(583,311,2,1,30,'Put more effort.'),(584,311,1,1,0,'Try harder.'),(585,312,12,1,80,'Excellent'),(586,312,11,1,75,'Very Good'),(587,312,10,1,70,'Good'),(588,312,9,1,65,'Fair'),(589,312,8,1,60,'Nice work'),(590,312,7,1,55,'Above average'),(591,312,6,1,50,'Average'),(592,312,5,1,45,'Below average'),(593,312,4,1,40,'Can do better'),(594,312,3,1,35,'Pull up your socks'),(595,312,2,1,30,'Put more effort.'),(596,312,1,1,0,'Try harder.'),(597,313,12,1,80,'Excellent'),(598,313,11,1,75,'Very Good'),(599,313,10,1,70,'Good'),(600,313,9,1,65,'Fair'),(601,313,8,1,60,'Nice work'),(602,313,7,1,55,'Above average'),(603,313,6,1,50,'Average'),(604,313,5,1,45,'Below average'),(605,313,4,1,40,'Can do better'),(606,313,3,1,35,'Pull up your socks'),(607,313,2,1,30,'Put more effort.'),(608,313,1,1,0,'Try harder.'),(609,314,12,1,80,'Excellent'),(610,314,11,1,75,'Very Good'),(611,314,10,1,70,'Good'),(612,314,9,1,65,'Fair'),(613,314,8,1,60,'Nice work'),(614,314,7,1,55,'Above average'),(615,314,6,1,50,'Average'),(616,314,5,1,45,'Below average'),(617,314,4,1,40,'Can do better'),(618,314,3,1,35,'Pull up your socks'),(619,314,2,1,30,'Put more effort.'),(620,314,1,1,0,'Try harder.'),(621,315,12,1,80,'Excellent'),(622,315,11,1,75,'Very Good'),(623,315,10,1,70,'Good'),(624,315,9,1,65,'Fair'),(625,315,8,1,60,'Nice work'),(626,315,7,1,55,'Above average'),(627,315,6,1,50,'Average'),(628,315,5,1,45,'Below average'),(629,315,4,1,40,'Can do better'),(630,315,3,1,35,'Pull up your socks'),(631,315,2,1,30,'Put more effort.'),(632,315,1,1,0,'Try harder.'),(633,441,12,1,80,'Excellent'),(634,441,11,1,75,'Very Good'),(635,441,10,1,70,'Good'),(636,441,9,1,65,'Fair'),(637,441,8,1,60,'Nice work'),(638,441,7,1,55,'Above average'),(639,441,6,1,50,'Average'),(640,441,5,1,45,'Below average'),(641,441,4,1,40,'Can do better'),(642,441,3,1,35,'Pull up your socks'),(643,441,2,1,30,'Put more effort.'),(644,441,1,1,0,'Try harder.'),(645,442,12,1,80,'Excellent'),(646,442,11,1,75,'Very Good'),(647,442,10,1,70,'Good'),(648,442,9,1,65,'Fair'),(649,442,8,1,60,'Nice work'),(650,442,7,1,55,'Above average'),(651,442,6,1,50,'Average'),(652,442,5,1,45,'Below average'),(653,442,4,1,40,'Can do better'),(654,442,3,1,35,'Pull up your socks'),(655,442,2,1,30,'Put more effort.'),(656,442,1,1,0,'Try harder.'),(657,443,12,1,80,'Excellent'),(658,443,11,1,75,'Very Good'),(659,443,10,1,70,'Good'),(660,443,9,1,65,'Fair'),(661,443,8,1,60,'Nice work'),(662,443,7,1,55,'Above average'),(663,443,6,1,50,'Average'),(664,443,5,1,45,'Below average'),(665,443,4,1,40,'Can do better'),(666,443,3,1,35,'Pull up your socks'),(667,443,2,1,30,'Put more effort.'),(668,443,1,1,0,'Try harder.'),(669,444,12,1,80,'Excellent'),(670,444,11,1,75,'Very Good'),(671,444,10,1,70,'Good'),(672,444,9,1,65,'Fair'),(673,444,8,1,60,'Nice work'),(674,444,7,1,55,'Above average'),(675,444,6,1,50,'Average'),(676,444,5,1,45,'Below average'),(677,444,4,1,40,'Can do better'),(678,444,3,1,35,'Pull up your socks'),(679,444,2,1,30,'Put more effort.'),(680,444,1,1,0,'Try harder.'),(681,445,12,1,80,'Excellent'),(682,445,11,1,75,'Very Good'),(683,445,10,1,70,'Good'),(684,445,9,1,65,'Fair'),(685,445,8,1,60,'Nice work'),(686,445,7,1,55,'Above average'),(687,445,6,1,50,'Average'),(688,445,5,1,45,'Below average'),(689,445,4,1,40,'Can do better'),(690,445,3,1,35,'Pull up your socks'),(691,445,2,1,30,'Put more effort.'),(692,445,1,1,0,'Try harder.'),(693,446,12,1,80,'Excellent'),(694,446,11,1,75,'Very Good'),(695,446,10,1,70,'Good'),(696,446,9,1,65,'Fair'),(697,446,8,1,60,'Nice work'),(698,446,7,1,55,'Above average'),(699,446,6,1,50,'Average'),(700,446,5,1,45,'Below average'),(701,446,4,1,40,'Can do better'),(702,446,3,1,35,'Pull up your socks'),(703,446,2,1,30,'Put more effort.'),(704,446,1,1,0,'Try harder.'),(705,447,12,1,80,'Excellent'),(706,447,11,1,75,'Very Good'),(707,447,10,1,70,'Good'),(708,447,9,1,65,'Fair'),(709,447,8,1,60,'Nice work'),(710,447,7,1,55,'Above average'),(711,447,6,1,50,'Average'),(712,447,5,1,45,'Below average'),(713,447,4,1,40,'Can do better'),(714,447,3,1,35,'Pull up your socks'),(715,447,2,1,30,'Put more effort.'),(716,447,1,1,0,'Try harder.'),(717,448,12,1,80,'Excellent'),(718,448,11,1,75,'Very Good'),(719,448,10,1,70,'Good'),(720,448,9,1,65,'Fair'),(721,448,8,1,60,'Nice work'),(722,448,7,1,55,'Above average'),(723,448,6,1,50,'Average'),(724,448,5,1,45,'Below average'),(725,448,4,1,40,'Can do better'),(726,448,3,1,35,'Pull up your socks'),(727,448,2,1,30,'Put more effort.'),(728,448,1,1,0,'Try harder.'),(729,449,12,1,80,'Excellent'),(730,449,11,1,75,'Very Good'),(731,449,10,1,70,'Good'),(732,449,9,1,65,'Fair'),(733,449,8,1,60,'Nice work'),(734,449,7,1,55,'Above average'),(735,449,6,1,50,'Average'),(736,449,5,1,45,'Below average'),(737,449,4,1,40,'Can do better'),(738,449,3,1,35,'Pull up your socks'),(739,449,2,1,30,'Put more effort.'),(740,449,1,1,0,'Try harder.'),(741,450,12,1,80,'Excellent'),(742,450,11,1,75,'Very Good'),(743,450,10,1,70,'Good'),(744,450,9,1,65,'Fair'),(745,450,8,1,60,'Nice work'),(746,450,7,1,55,'Above average'),(747,450,6,1,50,'Average'),(748,450,5,1,45,'Below average'),(749,450,4,1,40,'Can do better'),(750,450,3,1,35,'Pull up your socks'),(751,450,2,1,30,'Put more effort.'),(752,450,1,1,0,'Try harder.'),(753,451,12,1,80,'Excellent'),(754,451,11,1,75,'Very Good'),(755,451,10,1,70,'Good'),(756,451,9,1,65,'Fair'),(757,451,8,1,60,'Nice work'),(758,451,7,1,55,'Above average'),(759,451,6,1,50,'Average'),(760,451,5,1,45,'Below average'),(761,451,4,1,40,'Can do better'),(762,451,3,1,35,'Pull up your socks'),(763,451,2,1,30,'Put more effort.'),(764,451,1,1,0,'Try harder.'),(765,501,12,1,80,'Excellent'),(766,501,11,1,75,'Very Good'),(767,501,10,1,70,'Good'),(768,501,9,1,65,'Fair'),(769,501,8,1,60,'Nice work'),(770,501,7,1,55,'Above average'),(771,501,6,1,50,'Average'),(772,501,5,1,45,'Below average'),(773,501,4,1,40,'Can do better'),(774,501,3,1,35,'Pull up your socks'),(775,501,2,1,30,'Put more effort.'),(776,501,1,1,0,'Try harder.'),(777,502,12,1,80,'Excellent'),(778,502,11,1,75,'Very Good'),(779,502,10,1,70,'Good'),(780,502,9,1,65,'Fair'),(781,502,8,1,60,'Nice work'),(782,502,7,1,55,'Above average'),(783,502,6,1,50,'Average'),(784,502,5,1,45,'Below average'),(785,502,4,1,40,'Can do better'),(786,502,3,1,35,'Pull up your socks'),(787,502,2,1,30,'Put more effort.'),(788,502,1,1,0,'Try harder.'),(789,503,12,1,80,'Excellent'),(790,503,11,1,75,'Very Good'),(791,503,10,1,70,'Good'),(792,503,9,1,65,'Fair'),(793,503,8,1,60,'Nice work'),(794,503,7,1,55,'Above average'),(795,503,6,1,50,'Average'),(796,503,5,1,45,'Below average'),(797,503,4,1,40,'Can do better'),(798,503,3,1,35,'Pull up your socks'),(799,503,2,1,30,'Put more effort.'),(800,503,1,1,0,'Try harder.'),(801,504,12,1,80,'Excellent'),(802,504,11,1,75,'Very Good'),(803,504,10,1,70,'Good'),(804,504,9,1,65,'Fair'),(805,504,8,1,60,'Nice work'),(806,504,7,1,55,'Above average'),(807,504,6,1,50,'Average'),(808,504,5,1,45,'Below average'),(809,504,4,1,40,'Can do better'),(810,504,3,1,35,'Pull up your socks'),(811,504,2,1,30,'Put more effort.'),(812,504,1,1,0,'Try harder.'),(813,511,12,1,80,'Excellent'),(814,511,11,1,75,'Very Good'),(815,511,10,1,70,'Good'),(816,511,9,1,65,'Fair'),(817,511,8,1,60,'Nice work'),(818,511,7,1,55,'Above average'),(819,511,6,1,50,'Average'),(820,511,5,1,45,'Below average'),(821,511,4,1,40,'Can do better'),(822,511,3,1,35,'Pull up your socks'),(823,511,2,1,30,'Put more effort.'),(824,511,1,1,0,'Try harder.'),(825,565,12,1,80,'Excellent'),(826,565,11,1,75,'Very Good'),(827,565,10,1,70,'Good'),(828,565,9,1,65,'Fair'),(829,565,8,1,60,'Nice work'),(830,565,7,1,55,'Above average'),(831,565,6,1,50,'Average'),(832,565,5,1,45,'Below average'),(833,565,4,1,40,'Can do better'),(834,565,3,1,35,'Pull up your socks'),(835,565,2,1,30,'Put more effort.'),(836,565,1,1,0,'Try harder.'),(837,101,12,2,80,'Excellent'),(838,101,11,2,75,'Very Good'),(839,101,10,2,70,'Good'),(840,101,9,2,65,'Fair'),(841,101,8,2,60,'Nice work'),(842,101,7,2,55,'Above average'),(843,101,6,2,50,'Average'),(844,101,5,2,45,'Below average'),(845,101,4,2,40,'Can do better'),(846,101,3,2,35,'Pull up your socks'),(847,101,2,2,30,'Put more effort.'),(848,101,1,2,0,'Try harder.'),(849,102,12,2,80,'Excellent'),(850,102,11,2,75,'Very Good'),(851,102,10,2,70,'Good'),(852,102,9,2,65,'Fair'),(853,102,8,2,60,'Nice work'),(854,102,7,2,55,'Above average'),(855,102,6,2,50,'Average'),(856,102,5,2,45,'Below average'),(857,102,4,2,40,'Can do better'),(858,102,3,2,35,'Pull up your socks'),(859,102,2,2,30,'Put more effort.'),(860,102,1,2,0,'Try harder.'),(861,121,12,2,80,'Excellent'),(862,121,11,2,75,'Very Good'),(863,121,10,2,70,'Good'),(864,121,9,2,65,'Fair'),(865,121,8,2,60,'Nice work'),(866,121,7,2,55,'Above average'),(867,121,6,2,50,'Average'),(868,121,5,2,45,'Below average'),(869,121,4,2,40,'Can do better'),(870,121,3,2,35,'Pull up your socks'),(871,121,2,2,30,'Put more effort.'),(872,121,1,2,0,'Try harder.'),(873,122,12,2,80,'Excellent'),(874,122,11,2,75,'Very Good'),(875,122,10,2,70,'Good'),(876,122,9,2,65,'Fair'),(877,122,8,2,60,'Nice work'),(878,122,7,2,55,'Above average'),(879,122,6,2,50,'Average'),(880,122,5,2,45,'Below average'),(881,122,4,2,40,'Can do better'),(882,122,3,2,35,'Pull up your socks'),(883,122,2,2,30,'Put more effort.'),(884,122,1,2,0,'Try harder.'),(885,231,12,2,80,'Excellent'),(886,231,11,2,75,'Very Good'),(887,231,10,2,70,'Good'),(888,231,9,2,65,'Fair'),(889,231,8,2,60,'Nice work'),(890,231,7,2,55,'Above average'),(891,231,6,2,50,'Average'),(892,231,5,2,45,'Below average'),(893,231,4,2,40,'Can do better'),(894,231,3,2,35,'Pull up your socks'),(895,231,2,2,30,'Put more effort.'),(896,231,1,2,0,'Try harder.'),(897,232,12,2,80,'Excellent'),(898,232,11,2,75,'Very Good'),(899,232,10,2,70,'Good'),(900,232,9,2,65,'Fair'),(901,232,8,2,60,'Nice work'),(902,232,7,2,55,'Above average'),(903,232,6,2,50,'Average'),(904,232,5,2,45,'Below average'),(905,232,4,2,40,'Can do better'),(906,232,3,2,35,'Pull up your socks'),(907,232,2,2,30,'Put more effort.'),(908,232,1,2,0,'Try harder.'),(909,233,12,2,80,'Excellent'),(910,233,11,2,75,'Very Good'),(911,233,10,2,70,'Good'),(912,233,9,2,65,'Fair'),(913,233,8,2,60,'Nice work'),(914,233,7,2,55,'Above average'),(915,233,6,2,50,'Average'),(916,233,5,2,45,'Below average'),(917,233,4,2,40,'Can do better'),(918,233,3,2,35,'Pull up your socks'),(919,233,2,2,30,'Put more effort.'),(920,233,1,2,0,'Try harder.'),(921,237,12,2,80,'Excellent'),(922,237,11,2,75,'Very Good'),(923,237,10,2,70,'Good'),(924,237,9,2,65,'Fair'),(925,237,8,2,60,'Nice work'),(926,237,7,2,55,'Above average'),(927,237,6,2,50,'Average'),(928,237,5,2,45,'Below average'),(929,237,4,2,40,'Can do better'),(930,237,3,2,35,'Pull up your socks'),(931,237,2,2,30,'Put more effort.'),(932,237,1,2,0,'Try harder.'),(933,311,12,2,80,'Excellent'),(934,311,11,2,75,'Very Good'),(935,311,10,2,70,'Good'),(936,311,9,2,65,'Fair'),(937,311,8,2,60,'Nice work'),(938,311,7,2,55,'Above average'),(939,311,6,2,50,'Average'),(940,311,5,2,45,'Below average'),(941,311,4,2,40,'Can do better'),(942,311,3,2,35,'Pull up your socks'),(943,311,2,2,30,'Put more effort.'),(944,311,1,2,0,'Try harder.'),(945,312,12,2,80,'Excellent'),(946,312,11,2,75,'Very Good'),(947,312,10,2,70,'Good'),(948,312,9,2,65,'Fair'),(949,312,8,2,60,'Nice work'),(950,312,7,2,55,'Above average'),(951,312,6,2,50,'Average'),(952,312,5,2,45,'Below average'),(953,312,4,2,40,'Can do better'),(954,312,3,2,35,'Pull up your socks'),(955,312,2,2,30,'Put more effort.'),(956,312,1,2,0,'Try harder.'),(957,313,12,2,80,'Excellent'),(958,313,11,2,75,'Very Good'),(959,313,10,2,70,'Good'),(960,313,9,2,65,'Fair'),(961,313,8,2,60,'Nice work'),(962,313,7,2,55,'Above average'),(963,313,6,2,50,'Average'),(964,313,5,2,45,'Below average'),(965,313,4,2,40,'Can do better'),(966,313,3,2,35,'Pull up your socks'),(967,313,2,2,30,'Put more effort.'),(968,313,1,2,0,'Try harder.'),(969,314,12,2,80,'Excellent'),(970,314,11,2,75,'Very Good'),(971,314,10,2,70,'Good'),(972,314,9,2,65,'Fair'),(973,314,8,2,60,'Nice work'),(974,314,7,2,55,'Above average'),(975,314,6,2,50,'Average'),(976,314,5,2,45,'Below average'),(977,314,4,2,40,'Can do better'),(978,314,3,2,35,'Pull up your socks'),(979,314,2,2,30,'Put more effort.'),(980,314,1,2,0,'Try harder.'),(981,315,12,2,80,'Excellent'),(982,315,11,2,75,'Very Good'),(983,315,10,2,70,'Good'),(984,315,9,2,65,'Fair'),(985,315,8,2,60,'Nice work'),(986,315,7,2,55,'Above average'),(987,315,6,2,50,'Average'),(988,315,5,2,45,'Below average'),(989,315,4,2,40,'Can do better'),(990,315,3,2,35,'Pull up your socks'),(991,315,2,2,30,'Put more effort.'),(992,315,1,2,0,'Try harder.'),(993,441,12,2,80,'Excellent'),(994,441,11,2,75,'Very Good'),(995,441,10,2,70,'Good'),(996,441,9,2,65,'Fair'),(997,441,8,2,60,'Nice work'),(998,441,7,2,55,'Above average'),(999,441,6,2,50,'Average'),(1000,441,5,2,45,'Below average'),(1001,441,4,2,40,'Can do better'),(1002,441,3,2,35,'Pull up your socks'),(1003,441,2,2,30,'Put more effort.'),(1004,441,1,2,0,'Try harder.'),(1005,442,12,2,80,'Excellent'),(1006,442,11,2,75,'Very Good'),(1007,442,10,2,70,'Good'),(1008,442,9,2,65,'Fair'),(1009,442,8,2,60,'Nice work'),(1010,442,7,2,55,'Above average'),(1011,442,6,2,50,'Average'),(1012,442,5,2,45,'Below average'),(1013,442,4,2,40,'Can do better'),(1014,442,3,2,35,'Pull up your socks'),(1015,442,2,2,30,'Put more effort.'),(1016,442,1,2,0,'Try harder.'),(1017,443,12,2,80,'Excellent'),(1018,443,11,2,75,'Very Good'),(1019,443,10,2,70,'Good'),(1020,443,9,2,65,'Fair'),(1021,443,8,2,60,'Nice work'),(1022,443,7,2,55,'Above average'),(1023,443,6,2,50,'Average'),(1024,443,5,2,45,'Below average'),(1025,443,4,2,40,'Can do better'),(1026,443,3,2,35,'Pull up your socks'),(1027,443,2,2,30,'Put more effort.'),(1028,443,1,2,0,'Try harder.'),(1029,444,12,2,80,'Excellent'),(1030,444,11,2,75,'Very Good'),(1031,444,10,2,70,'Good'),(1032,444,9,2,65,'Fair'),(1033,444,8,2,60,'Nice work'),(1034,444,7,2,55,'Above average'),(1035,444,6,2,50,'Average'),(1036,444,5,2,45,'Below average'),(1037,444,4,2,40,'Can do better'),(1038,444,3,2,35,'Pull up your socks'),(1039,444,2,2,30,'Put more effort.'),(1040,444,1,2,0,'Try harder.'),(1041,445,12,2,80,'Excellent'),(1042,445,11,2,75,'Very Good'),(1043,445,10,2,70,'Good'),(1044,445,9,2,65,'Fair'),(1045,445,8,2,60,'Nice work'),(1046,445,7,2,55,'Above average'),(1047,445,6,2,50,'Average'),(1048,445,5,2,45,'Below average'),(1049,445,4,2,40,'Can do better'),(1050,445,3,2,35,'Pull up your socks'),(1051,445,2,2,30,'Put more effort.'),(1052,445,1,2,0,'Try harder.'),(1053,446,12,2,80,'Excellent'),(1054,446,11,2,75,'Very Good'),(1055,446,10,2,70,'Good'),(1056,446,9,2,65,'Fair'),(1057,446,8,2,60,'Nice work'),(1058,446,7,2,55,'Above average'),(1059,446,6,2,50,'Average'),(1060,446,5,2,45,'Below average'),(1061,446,4,2,40,'Can do better'),(1062,446,3,2,35,'Pull up your socks'),(1063,446,2,2,30,'Put more effort.'),(1064,446,1,2,0,'Try harder.'),(1065,447,12,2,80,'Excellent'),(1066,447,11,2,75,'Very Good'),(1067,447,10,2,70,'Good'),(1068,447,9,2,65,'Fair'),(1069,447,8,2,60,'Nice work'),(1070,447,7,2,55,'Above average'),(1071,447,6,2,50,'Average'),(1072,447,5,2,45,'Below average'),(1073,447,4,2,40,'Can do better'),(1074,447,3,2,35,'Pull up your socks'),(1075,447,2,2,30,'Put more effort.'),(1076,447,1,2,0,'Try harder.'),(1077,448,12,2,80,'Excellent'),(1078,448,11,2,75,'Very Good'),(1079,448,10,2,70,'Good'),(1080,448,9,2,65,'Fair'),(1081,448,8,2,60,'Nice work'),(1082,448,7,2,55,'Above average'),(1083,448,6,2,50,'Average'),(1084,448,5,2,45,'Below average'),(1085,448,4,2,40,'Can do better'),(1086,448,3,2,35,'Pull up your socks'),(1087,448,2,2,30,'Put more effort.'),(1088,448,1,2,0,'Try harder.'),(1089,449,12,2,80,'Excellent'),(1090,449,11,2,75,'Very Good'),(1091,449,10,2,70,'Good'),(1092,449,9,2,65,'Fair'),(1093,449,8,2,60,'Nice work'),(1094,449,7,2,55,'Above average'),(1095,449,6,2,50,'Average'),(1096,449,5,2,45,'Below average'),(1097,449,4,2,40,'Can do better'),(1098,449,3,2,35,'Pull up your socks'),(1099,449,2,2,30,'Put more effort.'),(1100,449,1,2,0,'Try harder.'),(1101,450,12,2,80,'Excellent'),(1102,450,11,2,75,'Very Good'),(1103,450,10,2,70,'Good'),(1104,450,9,2,65,'Fair'),(1105,450,8,2,60,'Nice work'),(1106,450,7,2,55,'Above average'),(1107,450,6,2,50,'Average'),(1108,450,5,2,45,'Below average'),(1109,450,4,2,40,'Can do better'),(1110,450,3,2,35,'Pull up your socks'),(1111,450,2,2,30,'Put more effort.'),(1112,450,1,2,0,'Try harder.'),(1113,451,12,2,80,'Excellent'),(1114,451,11,2,75,'Very Good'),(1115,451,10,2,70,'Good'),(1116,451,9,2,65,'Fair'),(1117,451,8,2,60,'Nice work'),(1118,451,7,2,55,'Above average'),(1119,451,6,2,50,'Average'),(1120,451,5,2,45,'Below average'),(1121,451,4,2,40,'Can do better'),(1122,451,3,2,35,'Pull up your socks'),(1123,451,2,2,30,'Put more effort.'),(1124,451,1,2,0,'Try harder.'),(1125,501,12,2,80,'Excellent'),(1126,501,11,2,75,'Very Good'),(1127,501,10,2,70,'Good'),(1128,501,9,2,65,'Fair'),(1129,501,8,2,60,'Nice work'),(1130,501,7,2,55,'Above average'),(1131,501,6,2,50,'Average'),(1132,501,5,2,45,'Below average'),(1133,501,4,2,40,'Can do better'),(1134,501,3,2,35,'Pull up your socks'),(1135,501,2,2,30,'Put more effort.'),(1136,501,1,2,0,'Try harder.'),(1137,502,12,2,80,'Excellent'),(1138,502,11,2,75,'Very Good'),(1139,502,10,2,70,'Good'),(1140,502,9,2,65,'Fair'),(1141,502,8,2,60,'Nice work'),(1142,502,7,2,55,'Above average'),(1143,502,6,2,50,'Average'),(1144,502,5,2,45,'Below average'),(1145,502,4,2,40,'Can do better'),(1146,502,3,2,35,'Pull up your socks'),(1147,502,2,2,30,'Put more effort.'),(1148,502,1,2,0,'Try harder.'),(1149,503,12,2,80,'Excellent'),(1150,503,11,2,75,'Very Good'),(1151,503,10,2,70,'Good'),(1152,503,9,2,65,'Fair'),(1153,503,8,2,60,'Nice work'),(1154,503,7,2,55,'Above average'),(1155,503,6,2,50,'Average'),(1156,503,5,2,45,'Below average'),(1157,503,4,2,40,'Can do better'),(1158,503,3,2,35,'Pull up your socks'),(1159,503,2,2,30,'Put more effort.'),(1160,503,1,2,0,'Try harder.'),(1161,504,12,2,80,'Excellent'),(1162,504,11,2,75,'Very Good'),(1163,504,10,2,70,'Good'),(1164,504,9,2,65,'Fair'),(1165,504,8,2,60,'Nice work'),(1166,504,7,2,55,'Above average'),(1167,504,6,2,50,'Average'),(1168,504,5,2,45,'Below average'),(1169,504,4,2,40,'Can do better'),(1170,504,3,2,35,'Pull up your socks'),(1171,504,2,2,30,'Put more effort.'),(1172,504,1,2,0,'Try harder.'),(1173,511,12,2,80,'Excellent'),(1174,511,11,2,75,'Very Good'),(1175,511,10,2,70,'Good'),(1176,511,9,2,65,'Fair'),(1177,511,8,2,60,'Nice work'),(1178,511,7,2,55,'Above average'),(1179,511,6,2,50,'Average'),(1180,511,5,2,45,'Below average'),(1181,511,4,2,40,'Can do better'),(1182,511,3,2,35,'Pull up your socks'),(1183,511,2,2,30,'Put more effort.'),(1184,511,1,2,0,'Try harder.'),(1185,565,12,2,80,'Excellent'),(1186,565,11,2,75,'Very Good'),(1187,565,10,2,70,'Good'),(1188,565,9,2,65,'Fair'),(1189,565,8,2,60,'Nice work'),(1190,565,7,2,55,'Above average'),(1191,565,6,2,50,'Average'),(1192,565,5,2,45,'Below average'),(1193,565,4,2,40,'Can do better'),(1194,565,3,2,35,'Pull up your socks'),(1195,565,2,2,30,'Put more effort.'),(1196,565,1,2,0,'Try harder.'),(1197,101,12,3,80,'Excellent'),(1198,101,11,3,75,'Very Good'),(1199,101,10,3,70,'Good'),(1200,101,9,3,65,'Fair'),(1201,101,8,3,60,'Nice work'),(1202,101,7,3,55,'Above average'),(1203,101,6,3,50,'Average'),(1204,101,5,3,45,'Below average'),(1205,101,4,3,40,'Can do better'),(1206,101,3,3,35,'Pull up your socks'),(1207,101,2,3,30,'Put more effort.'),(1208,101,1,3,0,'Try harder.'),(1209,102,12,3,80,'Excellent'),(1210,102,11,3,75,'Very Good'),(1211,102,10,3,70,'Good'),(1212,102,9,3,65,'Fair'),(1213,102,8,3,60,'Nice work'),(1214,102,7,3,55,'Above average'),(1215,102,6,3,50,'Average'),(1216,102,5,3,45,'Below average'),(1217,102,4,3,40,'Can do better'),(1218,102,3,3,35,'Pull up your socks'),(1219,102,2,3,30,'Put more effort.'),(1220,102,1,3,0,'Try harder.'),(1221,121,12,3,80,'Excellent'),(1222,121,11,3,75,'Very Good'),(1223,121,10,3,70,'Good'),(1224,121,9,3,65,'Fair'),(1225,121,8,3,60,'Nice work'),(1226,121,7,3,55,'Above average'),(1227,121,6,3,50,'Average'),(1228,121,5,3,45,'Below average'),(1229,121,4,3,40,'Can do better'),(1230,121,3,3,35,'Pull up your socks'),(1231,121,2,3,30,'Put more effort.'),(1232,121,1,3,0,'Try harder.'),(1233,122,12,3,80,'Excellent'),(1234,122,11,3,75,'Very Good'),(1235,122,10,3,70,'Good'),(1236,122,9,3,65,'Fair'),(1237,122,8,3,60,'Nice work'),(1238,122,7,3,55,'Above average'),(1239,122,6,3,50,'Average'),(1240,122,5,3,45,'Below average'),(1241,122,4,3,40,'Can do better'),(1242,122,3,3,35,'Pull up your socks'),(1243,122,2,3,30,'Put more effort.'),(1244,122,1,3,0,'Try harder.'),(1245,231,12,3,80,'Excellent'),(1246,231,11,3,75,'Very Good'),(1247,231,10,3,70,'Good'),(1248,231,9,3,65,'Fair'),(1249,231,8,3,60,'Nice work'),(1250,231,7,3,55,'Above average'),(1251,231,6,3,50,'Average'),(1252,231,5,3,45,'Below average'),(1253,231,4,3,40,'Can do better'),(1254,231,3,3,35,'Pull up your socks'),(1255,231,2,3,30,'Put more effort.'),(1256,231,1,3,0,'Try harder.'),(1257,232,12,3,80,'Excellent'),(1258,232,11,3,75,'Very Good'),(1259,232,10,3,70,'Good'),(1260,232,9,3,65,'Fair'),(1261,232,8,3,60,'Nice work'),(1262,232,7,3,55,'Above average'),(1263,232,6,3,50,'Average'),(1264,232,5,3,45,'Below average'),(1265,232,4,3,40,'Can do better'),(1266,232,3,3,35,'Pull up your socks'),(1267,232,2,3,30,'Put more effort.'),(1268,232,1,3,0,'Try harder.'),(1269,233,12,3,80,'Excellent'),(1270,233,11,3,75,'Very Good'),(1271,233,10,3,70,'Good'),(1272,233,9,3,65,'Fair'),(1273,233,8,3,60,'Nice work'),(1274,233,7,3,55,'Above average'),(1275,233,6,3,50,'Average'),(1276,233,5,3,45,'Below average'),(1277,233,4,3,40,'Can do better'),(1278,233,3,3,35,'Pull up your socks'),(1279,233,2,3,30,'Put more effort.'),(1280,233,1,3,0,'Try harder.'),(1281,237,12,3,80,'Excellent'),(1282,237,11,3,75,'Very Good'),(1283,237,10,3,70,'Good'),(1284,237,9,3,65,'Fair'),(1285,237,8,3,60,'Nice work'),(1286,237,7,3,55,'Above average'),(1287,237,6,3,50,'Average'),(1288,237,5,3,45,'Below average'),(1289,237,4,3,40,'Can do better'),(1290,237,3,3,35,'Pull up your socks'),(1291,237,2,3,30,'Put more effort.'),(1292,237,1,3,0,'Try harder.'),(1293,311,12,3,80,'Excellent'),(1294,311,11,3,75,'Very Good'),(1295,311,10,3,70,'Good'),(1296,311,9,3,65,'Fair'),(1297,311,8,3,60,'Nice work'),(1298,311,7,3,55,'Above average'),(1299,311,6,3,50,'Average'),(1300,311,5,3,45,'Below average'),(1301,311,4,3,40,'Can do better'),(1302,311,3,3,35,'Pull up your socks'),(1303,311,2,3,30,'Put more effort.'),(1304,311,1,3,0,'Try harder.'),(1305,312,12,3,80,'Excellent'),(1306,312,11,3,75,'Very Good'),(1307,312,10,3,70,'Good'),(1308,312,9,3,65,'Fair'),(1309,312,8,3,60,'Nice work'),(1310,312,7,3,55,'Above average'),(1311,312,6,3,50,'Average'),(1312,312,5,3,45,'Below average'),(1313,312,4,3,40,'Can do better'),(1314,312,3,3,35,'Pull up your socks'),(1315,312,2,3,30,'Put more effort.'),(1316,312,1,3,0,'Try harder.'),(1317,313,12,3,80,'Excellent'),(1318,313,11,3,75,'Very Good'),(1319,313,10,3,70,'Good'),(1320,313,9,3,65,'Fair'),(1321,313,8,3,60,'Nice work'),(1322,313,7,3,55,'Above average'),(1323,313,6,3,50,'Average'),(1324,313,5,3,45,'Below average'),(1325,313,4,3,40,'Can do better'),(1326,313,3,3,35,'Pull up your socks'),(1327,313,2,3,30,'Put more effort.'),(1328,313,1,3,0,'Try harder.'),(1329,314,12,3,80,'Excellent'),(1330,314,11,3,75,'Very Good'),(1331,314,10,3,70,'Good'),(1332,314,9,3,65,'Fair'),(1333,314,8,3,60,'Nice work'),(1334,314,7,3,55,'Above average'),(1335,314,6,3,50,'Average'),(1336,314,5,3,45,'Below average'),(1337,314,4,3,40,'Can do better'),(1338,314,3,3,35,'Pull up your socks'),(1339,314,2,3,30,'Put more effort.'),(1340,314,1,3,0,'Try harder.'),(1341,315,12,3,80,'Excellent'),(1342,315,11,3,75,'Very Good'),(1343,315,10,3,70,'Good'),(1344,315,9,3,65,'Fair'),(1345,315,8,3,60,'Nice work'),(1346,315,7,3,55,'Above average'),(1347,315,6,3,50,'Average'),(1348,315,5,3,45,'Below average'),(1349,315,4,3,40,'Can do better'),(1350,315,3,3,35,'Pull up your socks'),(1351,315,2,3,30,'Put more effort.'),(1352,315,1,3,0,'Try harder.'),(1353,441,12,3,80,'Excellent'),(1354,441,11,3,75,'Very Good'),(1355,441,10,3,70,'Good'),(1356,441,9,3,65,'Fair'),(1357,441,8,3,60,'Nice work'),(1358,441,7,3,55,'Above average'),(1359,441,6,3,50,'Average'),(1360,441,5,3,45,'Below average'),(1361,441,4,3,40,'Can do better'),(1362,441,3,3,35,'Pull up your socks'),(1363,441,2,3,30,'Put more effort.'),(1364,441,1,3,0,'Try harder.'),(1365,442,12,3,80,'Excellent'),(1366,442,11,3,75,'Very Good'),(1367,442,10,3,70,'Good'),(1368,442,9,3,65,'Fair'),(1369,442,8,3,60,'Nice work'),(1370,442,7,3,55,'Above average'),(1371,442,6,3,50,'Average'),(1372,442,5,3,45,'Below average'),(1373,442,4,3,40,'Can do better'),(1374,442,3,3,35,'Pull up your socks'),(1375,442,2,3,30,'Put more effort.'),(1376,442,1,3,0,'Try harder.'),(1377,443,12,3,80,'Excellent'),(1378,443,11,3,75,'Very Good'),(1379,443,10,3,70,'Good'),(1380,443,9,3,65,'Fair'),(1381,443,8,3,60,'Nice work'),(1382,443,7,3,55,'Above average'),(1383,443,6,3,50,'Average'),(1384,443,5,3,45,'Below average'),(1385,443,4,3,40,'Can do better'),(1386,443,3,3,35,'Pull up your socks'),(1387,443,2,3,30,'Put more effort.'),(1388,443,1,3,0,'Try harder.'),(1389,444,12,3,80,'Excellent'),(1390,444,11,3,75,'Very Good'),(1391,444,10,3,70,'Good'),(1392,444,9,3,65,'Fair'),(1393,444,8,3,60,'Nice work'),(1394,444,7,3,55,'Above average'),(1395,444,6,3,50,'Average'),(1396,444,5,3,45,'Below average'),(1397,444,4,3,40,'Can do better'),(1398,444,3,3,35,'Pull up your socks'),(1399,444,2,3,30,'Put more effort.'),(1400,444,1,3,0,'Try harder.'),(1401,445,12,3,80,'Excellent'),(1402,445,11,3,75,'Very Good'),(1403,445,10,3,70,'Good'),(1404,445,9,3,65,'Fair'),(1405,445,8,3,60,'Nice work'),(1406,445,7,3,55,'Above average'),(1407,445,6,3,50,'Average'),(1408,445,5,3,45,'Below average'),(1409,445,4,3,40,'Can do better'),(1410,445,3,3,35,'Pull up your socks'),(1411,445,2,3,30,'Put more effort.'),(1412,445,1,3,0,'Try harder.'),(1413,446,12,3,80,'Excellent'),(1414,446,11,3,75,'Very Good'),(1415,446,10,3,70,'Good'),(1416,446,9,3,65,'Fair'),(1417,446,8,3,60,'Nice work'),(1418,446,7,3,55,'Above average'),(1419,446,6,3,50,'Average'),(1420,446,5,3,45,'Below average'),(1421,446,4,3,40,'Can do better'),(1422,446,3,3,35,'Pull up your socks'),(1423,446,2,3,30,'Put more effort.'),(1424,446,1,3,0,'Try harder.'),(1425,447,12,3,80,'Excellent'),(1426,447,11,3,75,'Very Good'),(1427,447,10,3,70,'Good'),(1428,447,9,3,65,'Fair'),(1429,447,8,3,60,'Nice work'),(1430,447,7,3,55,'Above average'),(1431,447,6,3,50,'Average'),(1432,447,5,3,45,'Below average'),(1433,447,4,3,40,'Can do better'),(1434,447,3,3,35,'Pull up your socks'),(1435,447,2,3,30,'Put more effort.'),(1436,447,1,3,0,'Try harder.'),(1437,448,12,3,80,'Excellent'),(1438,448,11,3,75,'Very Good'),(1439,448,10,3,70,'Good'),(1440,448,9,3,65,'Fair'),(1441,448,8,3,60,'Nice work'),(1442,448,7,3,55,'Above average'),(1443,448,6,3,50,'Average'),(1444,448,5,3,45,'Below average'),(1445,448,4,3,40,'Can do better'),(1446,448,3,3,35,'Pull up your socks'),(1447,448,2,3,30,'Put more effort.'),(1448,448,1,3,0,'Try harder.'),(1449,449,12,3,80,'Excellent'),(1450,449,11,3,75,'Very Good'),(1451,449,10,3,70,'Good'),(1452,449,9,3,65,'Fair'),(1453,449,8,3,60,'Nice work'),(1454,449,7,3,55,'Above average'),(1455,449,6,3,50,'Average'),(1456,449,5,3,45,'Below average'),(1457,449,4,3,40,'Can do better'),(1458,449,3,3,35,'Pull up your socks'),(1459,449,2,3,30,'Put more effort.'),(1460,449,1,3,0,'Try harder.'),(1461,450,12,3,80,'Excellent'),(1462,450,11,3,75,'Very Good'),(1463,450,10,3,70,'Good'),(1464,450,9,3,65,'Fair'),(1465,450,8,3,60,'Nice work'),(1466,450,7,3,55,'Above average'),(1467,450,6,3,50,'Average'),(1468,450,5,3,45,'Below average'),(1469,450,4,3,40,'Can do better'),(1470,450,3,3,35,'Pull up your socks'),(1471,450,2,3,30,'Put more effort.'),(1472,450,1,3,0,'Try harder.'),(1473,451,12,3,80,'Excellent'),(1474,451,11,3,75,'Very Good'),(1475,451,10,3,70,'Good'),(1476,451,9,3,65,'Fair'),(1477,451,8,3,60,'Nice work'),(1478,451,7,3,55,'Above average'),(1479,451,6,3,50,'Average'),(1480,451,5,3,45,'Below average'),(1481,451,4,3,40,'Can do better'),(1482,451,3,3,35,'Pull up your socks'),(1483,451,2,3,30,'Put more effort.'),(1484,451,1,3,0,'Try harder.'),(1485,501,12,3,80,'Excellent'),(1486,501,11,3,75,'Very Good'),(1487,501,10,3,70,'Good'),(1488,501,9,3,65,'Fair'),(1489,501,8,3,60,'Nice work'),(1490,501,7,3,55,'Above average'),(1491,501,6,3,50,'Average'),(1492,501,5,3,45,'Below average'),(1493,501,4,3,40,'Can do better'),(1494,501,3,3,35,'Pull up your socks'),(1495,501,2,3,30,'Put more effort.'),(1496,501,1,3,0,'Try harder.'),(1497,502,12,3,80,'Excellent'),(1498,502,11,3,75,'Very Good'),(1499,502,10,3,70,'Good'),(1500,502,9,3,65,'Fair'),(1501,502,8,3,60,'Nice work'),(1502,502,7,3,55,'Above average'),(1503,502,6,3,50,'Average'),(1504,502,5,3,45,'Below average'),(1505,502,4,3,40,'Can do better'),(1506,502,3,3,35,'Pull up your socks'),(1507,502,2,3,30,'Put more effort.'),(1508,502,1,3,0,'Try harder.'),(1509,503,12,3,80,'Excellent'),(1510,503,11,3,75,'Very Good'),(1511,503,10,3,70,'Good'),(1512,503,9,3,65,'Fair'),(1513,503,8,3,60,'Nice work'),(1514,503,7,3,55,'Above average'),(1515,503,6,3,50,'Average'),(1516,503,5,3,45,'Below average'),(1517,503,4,3,40,'Can do better'),(1518,503,3,3,35,'Pull up your socks'),(1519,503,2,3,30,'Put more effort.'),(1520,503,1,3,0,'Try harder.'),(1521,504,12,3,80,'Excellent'),(1522,504,11,3,75,'Very Good'),(1523,504,10,3,70,'Good'),(1524,504,9,3,65,'Fair'),(1525,504,8,3,60,'Nice work'),(1526,504,7,3,55,'Above average'),(1527,504,6,3,50,'Average'),(1528,504,5,3,45,'Below average'),(1529,504,4,3,40,'Can do better'),(1530,504,3,3,35,'Pull up your socks'),(1531,504,2,3,30,'Put more effort.'),(1532,504,1,3,0,'Try harder.'),(1533,511,12,3,80,'Excellent'),(1534,511,11,3,75,'Very Good'),(1535,511,10,3,70,'Good'),(1536,511,9,3,65,'Fair'),(1537,511,8,3,60,'Nice work'),(1538,511,7,3,55,'Above average'),(1539,511,6,3,50,'Average'),(1540,511,5,3,45,'Below average'),(1541,511,4,3,40,'Can do better'),(1542,511,3,3,35,'Pull up your socks'),(1543,511,2,3,30,'Put more effort.'),(1544,511,1,3,0,'Try harder.'),(1545,565,12,3,80,'Excellent'),(1546,565,11,3,75,'Very Good'),(1547,565,10,3,70,'Good'),(1548,565,9,3,65,'Fair'),(1549,565,8,3,60,'Nice work'),(1550,565,7,3,55,'Above average'),(1551,565,6,3,50,'Average'),(1552,565,5,3,45,'Below average'),(1553,565,4,3,40,'Can do better'),(1554,565,3,3,35,'Pull up your socks'),(1555,565,2,3,30,'Put more effort.'),(1556,565,1,3,0,'Try harder.'),(1557,101,12,4,80,'Excellent'),(1558,101,11,4,75,'Very Good'),(1559,101,10,4,70,'Good'),(1560,101,9,4,65,'Fair'),(1561,101,8,4,60,'Nice work'),(1562,101,7,4,55,'Above average'),(1563,101,6,4,50,'Average'),(1564,101,5,4,45,'Below average'),(1565,101,4,4,40,'Can do better'),(1566,101,3,4,35,'Pull up your socks'),(1567,101,2,4,30,'Put more effort.'),(1568,101,1,4,0,'Try harder.'),(1569,102,12,4,80,'Excellent'),(1570,102,11,4,75,'Very Good'),(1571,102,10,4,70,'Good'),(1572,102,9,4,65,'Fair'),(1573,102,8,4,60,'Nice work'),(1574,102,7,4,55,'Above average'),(1575,102,6,4,50,'Average'),(1576,102,5,4,45,'Below average'),(1577,102,4,4,40,'Can do better'),(1578,102,3,4,35,'Pull up your socks'),(1579,102,2,4,30,'Put more effort.'),(1580,102,1,4,0,'Try harder.'),(1581,121,12,4,80,'Excellent'),(1582,121,11,4,75,'Very Good'),(1583,121,10,4,70,'Good'),(1584,121,9,4,65,'Fair'),(1585,121,8,4,60,'Nice work'),(1586,121,7,4,55,'Above average'),(1587,121,6,4,50,'Average'),(1588,121,5,4,45,'Below average'),(1589,121,4,4,40,'Can do better'),(1590,121,3,4,35,'Pull up your socks'),(1591,121,2,4,30,'Put more effort.'),(1592,121,1,4,0,'Try harder.'),(1593,122,12,4,80,'Excellent'),(1594,122,11,4,75,'Very Good'),(1595,122,10,4,70,'Good'),(1596,122,9,4,65,'Fair'),(1597,122,8,4,60,'Nice work'),(1598,122,7,4,55,'Above average'),(1599,122,6,4,50,'Average'),(1600,122,5,4,45,'Below average'),(1601,122,4,4,40,'Can do better'),(1602,122,3,4,35,'Pull up your socks'),(1603,122,2,4,30,'Put more effort.'),(1604,122,1,4,0,'Try harder.'),(1605,231,12,4,80,'Excellent'),(1606,231,11,4,75,'Very Good'),(1607,231,10,4,70,'Good'),(1608,231,9,4,65,'Fair'),(1609,231,8,4,60,'Nice work'),(1610,231,7,4,55,'Above average'),(1611,231,6,4,50,'Average'),(1612,231,5,4,45,'Below average'),(1613,231,4,4,40,'Can do better'),(1614,231,3,4,35,'Pull up your socks'),(1615,231,2,4,30,'Put more effort.'),(1616,231,1,4,0,'Try harder.'),(1617,232,12,4,80,'Excellent'),(1618,232,11,4,75,'Very Good'),(1619,232,10,4,70,'Good'),(1620,232,9,4,65,'Fair'),(1621,232,8,4,60,'Nice work'),(1622,232,7,4,55,'Above average'),(1623,232,6,4,50,'Average'),(1624,232,5,4,45,'Below average'),(1625,232,4,4,40,'Can do better'),(1626,232,3,4,35,'Pull up your socks'),(1627,232,2,4,30,'Put more effort.'),(1628,232,1,4,0,'Try harder.'),(1629,233,12,4,80,'Excellent'),(1630,233,11,4,75,'Very Good'),(1631,233,10,4,70,'Good'),(1632,233,9,4,65,'Fair'),(1633,233,8,4,60,'Nice work'),(1634,233,7,4,55,'Above average'),(1635,233,6,4,50,'Average'),(1636,233,5,4,45,'Below average'),(1637,233,4,4,40,'Can do better'),(1638,233,3,4,35,'Pull up your socks'),(1639,233,2,4,30,'Put more effort.'),(1640,233,1,4,0,'Try harder.'),(1641,237,12,4,80,'Excellent'),(1642,237,11,4,75,'Very Good'),(1643,237,10,4,70,'Good'),(1644,237,9,4,65,'Fair'),(1645,237,8,4,60,'Nice work'),(1646,237,7,4,55,'Above average'),(1647,237,6,4,50,'Average'),(1648,237,5,4,45,'Below average'),(1649,237,4,4,40,'Can do better'),(1650,237,3,4,35,'Pull up your socks'),(1651,237,2,4,30,'Put more effort.'),(1652,237,1,4,0,'Try harder.'),(1653,311,12,4,80,'Excellent'),(1654,311,11,4,75,'Very Good'),(1655,311,10,4,70,'Good'),(1656,311,9,4,65,'Fair'),(1657,311,8,4,60,'Nice work'),(1658,311,7,4,55,'Above average'),(1659,311,6,4,50,'Average'),(1660,311,5,4,45,'Below average'),(1661,311,4,4,40,'Can do better'),(1662,311,3,4,35,'Pull up your socks'),(1663,311,2,4,30,'Put more effort.'),(1664,311,1,4,0,'Try harder.'),(1665,312,12,4,80,'Excellent'),(1666,312,11,4,75,'Very Good'),(1667,312,10,4,70,'Good'),(1668,312,9,4,65,'Fair'),(1669,312,8,4,60,'Nice work'),(1670,312,7,4,55,'Above average'),(1671,312,6,4,50,'Average'),(1672,312,5,4,45,'Below average'),(1673,312,4,4,40,'Can do better'),(1674,312,3,4,35,'Pull up your socks'),(1675,312,2,4,30,'Put more effort.'),(1676,312,1,4,0,'Try harder.'),(1677,313,12,4,80,'Excellent'),(1678,313,11,4,75,'Very Good'),(1679,313,10,4,70,'Good'),(1680,313,9,4,65,'Fair'),(1681,313,8,4,60,'Nice work'),(1682,313,7,4,55,'Above average'),(1683,313,6,4,50,'Average'),(1684,313,5,4,45,'Below average'),(1685,313,4,4,40,'Can do better'),(1686,313,3,4,35,'Pull up your socks'),(1687,313,2,4,30,'Put more effort.'),(1688,313,1,4,0,'Try harder.'),(1689,314,12,4,80,'Excellent'),(1690,314,11,4,75,'Very Good'),(1691,314,10,4,70,'Good'),(1692,314,9,4,65,'Fair'),(1693,314,8,4,60,'Nice work'),(1694,314,7,4,55,'Above average'),(1695,314,6,4,50,'Average'),(1696,314,5,4,45,'Below average'),(1697,314,4,4,40,'Can do better'),(1698,314,3,4,35,'Pull up your socks'),(1699,314,2,4,30,'Put more effort.'),(1700,314,1,4,0,'Try harder.'),(1701,315,12,4,80,'Excellent'),(1702,315,11,4,75,'Very Good'),(1703,315,10,4,70,'Good'),(1704,315,9,4,65,'Fair'),(1705,315,8,4,60,'Nice work'),(1706,315,7,4,55,'Above average'),(1707,315,6,4,50,'Average'),(1708,315,5,4,45,'Below average'),(1709,315,4,4,40,'Can do better'),(1710,315,3,4,35,'Pull up your socks'),(1711,315,2,4,30,'Put more effort.'),(1712,315,1,4,0,'Try harder.'),(1713,441,12,4,80,'Excellent'),(1714,441,11,4,75,'Very Good'),(1715,441,10,4,70,'Good'),(1716,441,9,4,65,'Fair'),(1717,441,8,4,60,'Nice work'),(1718,441,7,4,55,'Above average'),(1719,441,6,4,50,'Average'),(1720,441,5,4,45,'Below average'),(1721,441,4,4,40,'Can do better'),(1722,441,3,4,35,'Pull up your socks'),(1723,441,2,4,30,'Put more effort.'),(1724,441,1,4,0,'Try harder.'),(1725,442,12,4,80,'Excellent'),(1726,442,11,4,75,'Very Good'),(1727,442,10,4,70,'Good'),(1728,442,9,4,65,'Fair'),(1729,442,8,4,60,'Nice work'),(1730,442,7,4,55,'Above average'),(1731,442,6,4,50,'Average'),(1732,442,5,4,45,'Below average'),(1733,442,4,4,40,'Can do better'),(1734,442,3,4,35,'Pull up your socks'),(1735,442,2,4,30,'Put more effort.'),(1736,442,1,4,0,'Try harder.'),(1737,443,12,4,80,'Excellent'),(1738,443,11,4,75,'Very Good'),(1739,443,10,4,70,'Good'),(1740,443,9,4,65,'Fair'),(1741,443,8,4,60,'Nice work'),(1742,443,7,4,55,'Above average'),(1743,443,6,4,50,'Average'),(1744,443,5,4,45,'Below average'),(1745,443,4,4,40,'Can do better'),(1746,443,3,4,35,'Pull up your socks'),(1747,443,2,4,30,'Put more effort.'),(1748,443,1,4,0,'Try harder.'),(1749,444,12,4,80,'Excellent'),(1750,444,11,4,75,'Very Good'),(1751,444,10,4,70,'Good'),(1752,444,9,4,65,'Fair'),(1753,444,8,4,60,'Nice work'),(1754,444,7,4,55,'Above average'),(1755,444,6,4,50,'Average'),(1756,444,5,4,45,'Below average'),(1757,444,4,4,40,'Can do better'),(1758,444,3,4,35,'Pull up your socks'),(1759,444,2,4,30,'Put more effort.'),(1760,444,1,4,0,'Try harder.'),(1761,445,12,4,80,'Excellent'),(1762,445,11,4,75,'Very Good'),(1763,445,10,4,70,'Good'),(1764,445,9,4,65,'Fair'),(1765,445,8,4,60,'Nice work'),(1766,445,7,4,55,'Above average'),(1767,445,6,4,50,'Average'),(1768,445,5,4,45,'Below average'),(1769,445,4,4,40,'Can do better'),(1770,445,3,4,35,'Pull up your socks'),(1771,445,2,4,30,'Put more effort.'),(1772,445,1,4,0,'Try harder.'),(1773,446,12,4,80,'Excellent'),(1774,446,11,4,75,'Very Good'),(1775,446,10,4,70,'Good'),(1776,446,9,4,65,'Fair'),(1777,446,8,4,60,'Nice work'),(1778,446,7,4,55,'Above average'),(1779,446,6,4,50,'Average'),(1780,446,5,4,45,'Below average'),(1781,446,4,4,40,'Can do better'),(1782,446,3,4,35,'Pull up your socks'),(1783,446,2,4,30,'Put more effort.'),(1784,446,1,4,0,'Try harder.'),(1785,447,12,4,80,'Excellent'),(1786,447,11,4,75,'Very Good'),(1787,447,10,4,70,'Good'),(1788,447,9,4,65,'Fair'),(1789,447,8,4,60,'Nice work'),(1790,447,7,4,55,'Above average'),(1791,447,6,4,50,'Average'),(1792,447,5,4,45,'Below average'),(1793,447,4,4,40,'Can do better'),(1794,447,3,4,35,'Pull up your socks'),(1795,447,2,4,30,'Put more effort.'),(1796,447,1,4,0,'Try harder.'),(1797,448,12,4,80,'Excellent'),(1798,448,11,4,75,'Very Good'),(1799,448,10,4,70,'Good'),(1800,448,9,4,65,'Fair'),(1801,448,8,4,60,'Nice work'),(1802,448,7,4,55,'Above average'),(1803,448,6,4,50,'Average'),(1804,448,5,4,45,'Below average'),(1805,448,4,4,40,'Can do better'),(1806,448,3,4,35,'Pull up your socks'),(1807,448,2,4,30,'Put more effort.'),(1808,448,1,4,0,'Try harder.'),(1809,449,12,4,80,'Excellent'),(1810,449,11,4,75,'Very Good'),(1811,449,10,4,70,'Good'),(1812,449,9,4,65,'Fair'),(1813,449,8,4,60,'Nice work'),(1814,449,7,4,55,'Above average'),(1815,449,6,4,50,'Average'),(1816,449,5,4,45,'Below average'),(1817,449,4,4,40,'Can do better'),(1818,449,3,4,35,'Pull up your socks'),(1819,449,2,4,30,'Put more effort.'),(1820,449,1,4,0,'Try harder.'),(1821,450,12,4,80,'Excellent'),(1822,450,11,4,75,'Very Good'),(1823,450,10,4,70,'Good'),(1824,450,9,4,65,'Fair'),(1825,450,8,4,60,'Nice work'),(1826,450,7,4,55,'Above average'),(1827,450,6,4,50,'Average'),(1828,450,5,4,45,'Below average'),(1829,450,4,4,40,'Can do better'),(1830,450,3,4,35,'Pull up your socks'),(1831,450,2,4,30,'Put more effort.'),(1832,450,1,4,0,'Try harder.'),(1833,451,12,4,80,'Excellent'),(1834,451,11,4,75,'Very Good'),(1835,451,10,4,70,'Good'),(1836,451,9,4,65,'Fair'),(1837,451,8,4,60,'Nice work'),(1838,451,7,4,55,'Above average'),(1839,451,6,4,50,'Average'),(1840,451,5,4,45,'Below average'),(1841,451,4,4,40,'Can do better'),(1842,451,3,4,35,'Pull up your socks'),(1843,451,2,4,30,'Put more effort.'),(1844,451,1,4,0,'Try harder.'),(1845,501,12,4,80,'Excellent'),(1846,501,11,4,75,'Very Good'),(1847,501,10,4,70,'Good'),(1848,501,9,4,65,'Fair'),(1849,501,8,4,60,'Nice work'),(1850,501,7,4,55,'Above average'),(1851,501,6,4,50,'Average'),(1852,501,5,4,45,'Below average'),(1853,501,4,4,40,'Can do better'),(1854,501,3,4,35,'Pull up your socks'),(1855,501,2,4,30,'Put more effort.'),(1856,501,1,4,0,'Try harder.'),(1857,502,12,4,80,'Excellent'),(1858,502,11,4,75,'Very Good'),(1859,502,10,4,70,'Good'),(1860,502,9,4,65,'Fair'),(1861,502,8,4,60,'Nice work'),(1862,502,7,4,55,'Above average'),(1863,502,6,4,50,'Average'),(1864,502,5,4,45,'Below average'),(1865,502,4,4,40,'Can do better'),(1866,502,3,4,35,'Pull up your socks'),(1867,502,2,4,30,'Put more effort.'),(1868,502,1,4,0,'Try harder.'),(1869,503,12,4,80,'Excellent'),(1870,503,11,4,75,'Very Good'),(1871,503,10,4,70,'Good'),(1872,503,9,4,65,'Fair'),(1873,503,8,4,60,'Nice work'),(1874,503,7,4,55,'Above average'),(1875,503,6,4,50,'Average'),(1876,503,5,4,45,'Below average'),(1877,503,4,4,40,'Can do better'),(1878,503,3,4,35,'Pull up your socks'),(1879,503,2,4,30,'Put more effort.'),(1880,503,1,4,0,'Try harder.'),(1881,504,12,4,80,'Excellent'),(1882,504,11,4,75,'Very Good'),(1883,504,10,4,70,'Good'),(1884,504,9,4,65,'Fair'),(1885,504,8,4,60,'Nice work'),(1886,504,7,4,55,'Above average'),(1887,504,6,4,50,'Average'),(1888,504,5,4,45,'Below average'),(1889,504,4,4,40,'Can do better'),(1890,504,3,4,35,'Pull up your socks'),(1891,504,2,4,30,'Put more effort.'),(1892,504,1,4,0,'Try harder.'),(1893,511,12,4,80,'Excellent'),(1894,511,11,4,75,'Very Good'),(1895,511,10,4,70,'Good'),(1896,511,9,4,65,'Fair'),(1897,511,8,4,60,'Nice work'),(1898,511,7,4,55,'Above average'),(1899,511,6,4,50,'Average'),(1900,511,5,4,45,'Below average'),(1901,511,4,4,40,'Can do better'),(1902,511,3,4,35,'Pull up your socks'),(1903,511,2,4,30,'Put more effort.'),(1904,511,1,4,0,'Try harder.'),(1905,565,12,4,80,'Excellent'),(1906,565,11,4,75,'Very Good'),(1907,565,10,4,70,'Good'),(1908,565,9,4,65,'Fair'),(1909,565,8,4,60,'Nice work'),(1910,565,7,4,55,'Above average'),(1911,565,6,4,50,'Average'),(1912,565,5,4,45,'Below average'),(1913,565,4,4,40,'Can do better'),(1914,565,3,4,35,'Pull up your socks'),(1915,565,2,4,30,'Put more effort.'),(1916,565,1,4,0,'Try harder.');
/*!40000 ALTER TABLE `subject_grade` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `subject_grade_view`
--

DROP TABLE IF EXISTS `subject_grade_view`;
/*!50001 DROP VIEW IF EXISTS `subject_grade_view`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `subject_grade_view` AS SELECT 
 1 AS `auto_id`,
 1 AS `name`,
 1 AS `points`,
 1 AS `form`,
 1 AS `subject_code`,
 1 AS `lower_bound`,
 1 AS `comment`,
 1 AS `upper_bound`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `teacher`
--

DROP TABLE IF EXISTS `teacher`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `teacher` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `code` int(11) NOT NULL,
  `name` varchar(45) NOT NULL,
  `initials` varchar(45) NOT NULL,
  `gender` varchar(45) NOT NULL,
  `phone_number` int(11) NOT NULL,
  `filepath` varchar(300) DEFAULT NULL,
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `code_UNIQUE` (`code`),
  UNIQUE KEY `nae_unique` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=130 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `teacher`
--

LOCK TABLES `teacher` WRITE;
/*!40000 ALTER TABLE `teacher` DISABLE KEYS */;
INSERT INTO `teacher` VALUES (116,1,'MR.SIMON GITHAIGA','SG','MALE',722497882,'C:\\Users\\Canjetan\\Pictures\\Deans Desk20141112_163856.jpeg'),(117,2,'MRS KIIRU','MMK','FEMALE',720278687,'C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg'),(118,3,'MS NYAGA','JN','FEMALE',727549455,'C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg'),(119,5,'MRS MUHORO','JM','FEMALE',712365478,'C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg'),(120,6,'MR MATHENGE','MW','MALE',713947293,'C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg'),(121,7,'John mwangi','JMM','MALE',718675557,'C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg'),(122,8,'madam Gladys','GWM','FEMALE',726466540,'C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg'),(123,9,'MISS NDUNGU','JW','FEMALE',702448414,'C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg'),(124,10,'MR.SAMUEL MAINA','SN','MALE',725564219,'C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg'),(125,11,'MADAM ZIPPORAH','ZM','FEMALE',728736019,'C:\\Users\\Canjetan\\Pictures\\Deans DeskWakuru.jpeg'),(129,4353,'Gray','GA','MALE',67453264,NULL);
/*!40000 ALTER TABLE `teacher` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `teacher_subject`
--

DROP TABLE IF EXISTS `teacher_subject`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `teacher_subject` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `teachers_code` int(11) NOT NULL,
  `subject_code` int(11) NOT NULL,
  PRIMARY KEY (`auto_id`),
  UNIQUE KEY `uniq` (`teachers_code`,`subject_code`),
  KEY `fk_teachers_has_subject_subject1_idx` (`subject_code`),
  KEY `fk_teachers_has_subject_teachers1_idx` (`teachers_code`),
  CONSTRAINT `fk_teachers_has_subject_subject1` FOREIGN KEY (`subject_code`) REFERENCES `subject` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_teachers_has_subject_teachers1` FOREIGN KEY (`teachers_code`) REFERENCES `teacher` (`code`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `teacher_subject`
--

LOCK TABLES `teacher_subject` WRITE;
/*!40000 ALTER TABLE `teacher_subject` DISABLE KEYS */;
/*!40000 ALTER TABLE `teacher_subject` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `temp`
--

DROP TABLE IF EXISTS `temp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `temp` (
  `0109B24394D99FFC95133EEEA` varchar(45) NOT NULL,
  `0750B825176AB9CD54FF7DD02` varchar(45) DEFAULT NULL,
  `4C557F74BAC70A6F7CEE9A9A0` varchar(45) DEFAULT NULL,
  `710F45470D2DCA2913048A84D` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`0109B24394D99FFC95133EEEA`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `temp`
--

LOCK TABLES `temp` WRITE;
/*!40000 ALTER TABLE `temp` DISABLE KEYS */;
INSERT INTO `temp` VALUES ('0026042433C90A88BFFCCC59F','3A4BC095DA2F782004EF76892','A6EE0AE16CD1AD4FB36FC872F','27FF2F121FD3D7A2CA5F2211C'),('0103F7FF457C247D8C7E3FDE5','0109B24394D99FFC95133EEEA','A6EE0AE16CD1AD4FB36FC872F','1DF7CDC7AFED94BCAEEF5C1A8'),('018A462D6AB25CCEECF291FCB','4D1F848F6B2E2A1218ADD2D86','A6EE0AE16CD1AD4FB36FC872F','E325F2D708638417478767BCF'),('02E67530786E67936DB458C25','3BA609B5352CA3A0B888D8BA8','A6EE0AE16CD1AD4FB36FC872F','E51AC7B46D1FD9471548B86C5'),('07115F182821EC043A83B13EC','5861FB188FA3090154CF4088D','A6EE0AE16CD1AD4FB36FC872F','4C557F74BAC70A6F7CEE9A9A0'),('0750B825176AB9CD54FF7DD02','CF4A6371948F34EB29943C8AD','A6EE0AE16CD1AD4FB36FC872F','35FDA253C0CB683755AFC667E'),('07CFF47B063F6153A06E31938','5814AC7C36CF7773388EFDD05','A6EE0AE16CD1AD4FB36FC872F','318F1666F0281C647E3AE9870'),('07EC19DD936F38E42D414118C','710F45470D2DCA2913048A84D','A6EE0AE16CD1AD4FB36FC872F','189838245ABAC12CC3224E9DE'),('09470535B8B8B5573F5EA5572','488F83357770C8966E9E1B000','A6EE0AE16CD1AD4FB36FC872F','C10BAD7D94755BD2A29D3AC0A'),('09A821FFA99B4CACE47812D56','9069128A64AA066869D52C8EC','A6EE0AE16CD1AD4FB36FC872F','E0DEDAEA6F6A09505344359C0'),('0A53BC9EF36C9F4C74973F6D3','ED5767CC1502A04637AC52E76','A6EE0AE16CD1AD4FB36FC872F','7B646149CEA233736849FD336'),('0E8388FB74EAFA842D2927226','699DF294D585BE1AD0E63E8F6','A6EE0AE16CD1AD4FB36FC872F','BFF5A4B9AE9D3DFEC54CEA73D'),('0E8FB58BDBFA3A78AF52B37F4','21295EEABC4E51306FAE3CDFE','A6EE0AE16CD1AD4FB36FC872F','84BC4AB06CB3BFAD668420357'),('133BE5100BC3273E423443FFD','3D7BDFF14C8DEBB65DEEC96CE','A6EE0AE16CD1AD4FB36FC872F','A4836C4F27A5388A265344E33'),('13CC7256D29B2486DFDEF18FD','97B32E3D70B3D34C9B4BFD216','A6EE0AE16CD1AD4FB36FC872F','A07E13C3D76A47B9EA1B1F879'),('1424CDBBBF82E0640280A915A','2B81E233A657465E90BD9DCA7','A6EE0AE16CD1AD4FB36FC872F','A80DA7F8260E07D7C636E3339'),('15983D5D00101EBBB77AB08F8','B20D142F632065D71BF715E22','A6EE0AE16CD1AD4FB36FC872F','C12AEF1088FEC0225B1DB7622'),('164F6FACF1A03489FEA835780','09A5B13B5D333201DFFA5EE3C','A6EE0AE16CD1AD4FB36FC872F','DC4B10D7D88A405C136330812'),('188168EF4228429ACA7AAF4B8','46C277C4EEFA5776181994D07','A6EE0AE16CD1AD4FB36FC872F','2458F2EAB7627119C4A93CED8'),('19C09477BC97E5023BC9A68BB','F6F6A8263C22963591BD3D93E','A6EE0AE16CD1AD4FB36FC872F','11C9DE74800B8237862B8A83B'),('19E17251E2D74BFC51F1CA855','70C9C90DB3A8C195B63431070','A6EE0AE16CD1AD4FB36FC872F','D77465C2FFB1A0727D1C1E890'),('1B85E8C346A7D35269C84BCD2','E552D7465EB38D31327CFDFDB','A6EE0AE16CD1AD4FB36FC872F','73C427DC7BBB00E352BDCC3DD'),('1D7D180E219269E40B13E7767','DADCB49CE30C7BE51CFFD3A67','A6EE0AE16CD1AD4FB36FC872F','B94EDD2C2516D220368B1DD82'),('1D80626D008383CA8BB9189DC','D2CD7A550E7EAB34532A9E9C5','A6EE0AE16CD1AD4FB36FC872F','65EA830D5A503382B2DB146C2'),('1F040D85561C8C5D7A8B00811','D7674C50956E761DE0E85C3B7','A6EE0AE16CD1AD4FB36FC872F','18E02939295CB422FAA63DA39'),('1F9842C4957B20CFF37B935DA','CE45F133B1C1B26A527CBF2E0','A6EE0AE16CD1AD4FB36FC872F','94BEEC3C849F179D4BD7D18D9'),('1FE29829C5891766F391EB053','18A3A3CD61749E621A1F2F561','A6EE0AE16CD1AD4FB36FC872F','E43CF69AA18426D7D771183B9'),('1FEE5F8CDD8D4EE68F7EFE54A','CBBACE32B79600F4C912EE411','A6EE0AE16CD1AD4FB36FC872F','039B6B650DA0A6982CA50B9BF'),('21287CD9D6BA1265F82FE0D46','49EDAB6764C356F3A3EDD13CD','A6EE0AE16CD1AD4FB36FC872F','F4AAD4A5860F964FB1C258FCB'),('220738BF209BC7691884F369A','E79C902158738CC5EF7C24603','A6EE0AE16CD1AD4FB36FC872F','F493E7E8482DE1F52CBB21D6E'),('231E8D5E94238063E787A11EF','7728DD1CCF3A0D8C08E444814','A6EE0AE16CD1AD4FB36FC872F','280BFB3633FD4CA3CA7B4289D'),('2453689EBE13D85D80A88E16E','58274B8954A0A217369039EA1','A6EE0AE16CD1AD4FB36FC872F','2735D0BE792B29DF23AC84F9B'),('2637A33583F5F42DDE5C323E1','F0704B15AF7E50EEEAF0402DD','A6EE0AE16CD1AD4FB36FC872F','CDB4DDC8F2D744277DF10C95E'),('273E8972917D5EE03536137D9','D07D5231A90DEAB8A0528EDE5','A6EE0AE16CD1AD4FB36FC872F','34BDB3AC2F010175725F006D7'),('28CB270527E05C21B4E2E4D7C','B120688E0C1743E6341F0C7C0','A6EE0AE16CD1AD4FB36FC872F','83C32FC756165DD754307CC35'),('2C0398D7971C4EB96742A0A15','63DA50BEEC28B3AD9A804348E','A6EE0AE16CD1AD4FB36FC872F','1918AC9518BF12F91B4F60F41'),('2C308955F4FA7160D37D9058D','06B508910126BC049AE6A0DE8','A6EE0AE16CD1AD4FB36FC872F','C36CCF519C60F723F2590EC66'),('2CB0DA32387ACB80DEE8E19C4','DF523E4257223E3E7D3AC16F9','A6EE0AE16CD1AD4FB36FC872F','DD7FAB6E74A09008902A1F18D'),('2DD932CD7B16F8199E32D6D28','D274B96E096CD67B1C1F29671','A6EE0AE16CD1AD4FB36FC872F','3BB75CC18534C21FBDA877E30'),('30AFBE68551AEB6C5B3B86A1F','549F5C8652D6B986D22DB940F','A6EE0AE16CD1AD4FB36FC872F','F152780840B2E19E29EE9F851'),('30D7EB5083595E76AB7E87609','260722198D196527BF34759EB','A6EE0AE16CD1AD4FB36FC872F','1FAE1F463BACA9695E7595563'),('3125D648A7D60BC1F98245DDD','75EBE8C63D092F62A0F25C031','A6EE0AE16CD1AD4FB36FC872F','D62BBF84FF444827A4E1D0275'),('31EB65E16AEC295B7E79B1DE8','3898E2C0CFE1EB5F7DC281077','A6EE0AE16CD1AD4FB36FC872F','C50A73C207B82C300B23542A2'),('31F7C7277CD0967CFC1B55ECC','EF8911E84D8ECDE2FCB5F2328','A6EE0AE16CD1AD4FB36FC872F','85F7B4E524C08B4456B13F76F'),('336DB0D0E801416B7E82FCDA3','7D4600937FFB7614896556740','A6EE0AE16CD1AD4FB36FC872F','463DE3EDB13DF84B475CCE263'),('3441FF1172D564DCA720DD3C0','F58D9814F8725DE1F80324EEB','A6EE0AE16CD1AD4FB36FC872F','EF6298557B74443AF1AACBA8E'),('34E20EB5B868AA556F76F64D5','6824F5CBD71ED38F18792F080','A6EE0AE16CD1AD4FB36FC872F','2040E94E9C60792885AC20384'),('393C51244681C315E90891703','8AADB644E9877409711A4E778','A6EE0AE16CD1AD4FB36FC872F','019F979CE0D522F4870E543C9'),('39CC1C2D22CADA47E8870B87C','2941765FBAD7D36FAB720AEC0','A6EE0AE16CD1AD4FB36FC872F','4E2AC42D66DF51BB8BF7D6C4A'),('3A17F65ACB406B68E50148AE5','FE80D29966BF5D28F7BCFEBCC','A6EE0AE16CD1AD4FB36FC872F','892468F01613A2540A0407275'),('3A69FF8B2F564448FE6F8FD5C','BDF8634F2EDA7735A569DB9E6','A6EE0AE16CD1AD4FB36FC872F','A66132BBC9F39542654007439'),('3AA2253C2F11CC461D1ABE147','B94B5B4E98E39AD090ADB7461','A6EE0AE16CD1AD4FB36FC872F','D1DF431A5E22DD0FD7B107EAE'),('3AABB5177F71403DFB2A4E099','B9787B32BA40E2545F2E45084','A6EE0AE16CD1AD4FB36FC872F','CB54BB413A4CA596A05F3756E'),('3BE05DFB9E8C3D185F64A0181','606FF8D749BC68C67E1E62BA6','A6EE0AE16CD1AD4FB36FC872F','2A1CD2F54452B700FA5B17596'),('3EA26703EB4292B7FD53B0D20','19CCD187D0F7AA9F12BC0CA82','A6EE0AE16CD1AD4FB36FC872F','82BD0D427EDD82AB3BBD160D5'),('3F1FEA4AA3D783D5092493A04','62BE83E33E1BFAC2FA09C6F4A','A6EE0AE16CD1AD4FB36FC872F','4A0B84B11C5C6B40048B9777A'),('4040F049169992AB12702A55C','1F2C5FAFD110240D1E24AA191','A6EE0AE16CD1AD4FB36FC872F','014C23B9706C1F0D0B31EA37F'),('41295BA94B2C05441B7C30135','1457A0FD7BBE1798766673CAD','A6EE0AE16CD1AD4FB36FC872F','A23AB5D9D8351EF3CEF47062B'),('4211A6E84CE28B069A50FF41B','96259E7B527CD4FF838F1795E','A6EE0AE16CD1AD4FB36FC872F','1DF760B469C91CE2EE94ABD29'),('429793CC3A088F69B4F004FCE','DAFFCB48697C7A3D813170F85','A6EE0AE16CD1AD4FB36FC872F','5E651031BE5D96A851550C1B2'),('44032FEC7DCBAA28E2D51678F','35025152857BD539538025A79','A6EE0AE16CD1AD4FB36FC872F','A3D5B2080F0315CDB0CD0CBF1'),('474F6B370C19B4F8E4CE275A2','F79CB0D5B4768F5BF8FFA6ADA','A6EE0AE16CD1AD4FB36FC872F','D53467B1624C1DECB3112561D'),('481BAABF995BA9DD395DFE8FD','5711EDBF7681EE17F2F0CCE6B','A6EE0AE16CD1AD4FB36FC872F','6233BB2C0BB67E1146D03428B'),('4932C68F7A9F297BAC353D56B','6FB4E9989A851531E082B06A4','A6EE0AE16CD1AD4FB36FC872F','0E0DC9A51DC4D8509410FFFAF'),('4ACE12B643891559B0B062C10','95E03332C2CB32460D2948D73','A6EE0AE16CD1AD4FB36FC872F','3BA72182B2BE0A48067AE0E0F'),('4B4C5703D27CB760B78E5BE14','C4B65B34D8F2C54D91672876D','A6EE0AE16CD1AD4FB36FC872F','B8403086F87E3A7E5162B48F8'),('4D0FE3EF4E4EF9F56FA3487E3','706220CE6DC822FAB82446C8B','A6EE0AE16CD1AD4FB36FC872F','777B9E55BB53779BFA83C0B39'),('4DA6CAD4FB96F1C602922EA48','DE3686ABBFB23C44BF8DBC95B','A6EE0AE16CD1AD4FB36FC872F','A01473C1BC3902F22F6948613'),('4EC7422C71D68D21207FE2BAC','0B5D743307C3E3E7BE21E0BFD','A6EE0AE16CD1AD4FB36FC872F','336C0043589EA8AE98DAC53C2'),('5032E5C65A04B3F9FC2302053','B23AC7D044A6FAE5B0B4F95C7','A6EE0AE16CD1AD4FB36FC872F','8160E413903E79BD3D2BC1362'),('50968C08A8CB1062789B4F6F8','AFA40E66406CB4C877C67F599','A6EE0AE16CD1AD4FB36FC872F','EE22098C167A856A9774F5B47'),('511E1D65406BB364F9187A88F','1CE87B8786FE24BBFBF7EE768','A6EE0AE16CD1AD4FB36FC872F','934A7F8CDBA4A063B916470CC'),('5199AFFB82443C8C623200316','7F18C04D9A313B0C977490FD1','A6EE0AE16CD1AD4FB36FC872F','26F5B01BBA4939E31B437C834'),('5294DA53E306D806C2D7E155F','26A2E98BFA7709B519EC91923','A6EE0AE16CD1AD4FB36FC872F','04A266D39C7FCEB5141E9A4FB'),('52D1B0BABAFAEAA76C5C2AAE6','9A036D7DD766463FEE14ECF09','A6EE0AE16CD1AD4FB36FC872F','3AE19DD6332A528BF0E95DC0D'),('5464DCDCF4F3A4B0D681C37AD','1C7B0E5E2DD57D233C94735D5','A6EE0AE16CD1AD4FB36FC872F','9C03449AB80FC1EE8D063578C'),('54EDA4AF044BC48A82AE563A3','D224476F2D1D571EBC18661B2','A6EE0AE16CD1AD4FB36FC872F','50A97DBF2449D5756C9A48B31'),('5687A9573E52EFC977F1D9E76','E5F6357410ABFEC07279B50CA','A6EE0AE16CD1AD4FB36FC872F','85B3B85AE215FBBE1B5CF1803'),('57B6EB29CA277772489A0D144','A5F22BB705837032AA8CACD8E','A6EE0AE16CD1AD4FB36FC872F','77E497A70C2420DAB53DD55C1'),('586F083509B8F1CB8244E4B45','DDC1F49036310ABD96C3301C5','A6EE0AE16CD1AD4FB36FC872F','A6E5C3C28C37C9825AB7DB3B6'),('592A70CCEDBDD20F51976E3B7','BFE992DC1AF1E29E2A995219B','A6EE0AE16CD1AD4FB36FC872F','29C723CC9409D319C656E7FE9'),('5A7A2215F6ED9F2C83C57C6CF','31DAEEACD220B37BA3FBB3A63','A6EE0AE16CD1AD4FB36FC872F','0F0E9838F395971B8E2621E41'),('5A93E574F2B622B0AB9FD7819','2B33A3CEF5B5D0DBC65C8392B','A6EE0AE16CD1AD4FB36FC872F','38636A405FBC2170E7383F4DB'),('5B89006927B020085929513DB','C914C7E00AFF66150D621E9D5','A6EE0AE16CD1AD4FB36FC872F','35E9354C8285AB3EA5E1F2C6B'),('5C1C05929813DD561E4EDE4BB','4FE5D0A3BB9FFBC391AB9BDCB','A6EE0AE16CD1AD4FB36FC872F','C09B75BF0B3C5C5A766097294'),('5EF28FBF3660947878E75F96B','403BD8EAB2A25ED74ED47BBF8','A6EE0AE16CD1AD4FB36FC872F','7B384C1228E123111F3BD807F'),('602E3759DC46171489E8D1B86','7170134EAB731E08FF1BB9037','A6EE0AE16CD1AD4FB36FC872F','4AF0105E7F852A3619502B925'),('6083156F84B6E26B0892024DF','E05ECA8724F51D2E9802CA73A','A6EE0AE16CD1AD4FB36FC872F','86422619BF0F1F425040D75E4'),('60D7BAB4BB979B4C87CF6C7DB','37055507E38953EF1111F1901','A6EE0AE16CD1AD4FB36FC872F','6CA43115959F32C97FFA50EDC'),('6261464E3DAFBE183EFF76567','B7DC5CB78DC82D2455AE50CB8','A6EE0AE16CD1AD4FB36FC872F','963223DD13E070B11950A3BDF'),('649DCFA9F2D54D7672DAD345E','1C406A5852783044564DF92FF','A6EE0AE16CD1AD4FB36FC872F','0C84DA0127880CA231949F8E6'),('67C705D9813D18C169D81ABDD','A3B5FE006A24D7EB44A610D86','A6EE0AE16CD1AD4FB36FC872F','C7A4D8B1383A5554E1479EF26'),('696D9CA0A872AE355FA8B3ECE','1B341A49B0C4159755EA01A13','A6EE0AE16CD1AD4FB36FC872F','01A63A024023FC1EF1F80A8A8'),('69CB66EAFA89A3907B112BDC0','937D4476FD52AFA9C999F2EEF','A6EE0AE16CD1AD4FB36FC872F','DCF93BA6E240A36010C849929'),('6C823B2CFC32D587BE8FC6FE1','12D808A4ABE6D825E01DD7747','A6EE0AE16CD1AD4FB36FC872F','58354A818E607911B2A542584'),('6E44F1D4A2E282CAD945D899C','42ABC7739F0D3BDE80F23275C','A6EE0AE16CD1AD4FB36FC872F','2AEC4765299BD91BAABB32BFB'),('6FE3C015FBE9AB2860652662C','53BCD0B8E70A853B954797141','A6EE0AE16CD1AD4FB36FC872F','A57D4DA7C058C48BD38DF2BA0'),('70E1F8F04B70F2D1A5D8BF932','AC289FABC04CB23D164EF16FA','A6EE0AE16CD1AD4FB36FC872F','92DD36CF52CA0655FE6FD3575'),('72181EB62393A70D44C025798','7D9A5C61DC9541D558D5FEC56','A6EE0AE16CD1AD4FB36FC872F','518803F14BA4ADF9B89883DBD'),('723CD47EBF67BA8A82D8C3DE9','5A8C9C0A07EA9B9B14A1AFD50','A6EE0AE16CD1AD4FB36FC872F','BCEE8A103D074A3F91DF2F089'),('72C9F31159242D277774D92EB','0557BA60AB4F85739D4A01631','A6EE0AE16CD1AD4FB36FC872F','AB6D22B3A85DC0EFB9BA713EC'),('73C24BAB8EA93C80EBBF7E4F6','EB4A53CBDE5B7894DE74BFE5C','A6EE0AE16CD1AD4FB36FC872F','0FAFF4EEAC27E84BF30B9D0E2'),('741830DEBC432DCAD770F6568','37ABF8C0BDFF2DE8E8A1FFEC7','A6EE0AE16CD1AD4FB36FC872F','297AB16419CCFF568EDC00F41'),('74791EA657A5C9FED54511202','FF4198359E2ECD0853A091748','A6EE0AE16CD1AD4FB36FC872F','1BC92BD56C787D12F99D76FDE'),('767201677B167517BEA2EEA72','4B8DEC143E05CD163752E9152','A6EE0AE16CD1AD4FB36FC872F','4A300E6F384931C70D05DA69F'),('78CECF4BFFA33D79059B1C3C8','3D938D95244F50AFD748FC8F6','A6EE0AE16CD1AD4FB36FC872F','661E1AFB5F12BBEB25E60E1CC'),('7A6A7C7D42A1F24E6F1AEC3B0','5638BCE66D1FDA22E0F2F4562','A6EE0AE16CD1AD4FB36FC872F','BD59BF43B2E85F9947100D695'),('7AAF6F22E5F6753892FA227FB','12AC0CC2D3BDCAC54402D7CFF','A6EE0AE16CD1AD4FB36FC872F','AE28D920CB8F7485466877D6A'),('7B21631F556915824334F079E','FE022CEA199EB3638A66050DB','A6EE0AE16CD1AD4FB36FC872F','B41F1B6927FB4E6FF998C3FA0'),('7C8095361DF4508FF8E7A5535','7C6324636FD067169220313A2','A6EE0AE16CD1AD4FB36FC872F','E0CFCFC52ED3F4257219F43F7'),('7D35AE5799CF7D9D97348482B','94660E176CBC9247A35322EC5','A6EE0AE16CD1AD4FB36FC872F','4EF4499FFE00052A7E0A9B940'),('7E92F5971161DE13DD3D4ADD5','06E4C2B05C0C8ECB76C5A3A44','A6EE0AE16CD1AD4FB36FC872F','9ADA08E43ACA6CF00EF1325F7'),('7EA63B581E974C1A92035AE20','974230888B7A7AF5EBCCE88E2','A6EE0AE16CD1AD4FB36FC872F','792F59C6AA6A24BF92C0FC203'),('825030EEDE91F904BA5CCFD1F','2875FD5FADFEE33D4AEBCD4A5','A6EE0AE16CD1AD4FB36FC872F','62E74A477AAB74F8E69D8025A'),('85CD866372D218BEFA980E9BC','45E0D9701F9FB7D08B2721A99','A6EE0AE16CD1AD4FB36FC872F','2C20C929730340CA5043072E3'),('86415C12F0E135DE591A39578','16BB3B611816BB46A0D5D3D3E','A6EE0AE16CD1AD4FB36FC872F','9821E8A07157BA97030C0A153'),('86BE6EB9CFD85F892AFE4D44F','C35C328D90AAFC22707360B6A','A6EE0AE16CD1AD4FB36FC872F','F80ACC6D6A816D29788374B36'),('875B0E404389F28C0DE7AFEA7','C07A1EE3CCAC8415565A7DD1C','A6EE0AE16CD1AD4FB36FC872F','943A60A86D76B5B34DEB7498D'),('88CB9EA7E90E06BB1BF5E86F7','C46ABE509540ABAAB4BC41EAB','A6EE0AE16CD1AD4FB36FC872F','0FD2A7114C8B22F874E22ED17'),('891C7EC7AF98BA6507B6A02FA','CA6FC31429F29D69EBEF6413C','A6EE0AE16CD1AD4FB36FC872F','99D4FFAA3156F570E6B15E9CC'),('8EC897D783A139A8A39244489','04A7E85206197DDE8AEEA9A69','A6EE0AE16CD1AD4FB36FC872F','7165B99109199FFD5006B1CB7'),('8FD2469F2E0A684F43BDD9B36','B110A7680DDF14926D4FAC6C3','A6EE0AE16CD1AD4FB36FC872F','27B704EC2CFC32DFEF91CA9D7'),('913E2C02006C6F8D25E3C18BF','6E1BEAB2EC39FB8B659DEF207','A6EE0AE16CD1AD4FB36FC872F','781DCFE1D351F5CEBFE75A575'),('91C9752914D1B773F9DF6560B','714E6BED910794C64A57564D9','A6EE0AE16CD1AD4FB36FC872F','8CB4565A042D14CE1DF92B12A'),('928B3E44A791274DBF17B177D','A5A0C8F6796DE5279FE40854B','A6EE0AE16CD1AD4FB36FC872F','11E261D09C9790910ECC3AF90'),('94504BFD47EF89C79478BFA14','D680C736F48DC2B14C577C986','A6EE0AE16CD1AD4FB36FC872F','4245E4868C6CA13C9632CF7C4'),('976EBA7BD7C65350F429D9F2B','6E4830D06F861D7D3E59ADD4A','A6EE0AE16CD1AD4FB36FC872F','C8E4775EC3AB8F99F99007ABD'),('9B65B36F9CDA6EBA9D1C58AE5','F02326C5C8E61E9C81D3E6476','A6EE0AE16CD1AD4FB36FC872F','0A02EFFD2FF6841A68D6BE025'),('9C29166F9DAA755FB1BE2DB40','70705CB2B32E079E649D0E9CA','A6EE0AE16CD1AD4FB36FC872F','2FCC73F82770A7CD5AD2FC6CA'),('9C71D1E067035835A28B60FDA','4ED14B024E1EF588BA92C4C0D','A6EE0AE16CD1AD4FB36FC872F','E1507CA962A4D1F54A4EFCABE'),('9F13B93FFA4833C1435724B11','62910E74E4EA1859B510BACAE','A6EE0AE16CD1AD4FB36FC872F','720A118947713469BC102EE10'),('9FC99FB28D263B399A0C9D561','6A4F66D0C0A0F8D69F7A98FE5','A6EE0AE16CD1AD4FB36FC872F','D8ACFC666ADAA433FA7019B6B'),('A15FEBAA876A21E9EFB21A438','33EB2B1C2DE2514276CC80BBB','A6EE0AE16CD1AD4FB36FC872F','5A59C39698C368F7662D3A8F6'),('A2F654A386AC3846A2944A31F','6BB0FD67B89C52FA055535C00','A6EE0AE16CD1AD4FB36FC872F','AA75DB09C15D813758BCE4EA4'),('A3A0F85CF951C6C98507C0F68','69A827019D5CF461F7444D13C','A6EE0AE16CD1AD4FB36FC872F','FF9612F9BEA75D550C929C209'),('A4928433C18683A63F539AA03','6959FD74D67EDBB0021B6D641','A6EE0AE16CD1AD4FB36FC872F','71EF8D9E6E9D4F901D9D824C7'),('A5141937DD42FF2A069920650','9E17964CAEEAF6EE647D0B5A6','A6EE0AE16CD1AD4FB36FC872F','D7AC9F2002816BBC986102BD7'),('A7BAD2033449E19BBFF253B60','2791411D13C037B8F30F69DF9','A6EE0AE16CD1AD4FB36FC872F','72F9DD5ACDB3EF3CB00F82E7F'),('ADA6043A121E8D66CF632C74C','30BEB366E876C3A75F2AE01CA','A6EE0AE16CD1AD4FB36FC872F','5C47803B609D1F747DAE74752'),('B2429D12CD631F3E43F74B5A9','DE9CB84E633683DB4CD4EB2A2','A6EE0AE16CD1AD4FB36FC872F','196E6956F0A160E1C5C7A58F3'),('B3A84D81F768EB9297FDAA618','B76320F6C061D94FD9ED7AC34','A6EE0AE16CD1AD4FB36FC872F','6F534A757A9AAC1F2974ED7EB'),('B42EA365C631BA46E0F89280B','BB18BB78A53B2182BBAFA36BD','A6EE0AE16CD1AD4FB36FC872F','9F88EC3FD340C41D609451C58'),('B902A2B4555057692DCAAF764','043A5C5CEF35F0B679D1D20B9','A6EE0AE16CD1AD4FB36FC872F','DE3D9434999BB743141DE4236'),('BA2CF48A3FF08750B43EE16E8','F0A1FCC884588ADD914989B93','A6EE0AE16CD1AD4FB36FC872F','494040872DF1FEE27B1B46E77'),('BDFAB225396127A85A6C6D85D','41A511BC0330993E438F05742','A6EE0AE16CD1AD4FB36FC872F','288E2351F6A62BFB6FE7FC2C6'),('BE62E40EECCACD9183F55A179','14364C602B1542A9F82A3A004','A6EE0AE16CD1AD4FB36FC872F','0589D6BE667614F247003FC96'),('BF677AEDDA4EA495751074EB5','55CADD5D3DACFD669C29C5B55','A6EE0AE16CD1AD4FB36FC872F','100EDBE8CCC64F329B62766DE'),('BF78D2571175A0B3C1FC25DBD','90E8026631DAAAAE85F089981','A6EE0AE16CD1AD4FB36FC872F','1ED3B1BBF050E7B97E7A7AF02'),('C4D7674DA0524E4E43B4F4753','B919CE991E3F48C061A84A90E','A6EE0AE16CD1AD4FB36FC872F','44139C529A3FC8846B4983E74'),('C504C3CE08683226140635948','B9CA23B3F0B94EDC324A4E728','A6EE0AE16CD1AD4FB36FC872F','20809F3F58E00A8C5E23BDBF5'),('C6CB8A93E7F3C49195C9832C8','A2D02D259E678214AFFCC1D56','A6EE0AE16CD1AD4FB36FC872F','5FAAA4B390E1ED6F0CA3D6E3F'),('C74F21D18FC6344CD5C9D5855','EAEC490AC50DC9510D65AC9A7','A6EE0AE16CD1AD4FB36FC872F','26B3E11C67004415F1044D345'),('C85EA09E58E40C40272C585CD','693B6E70BD5D0A0845F998420','A6EE0AE16CD1AD4FB36FC872F','E4E04ACC9611468C227B974AD'),('C8A2C5B3626D77BFA6A8E9BAD','BAE921724DF92DFA1125274B2','A6EE0AE16CD1AD4FB36FC872F','1FD13256414FC2246487D7B6D'),('C9B8EEF6D080F1B334308871F','5A5D6EA539F71D5E4DF9B1B4E','A6EE0AE16CD1AD4FB36FC872F','55A0AB751C2E786FA575A8895'),('CC1D1CEC68D9AAB43EAE9684B','7D9AB022F92FF18FA62E75170','A6EE0AE16CD1AD4FB36FC872F','450EC7C31B1C5496FC21C63A8'),('CC8D1417857425E26D6F229A2','F7D1DE1193037592C05DDDB86','A6EE0AE16CD1AD4FB36FC872F','B2C799A6D8BF701AF5CF3DC6E'),('D22157AB30A76336D0AEE13FA','81F24AFBF97ED5FAD85DE7C18','A6EE0AE16CD1AD4FB36FC872F','7394A589CF4FEC6EC7088B879'),('D2B4041B6F12BE6A6889E2FE6','3B811B79942DAEB9252D702A7','A6EE0AE16CD1AD4FB36FC872F','E9581CD9303D070621A143881'),('D47C8D4DD7617E0B4AB79506D','FEA15D4CD7E098B9571094188','A6EE0AE16CD1AD4FB36FC872F','1292E12DD02271A11819F498D'),('D52DBB8BC92FA5CA398BC8385','CD97F47DFCE7A099EBC9EBADE','A6EE0AE16CD1AD4FB36FC872F','C181BC4FB60610DEF1B21F45D'),('D6DA669A459797131430B065B','E9D432B5859E0C55859E1CCB7','A6EE0AE16CD1AD4FB36FC872F','10EAC9FD481CF9EB2B3A421E3'),('D83C3287A2D99A378819CFC8C','061D2DF94854E41F4EC05F448','A6EE0AE16CD1AD4FB36FC872F','89A6AE2ED7D5CF75DE6B7DECA'),('DD59860770DDC9A228DF78DFF','E4F659E66E0ED7B3C911D8DEB','A6EE0AE16CD1AD4FB36FC872F','48EBC0C92F7DDEAD980893490'),('DD9A7FD1FC24B9BA08AE0669E','2F608D55095BD5C3C3B07ABD7','A6EE0AE16CD1AD4FB36FC872F','B961317E3930545F6941DFFEA'),('DDCE65391526BF87FCEEC3912','A049F85ABA9FCEC2F46A73B11','A6EE0AE16CD1AD4FB36FC872F','583B9D2BEB1E27576BB661421'),('E1269A974981B36486635D844','FBF2273F24C093EBB85F9E44B','A6EE0AE16CD1AD4FB36FC872F','B3216988D956213537B9E9152'),('E2323B923A9D5F1D323BF3F35','538C1CA64358CB80A0AF8C596','A6EE0AE16CD1AD4FB36FC872F','D172ABEA122490735932E5795'),('E38B2D8798795AA3F8094EB8F','59FA791FAA878449476867FEF','A6EE0AE16CD1AD4FB36FC872F','7E78EE1F9003A77C1231F526B'),('E40CB9667E2B31F38BE861F9D','ADCB14DF042581694474E87CA','A6EE0AE16CD1AD4FB36FC872F','F339AF0F47A34AAB834B8B8F2'),('E53BE1578D1BCEBA3BC9F18AE','89C52AF32325D01D4A15194E4','A6EE0AE16CD1AD4FB36FC872F','37B00D823521AA89FB9B3AFD8'),('E6AB7DDE9ABAC163AF5026D37','F74967DB2AD346EC53D50ED9B','A6EE0AE16CD1AD4FB36FC872F','84777579CF9E997B3659720D7'),('E6E1A4C761B3B9F555C7E3684','D60C48198C39042D627FF5073','A6EE0AE16CD1AD4FB36FC872F','6AD023FFE660CB86969530C86'),('E88D449DBF6D973627C235458','591021EF964B9A064941BA173','A6EE0AE16CD1AD4FB36FC872F','3ADEDEE729B6A6764766326D2'),('E8A6BCC8A5F64C51B9737A2BE','58075D39B5286BD96E79CEA74','A6EE0AE16CD1AD4FB36FC872F','381E041706D8C2F74A25B5D51'),('EA1F6150A27E6B9B9B75B2C32','A741A998D7B5635EEEE7EA05E','A6EE0AE16CD1AD4FB36FC872F','44AEFF67E8196CEE4CDD53C38'),('EB702C251DE7480DE313FAFEA','9F47606F316CC6E9A0441EF43','A6EE0AE16CD1AD4FB36FC872F','03A45E900E36602BA97971902'),('EC4739D0E7E49A681A03BBFC9','C2ACD38E03863E88FEEC947E7','A6EE0AE16CD1AD4FB36FC872F','55BDCD7B68CDA431C4417D6BC'),('ECC2803C3889B09A26832F0EA','C6A54898FDCE3E2137A6782BA','A6EE0AE16CD1AD4FB36FC872F','D9C778AADC81FD497547768B3'),('ECDCFF4BCE0A147741EBC2846','48CBAA66B80DCF98045D35213','A6EE0AE16CD1AD4FB36FC872F','5F67FD3B643426198082609A4'),('EE919B6AE2CBE71C59BF865E7','BE9420BC424982C6C71E09E08','A6EE0AE16CD1AD4FB36FC872F','C0A5644D0723268480E55B992'),('EE96D4EA6D893701E971AC36D','1F14F7AECA3D03AA696F54604','A6EE0AE16CD1AD4FB36FC872F','A20775F2C81669F2C66912DC6'),('F02143211607C2C031F9D40B7','3392351F9696CA21A0DD014AA','A6EE0AE16CD1AD4FB36FC872F','489E1F9E238C521B86750AC8F'),('F086F5064B1EEC4A64891C9DB','6B4F634A126763D786D8E174E','A6EE0AE16CD1AD4FB36FC872F','E40C6B808A84DA7A25053A098'),('F171252A2578AB27A4E6E8A74','54F5AD980AF7C2F61E49331DD','A6EE0AE16CD1AD4FB36FC872F','22DF455BAF3B4E97ABC408C99'),('F2595643C4F4ADB6EA693E173','81739A6B37DE39CB6A1731612','A6EE0AE16CD1AD4FB36FC872F','967B991D5F613F454C4C3CE0E'),('F47DD98842855DC7AF10A9D07','B58999F91B21A42D1C00A0682','A6EE0AE16CD1AD4FB36FC872F','33862FE523767B984658F4B75'),('F4E81484712F4B09CE3B7C054','27F5508E1E6F70EFFE98125AA','A6EE0AE16CD1AD4FB36FC872F','4D193276BE4B0C6DE135C200D'),('F4EDFF97DA909D7FB6D3F6AE0','711C58C0718342D000B37E984','A6EE0AE16CD1AD4FB36FC872F','5BA061414E763750B5F33C950'),('F6A4FAC43462C7A2F5476FEC3','F672CFA284311CB273AB59E9B','A6EE0AE16CD1AD4FB36FC872F','173DC9F83B79E29CD63B0EB37'),('F72D07F6D23C4DBC07ED78315','2AD8373F4571FA2F58FFDEDCC','A6EE0AE16CD1AD4FB36FC872F','E06DB03E9B6AA346060BE18EC'),('F7462F32F230CC449B11F3CF1','B37007A00BC0A65EBF44C52DB','A6EE0AE16CD1AD4FB36FC872F','17221C19F8FD88537100991EB'),('FA282B2BACFE945ACFCC54A47','EAD1D870B9CB92484E9D8F94F','A6EE0AE16CD1AD4FB36FC872F','7C3303D74C9B2B94DBC85A675'),('FA39C9C76D37F1603CDBD8328','9C795E2C55735D5EF838211E5','A6EE0AE16CD1AD4FB36FC872F','675F964D3E0704BF1129E64AA'),('FA64B73626FB201A367EEBA86','B08D2CF2AD0625006BA7D8115','A6EE0AE16CD1AD4FB36FC872F','03F9A621234ACA25344944E2A'),('FB58597C8506981477BE7E4C0','4993DCB2042B3F8A0515BBC27','A6EE0AE16CD1AD4FB36FC872F','566A31080884B8D77032276A7'),('FC511C8771F22B8C4D1F303EC','596220BA24378EC995AFB48D1','A6EE0AE16CD1AD4FB36FC872F','AEDC4396318A84CF59A0EBBDB'),('FE06C6346A73B66F8496261BB','68FD9A2A2B37D3A2B2B81DF7B','A6EE0AE16CD1AD4FB36FC872F','5F3708DC079891F77E1A3C2EF'),('FF3279A4245741C4F4AED5E19','386B7BF866510A9659A3EA155','A6EE0AE16CD1AD4FB36FC872F','66457849B1AC13E2E0EB73952');
/*!40000 ALTER TABLE `temp` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `term`
--

DROP TABLE IF EXISTS `term`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `term` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `year` int(11) NOT NULL,
  `number` int(11) NOT NULL,
  `opening_date` date DEFAULT NULL,
  `closing_date` date DEFAULT NULL,
  PRIMARY KEY (`auto_id`)
) ENGINE=InnoDB AUTO_INCREMENT=163 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `term`
--

LOCK TABLES `term` WRITE;
/*!40000 ALTER TABLE `term` DISABLE KEYS */;
INSERT INTO `term` VALUES (10,2000,1,NULL,NULL),(11,2000,2,NULL,NULL),(12,2000,3,NULL,NULL),(13,2001,1,NULL,NULL),(14,2001,2,NULL,NULL),(15,2001,3,NULL,NULL),(16,2002,1,NULL,NULL),(17,2002,2,NULL,NULL),(18,2002,3,NULL,NULL),(19,2003,1,NULL,NULL),(20,2003,2,NULL,NULL),(21,2003,3,NULL,NULL),(22,2004,1,NULL,NULL),(23,2004,2,NULL,NULL),(24,2004,3,NULL,NULL),(25,2005,1,'2005-01-07','2005-04-06'),(26,2005,2,'2005-05-10','2005-07-12'),(27,2005,3,'2005-08-02','2005-11-00'),(28,2006,1,'2006-01-09','2006-04-05'),(29,2006,2,'2006-05-02','2006-07-22'),(30,2006,3,'2006-08-08','2006-11-27'),(31,2007,1,'2007-01-16','2007-04-08'),(32,2007,2,'2007-05-00','2007-07-03'),(33,2007,3,'2007-08-07','2007-11-24'),(34,2008,1,'2008-01-08','2008-04-14'),(35,2008,2,'2008-05-23','2008-07-17'),(36,2008,3,'2008-08-21','2008-11-04'),(37,2009,1,'2009-01-02','2009-04-21'),(38,2009,2,'2009-05-20','2009-07-01'),(39,2009,3,'2009-08-23','2009-11-22'),(40,2010,1,'2010-01-04','2010-04-12'),(41,2010,2,'2010-05-22','2010-07-23'),(42,2010,3,'2010-08-07','2010-11-21'),(43,2011,1,'2011-01-21','2011-04-18'),(44,2011,2,'2011-05-14','2011-07-03'),(45,2011,3,'2011-08-09','2011-11-06'),(46,2012,1,'2012-01-01','2012-04-18'),(47,2012,2,'2012-05-23','2012-07-02'),(48,2012,3,'2012-08-16','2012-11-24'),(49,2013,1,'2013-01-24','2013-04-24'),(50,2013,2,'2013-05-00','2013-07-00'),(51,2013,3,'2013-08-10','2013-11-03'),(52,2014,1,'2014-01-19','2014-04-17'),(53,2014,2,'2014-05-13','2014-07-06'),(54,2014,3,'2014-08-09','2014-11-08'),(55,2015,1,'2015-01-07','2015-04-08'),(56,2015,2,'2015-05-09','2015-07-07'),(57,2015,3,'2015-08-17','2015-11-23'),(58,2016,1,NULL,NULL),(59,2016,2,NULL,NULL),(60,2016,3,NULL,NULL),(61,2017,1,NULL,NULL),(62,2017,2,NULL,NULL),(63,2017,3,NULL,NULL),(64,2018,1,NULL,NULL),(65,2018,2,NULL,NULL),(66,2018,3,NULL,NULL),(67,2019,1,NULL,NULL),(68,2019,2,NULL,NULL),(69,2019,3,NULL,NULL),(70,2020,1,NULL,NULL),(71,2020,2,NULL,NULL),(72,2020,3,NULL,NULL),(73,2021,1,NULL,NULL),(74,2021,2,NULL,NULL),(75,2021,3,NULL,NULL),(76,2022,1,NULL,NULL),(77,2022,2,NULL,NULL),(78,2022,3,NULL,NULL),(79,2023,1,NULL,NULL),(80,2023,2,NULL,NULL),(81,2023,3,NULL,NULL),(82,2024,1,NULL,NULL),(83,2024,2,NULL,NULL),(84,2024,3,NULL,NULL),(85,2025,1,NULL,NULL),(86,2025,2,NULL,NULL),(87,2025,3,NULL,NULL),(88,2026,1,NULL,NULL),(89,2026,2,NULL,NULL),(90,2026,3,NULL,NULL),(91,2027,1,NULL,NULL),(92,2027,2,NULL,NULL),(93,2027,3,NULL,NULL),(94,2028,1,NULL,NULL),(95,2028,2,NULL,NULL),(96,2028,3,NULL,NULL),(97,2029,1,NULL,NULL),(98,2029,2,NULL,NULL),(99,2029,3,NULL,NULL),(100,2030,1,NULL,NULL),(101,2030,2,NULL,NULL),(102,2030,3,NULL,NULL),(103,2031,1,NULL,NULL),(104,2031,2,NULL,NULL),(105,2031,3,NULL,NULL),(106,2032,1,NULL,NULL),(107,2032,2,NULL,NULL),(108,2032,3,NULL,NULL),(109,2033,1,NULL,NULL),(110,2033,2,NULL,NULL),(111,2033,3,NULL,NULL),(112,2034,1,NULL,NULL),(113,2034,2,NULL,NULL),(114,2034,3,NULL,NULL),(115,2035,1,NULL,NULL),(116,2035,2,NULL,NULL),(117,2035,3,NULL,NULL),(118,2036,1,NULL,NULL),(119,2036,2,NULL,NULL),(120,2036,3,NULL,NULL),(121,2037,1,NULL,NULL),(122,2037,2,NULL,NULL),(123,2037,3,NULL,NULL),(124,2038,1,NULL,NULL),(125,2038,2,NULL,NULL),(126,2038,3,NULL,NULL),(127,2039,1,NULL,NULL),(128,2039,2,NULL,NULL),(129,2039,3,NULL,NULL),(130,2040,1,NULL,NULL),(131,2040,2,NULL,NULL),(132,2040,3,NULL,NULL),(133,2041,1,NULL,NULL),(134,2041,2,NULL,NULL),(135,2041,3,NULL,NULL),(136,2042,1,NULL,NULL),(137,2042,2,NULL,NULL),(138,2042,3,NULL,NULL),(139,2043,1,NULL,NULL),(140,2043,2,NULL,NULL),(141,2043,3,NULL,NULL),(142,2044,1,NULL,NULL),(143,2044,2,NULL,NULL),(144,2044,3,NULL,NULL),(145,2045,1,NULL,NULL),(146,2045,2,NULL,NULL),(147,2045,3,NULL,NULL),(148,2046,1,NULL,NULL),(149,2046,2,NULL,NULL),(150,2046,3,NULL,NULL),(151,2047,1,NULL,NULL),(152,2047,2,NULL,NULL),(153,2047,3,NULL,NULL),(154,2048,1,NULL,NULL),(155,2048,2,NULL,NULL),(156,2048,3,NULL,NULL),(157,2049,1,NULL,NULL),(158,2049,2,NULL,NULL),(159,2049,3,NULL,NULL),(160,2050,1,NULL,NULL),(161,2050,2,NULL,NULL),(162,2050,3,NULL,NULL);
/*!40000 ALTER TABLE `term` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `user`
--

DROP TABLE IF EXISTS `user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) DEFAULT NULL,
  `password` varchar(45) DEFAULT NULL,
  `type` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`auto_id`)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `user`
--

LOCK TABLES `user` WRITE;
/*!40000 ALTER TABLE `user` DISABLE KEYS */;
INSERT INTO `user` VALUES (14,'a','a','administrator');
/*!40000 ALTER TABLE `user` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `vote_head`
--

DROP TABLE IF EXISTS `vote_head`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `vote_head` (
  `auto_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) DEFAULT NULL,
  `priority` varchar(45) DEFAULT NULL,
  `amount` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`auto_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `vote_head`
--

LOCK TABLES `vote_head` WRITE;
/*!40000 ALTER TABLE `vote_head` DISABLE KEYS */;
/*!40000 ALTER TABLE `vote_head` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping routines for database 'school'
--
/*!50003 DROP FUNCTION IF EXISTS `computeTerm` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `computeTerm`(p_term_auto_id INT, p_value INT) RETURNS int(11)
BEGIN

declare l_year INT;
declare l_number INT;
declare l_terms int;
declare l_term_auto_id INT;

SELECT `year`,`number` FROM `term` WHERE `auto_id`=p_term_auto_id INTO l_year,l_number;
SET l_terms=p_value+l_number-1;
SET l_year=l_year+TRUNCATE((l_terms)/3,0);
SET l_number=MOD((l_terms),3)+1;

SELECT `auto_id` FROM `term` WHERE `year`=l_year AND `number`=l_number INTO l_term_auto_id;
 RETURN l_term_auto_id ;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `getClass` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `getClass`(p_student_auto_id INT,p_stream_auto_id INT,p_class_of INT,p_exam_auto_id INT,p_term_auto_id INT,p_year INT) RETURNS int(11)
BEGIN

DECLARE l_class INT;
DECLARE l_class_of INT;
DECLARE l_year INT;

IF(p_exam_auto_id IS NOT NULL AND p_exam_auto_id!=0) THEN
SELECT `year` FROM `term` WHERE `auto_id`=(SELECT `term_auto_id` FROM `exam` WHERE `auto_id`=p_exam_auto_id) INTO l_year;
ELSEIF(p_term_auto_id IS NOT NULL AND p_term_auto_id!=0) THEN 
SELECT `year` FROM `term` WHERE `auto_id`=p_term_auto_id INTO l_year;
else
SET l_year=p_year;
END IF;

IF(p_student_auto_id IS NOT NULL AND p_student_auto_id!=0) THEN 
SELECT  `class_of` FROM `class_stream` WHERE `auto_id` = (SELECT `class_stream_auto_id` FROM `students` WHERE `auto_id`=p_student_auto_id )INTO l_class_of;
ELSEIF (p_stream_auto_id IS NOT NULL AND p_stream_auto_id!=0) THEN 
SELECT  `class_of` FROM `class_stream` WHERE `auto_id` = p_stream_auto_id INTO l_class_of;
else
SET l_class_of=p_class_of;
END IF;


SET l_class=l_year-l_class_of+4;
IF(l_class<1 OR l_class>4) THEN SET l_class=null; END IF;
RETURN l_class;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `getVparam` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `getVparam`(i INT) RETURNS varchar(100) CHARSET utf8
BEGIN
CASE i
	WHEN 0 THEN
		RETURN @vparam;
      WHEN 1 THEN
		RETURN @vparam1;
	 WHEN 2 THEN
		RETURN @vparam2;
	 WHEN 3 THEN
		RETURN @vparam3;
	ELSE RETURN null;
END CASE;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Markable` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `Markable`(p_student_auto_id INT, p_exam_auto_id INT,p_subject_code INT) RETURNS tinyint(4)
BEGIN
DECLARE l_class_of INT;
DECLARE l_exam_year INT;
DECLARE l_class INT;
SET l_class_of=(SELECT `class_of` FROM `class_stream` WHERE `auto_id`=(SELECT `class_stream_auto_id` FROM `students` WHERE `auto_id`=p_student_auto_id));
SET l_exam_year=(SELECT `term`.`year` FROM `term` WHERE `term`.`auto_id` = (SELECT `exam`.`term_auto_id` FROM `exam` WHERE `exam`.`auto_id`=p_exam_auto_id));
SET l_class=l_exam_year-l_class_of+4;

IF(l_class<1 OR l_class>4) THEN RETURN false;END IF;
IF((SELECT `exam_auto_id` FROM `exam_class` WHERE  `exam_auto_id`=p_exam_auto_id AND `featured_class`=l_class) is NULL) THEN RETURN FALSE; END IF;

IF(l_class=1 OR l_class=2) THEN
begin
IF((SELECT `code` FROM `done_subject` WHERE  `code`=p_subject_code AND `is_junior_compulsory`=true) is NOT NULL) THEN RETURN TRUE; END IF;
IF((SELECT `student_auto_id` FROM `junior_subject_selection` WHERE  `student_auto_id`=p_student_auto_id AND `subject_code`=p_subject_code) is NOT NULL) THEN RETURN TRUE; END IF;
END;
else
BEGIN
IF((SELECT `code` FROM `done_subject` WHERE  `code`=p_subject_code AND `is_senior_compulsory`=true) is NOT NULL) THEN RETURN TRUE; END IF;
IF((SELECT `student_auto_id` FROM `senior_subject_selection` WHERE  `student_auto_id`=p_student_auto_id AND `subject_code`=p_subject_code) is NOT NULL) THEN RETURN TRUE; END IF;
END;
END IF;
RETURN FALSE;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `NextTermsFees` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `NextTermsFees`(req_term_auto_id INT,req_student_auto_id INT) RETURNS int(11)
BEGIN
DECLARE next_term_fees INT;
DECLARE next_term_auto_id INT;
DECLARE class INT;
SELECT `auto_id` from `term` WHERE `year`>(SELECT `year` from `term` WHERE `auto_id` =req_term_auto_id) 
OR `number`>(SELECT `number` from `term` WHERE `auto_id` =req_term_auto_id) 
ORDER BY `year` ASC,`number` ASC LIMIT 1   INTO next_term_auto_id;
SELECT YEAR(CURDATE())-`class_of`+4 FROM `student_basic_info` WHERE `auto_id`=req_student_auto_id INTO class;
SELECT  `fee_amount`.`amount` FROM `fee_amount`   WHERE `term_auto_id`=next_term_auto_id 
AND `form`=class
INTO next_term_fees;
RETURN next_term_fees;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `stream_dfi_ufi` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `stream_dfi_ufi`(forward TINYINT,in_value VARCHAR(100)) RETURNS varchar(100) CHARSET utf8
BEGIN
DECLARE l_class_of INT;
DECLARE l_class INT;
DECLARE l_name VARCHAR(45);
DECLARE index_of INT;
DECLARE curr_year INT;
SET curr_year=YEAR(CURDATE());
if(forward) then 
begin
	SELECT `class_of`,`stream_name` FROM `class_stream` WHERE `auto_id`=in_value INTO l_class_of,l_name; 
	if(l_class_of BETWEEN curr_year AND curr_year+3) then
	SET l_class=curr_year-l_class_of+4;
	else
	SET l_class=l_class_of;
	end if;
    return CONCAT(l_class,' ',l_name);
end;
 
else 
begin
	SET index_of=LOCATE(' ',in_value);
	SET l_class=SUBSTRING_INDEX(in_value,' ',1);
	SET l_name=SUBSTRING_INDEX(in_value,' ',-1);
	if(l_class<=1 AND l_class>= 4) then
	SET l_class_of=curr_year+ 4- l_class;
	else 
	SET l_class_of=l_class;
	end if;
	return (SELECT `auto_id` FROM `class_stream` WHERE `class_of`= l_class_of AND `stream_name`=l_name);
end;
end if;
RETURN 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `teacher_dfi_ufi` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `teacher_dfi_ufi`(forward TINYINT,in_value VARCHAR(100)) RETURNS varchar(100) CHARSET utf8
BEGIN
DECLARE l_name VARCHAR(45);
DECLARE l_code INT;
DECLARE index_of INT;
if(forward) then 
begin
	SELECT `code`,`name` FROM `teacher` WHERE `auto_id`=in_value INTO l_code,l_name;
    return CONCAT(l_code,' ',l_name);
end;
 
else 
begin
	SET index_of=LOCATE(' ',in_value);
	SET l_code=SUBSTRING_INDEX(in_value,' ',1);
	SET l_name=SUBSTRING(in_value,index_of+1);
	return (SELECT `auto_id` FROM `teacher` WHERE `name`=l_name);
end;
end if;
RETURN 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `TermFeeBalance` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `TermFeeBalance`(req_term_auto_id INT,req_student_auto_id INT) RETURNS int(11)
BEGIN
DECLARE balance INT;
SELECT `closing_date` FROM `term` WHERE `auto_id`=req_term_auto_id INTO @as_at;
SELECT IFNULL(SUM(`fee_transaction`.`amount`),0) AS balance  FROM 
`fee_transaction` WHERE `fee_transaction`.`student_auto_id`= req_student_auto_id
AND `fee_transaction`.`date` <= @as_at  INTO balance;
RETURN balance;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `term_dfi_ufi` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `term_dfi_ufi`(forward TINYINT,in_value VARCHAR(100)) RETURNS varchar(100) CHARSET utf8
BEGIN
DECLARE l_year VARCHAR(45);
DECLARE l_number INT;
if(forward) then 
begin
	SELECT `year`,`number` FROM `term` WHERE `auto_id`=in_value INTO l_year,l_number;
    return CONCAT('Term ',l_number,' ',l_year);
end;
 
else 
begin
	if(Length(in_value)!= 11) then return 0; end if;
	SET l_year=SUBSTRING(in_value,8,4);
	SET l_number=SUBSTRING(in_value,6,1);
	return (SELECT `auto_id` FROM `term` WHERE `year`=l_year AND `number`=l_number);
end;
end if;
RETURN 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `computeAllAffected` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `computeAllAffected`(IN p_exam_auto_id INT,IN p_student_auto_id INT,IN p_stream_auto_id INT,IN p_class_of INT,IN p_subject_code INT)
BEGIN
DECLARE l_class_of INT ;
DECLARE counter INT;
DECLARE count INT;
DECLARE l_stream_auto_id INT;

DECLARE curs0 CURSOR FOR SELECT `auto_id` From `class_stream` WHERE `class_of`=p_class_of;

SET p_stream_auto_id=(IF(p_student_auto_id IS null OR p_student_auto_id=0,p_stream_auto_id,(SELECT `class_stream_auto_id` FROM `students` WHERE `auto_id`=p_student_auto_id )));

-- update stream performance
IF(p_stream_auto_id IS NOT NULL AND p_stream_auto_id!=0) THEN Begin
 CALL `computeStreamPerformance`( p_stream_auto_id , p_exam_auto_id,p_subject_code );
 SET l_class_of=(SELECT `class_of` FROM class_stream WHERE `auto_id`=p_stream_auto_id);
end;
ELSE
begin
SET count=(SELECT COUNT(`auto_id`) From `class_stream` WHERE `class_of`=p_class_of);
SET counter=0;
OPEN curs0;
WHILE counter<count DO
	FETCH curs0 INTO l_stream_auto_id;
	CALL `computeStreamPerformance`( l_stream_auto_id,p_exam_auto_id,p_subject_code);
	SET counter=counter+1;
END WHILE;
CLOSE curs0;
SET l_class_of=p_class_of;
END;
END if;

-- update class performance
CALL `computeClassPerformance`( l_class_of , p_exam_auto_id,p_subject_code );

-- update school performance
CALL `computeSchoolPerformance`(p_exam_auto_id ,p_subject_code);

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `computeClassPerformance` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `computeClassPerformance`( IN p_class_of INT,IN p_exam_auto_id INT,IN p_subject_code INT)
BEGIN
DECLARE counter INT;
DECLARE subject_count INT;
DECLARE l_average INT;
DECLARE prev_exam_auto_id INT;
DECLARE improvement INT;
DECLARE l_term_auto_id INT;
DECLARE prev_term_auto_id INT;
DECLARE l_subject_code INT;
DECLARE curs0 CURSOR FOR SELECT `code`  FROM `done_subject` WHERE  IF(p_subject_code IS NULL OR p_subject_code=0,1,IF(`code`=p_subject_code,1,0));

SET subject_count=(SELECT COUNT(`code`)  FROM `done_subject` WHERE  IF(p_subject_code IS NULL OR p_subject_code=0,1,IF(`code`=p_subject_code,1,0)));

SELECT `auto_id` from `exam` WHERE `start_date`<(SELECT `start_date` from `exam` WHERE `auto_id` =p_exam_auto_id)
ORDER BY `start_date` DESC LIMIT 1   iNTO prev_exam_auto_id;
SELECT `exam`.`term_auto_id` FROM `exam` WHERE `exam`.`auto_id`=p_exam_auto_id INTO l_term_auto_id;
SET prev_term_auto_id = `computeTerm`(l_term_auto_id, -1)  ;

CALL `get_exam_marks_template`(null, null, p_class_of,p_exam_auto_id, null);

SET counter=0;
OPEN curs0;

WHILE counter<subject_count DO
	FETCH curs0 INTO l_subject_code;
	-- exams subject performance
    SELECT ROUND(AVG(`average`)) FROM `stream_exam_subject_aggregates` 
		WHERE `exam_auto_id`=p_exam_auto_id AND `subject_code`=  l_subject_code AND `stream_auto_id` IN (SELECT `auto_id` FROM `class_stream` WHERE `class_of`=p_class_of) INTO  l_average;
	CALL `getGrade2`(l_average,p_exam_auto_id,null, null,null, p_class_of, l_subject_code, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `class_exam_subject_aggregates` WHERE `class_of`=p_class_of AND `exam_auto_id`=prev_exam_auto_id AND `subject_code`=l_subject_code );
	INSERT INTO `class_exam_subject_aggregates`
	(`class_of`,`exam_auto_id`,`subject_code`,`average`,`grade`,`improvement`)
	VALUES
	(p_class_of,p_exam_auto_id,l_subject_code,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	
	CALL `update_positions`("class_exam_subject_aggregates", "position", "class_of","average",  CONCAT(" exam_auto_id=",p_exam_auto_id," AND `subject_code`=",l_subject_code," "));
	
	CALL `update_positions_class_exam_subject`(p_exam_auto_id, p_subject_code);

	-- term subject performance
	SELECT ROUND(AVG(`average`)) FROM `stream_term_subject_aggregates`
	WHERE `term_auto_id`=l_term_auto_id AND `subject_code`=  l_subject_code AND `stream_auto_id` IN (SELECT `auto_id` FROM `class_stream` WHERE `class_of`=p_class_of) INTO  l_average;
	CALL `getGrade2`(l_average,null,l_term_auto_id, null,null, p_class_of, l_subject_code, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `class_term_subject_aggregates` WHERE `class_of`=p_class_of AND `term_auto_id`=prev_term_auto_id AND `subject_code`=l_subject_code );
	INSERT INTO `class_term_subject_aggregates`
	(`class_of`,`term_auto_id`,`subject_code`,`average`,`grade`,`improvement`)
	VALUES
	(p_class_of,l_term_auto_id,l_subject_code,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	
	CALL `update_positions`("class_term_subject_aggregates", "position", "class_of","average",  CONCAT(" term_auto_id=",l_term_auto_id," AND `subject_code`=",l_subject_code," "));
	
	CALL `update_positions_class_term_subject`(l_term_auto_id, p_subject_code);

	SET counter=counter+1;
END WHILE;
CLOSE curs0;
	-- exams performance
    SELECT ROUND(AVG(`average`)) FROM `class_exam_subject_aggregates` 
		WHERE `class_of`=p_class_of AND `exam_auto_id`=p_exam_auto_id  INTO l_average;
	CALL `getGrade2`(l_average,p_exam_auto_id,null, null,null, p_class_of, null, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `class_exam_aggregates` WHERE `class_of`=p_class_of AND `exam_auto_id`=prev_exam_auto_id);
	INSERT INTO `class_exam_aggregates`
	(`class_of`,`exam_auto_id`,`average`,`grade`,`improvement`)
	VALUES
	(p_class_of,p_exam_auto_id,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	
	CALL `update_positions`("class_exam_aggregates", "position", "class_of","average",  CONCAT(" exam_auto_id=",p_exam_auto_id," "));

	CALL `update_positions_class_exam_average`(p_exam_auto_id);

	
	-- term performance
    SELECT ROUND(AVG(`average`)) FROM `class_term_subject_aggregates` 
		WHERE `class_of`=p_class_of AND `term_auto_id`=l_term_auto_id  INTO l_average;
	CALL `getGrade2`(l_average,null,l_term_auto_id, null,null, p_class_of, null, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `class_term_aggregates` WHERE `class_of`=p_class_of AND `term_auto_id`=prev_term_auto_id);
	INSERT INTO `class_term_aggregates`
	(`class_of`,`term_auto_id`,`average`,`grade`,`improvement`)
	VALUES
	(p_class_of,l_term_auto_id,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	
	CALL `update_positions`("class_term_aggregates", "position", "class_of","average",  CONCAT(" term_auto_id=",l_term_auto_id," "));

	CALL `update_positions_class_term_average`(l_term_auto_id);


END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `computeSchoolPerformance` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `computeSchoolPerformance`( IN p_exam_auto_id INT,IN p_subject_code INT)
BEGIN
DECLARE counter INT;
DECLARE subject_count INT;
DECLARE l_average INT;
DECLARE prev_exam_auto_id INT;
DECLARE improvement INT;
DECLARE l_term_auto_id INT;
DECLARE prev_term_auto_id INT;
DECLARE l_subject_code INT;
DECLARE curs0 CURSOR FOR SELECT `code`  FROM `done_subject` WHERE  IF(p_subject_code IS NULL OR p_subject_code=0,1,IF(`code`=p_subject_code,1,0));

SET subject_count=(SELECT COUNT(`code`)  FROM `done_subject` WHERE  IF(p_subject_code IS NULL OR p_subject_code=0,1,IF(`code`=p_subject_code,1,0)));

SELECT `auto_id` from `exam` WHERE `start_date`<(SELECT `start_date` from `exam` WHERE `auto_id` =p_exam_auto_id)
ORDER BY `start_date` DESC LIMIT 1   iNTO prev_exam_auto_id;

SELECT `exam`.`term_auto_id` FROM `exam` WHERE `exam`.`auto_id`=p_exam_auto_id INTO l_term_auto_id;
SET prev_term_auto_id = `computeTerm`(l_term_auto_id, -1)  ;

SET counter=1;
OPEN curs0;
FETCH curs0 INTO l_subject_code;
WHILE counter<subject_count DO
	-- exam performance
    SELECT ROUND(AVG(`average`)) FROM `class_exam_subject_aggregates`
		WHERE `exam_auto_id`=p_exam_auto_id AND `subject_code`=  l_subject_code  INTO  l_average;
	CALL `getGrade2`(l_average,p_exam_auto_id,null, null,null, null, l_subject_code, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `school_exam_subject_aggregates` WHERE `exam_auto_id`=prev_exam_auto_id AND `subject_code`=l_subject_code );
	INSERT INTO `school_exam_subject_aggregates`
	(`exam_auto_id`,`subject_code`,`average`,`grade`,`improvement`)
	VALUES
	(p_exam_auto_id,l_subject_code,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	

	-- term subject performance
	SELECT ROUND(AVG(`average`)) FROM `class_term_subject_aggregates`
		WHERE `term_auto_id`=l_term_auto_id AND `subject_code`=  l_subject_code  INTO  l_average;
	CALL `getGrade2`(l_average,null,l_term_auto_id, null,null, null, l_subject_code, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `school_term_subject_aggregates` WHERE `term_auto_id`=prev_term_auto_id AND `subject_code`=l_subject_code );
	INSERT INTO `school_term_subject_aggregates`
	(`term_auto_id`,`subject_code`,`average`,`grade`,`improvement`)
	VALUES
	(l_term_auto_id,l_subject_code,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	

	FETCH curs0 INTO l_subject_code;
	SET counter=counter+1;
END WHILE;
CLOSE curs0;

	-- exam performnce
    SELECT ROUND(AVG(`average`)) FROM `school_exam_subject_aggregates` 
		WHERE `exam_auto_id`=p_exam_auto_id  INTO l_average;
	CALL `getGrade2`(l_average,p_exam_auto_id,null, null,null, null, null, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `school_exam_aggregates` WHERE `exam_auto_id`=prev_exam_auto_id);
	INSERT INTO `school_exam_aggregates`
	(`exam_auto_id`,`average`,`grade`,`improvement`)
	VALUES
	(p_exam_auto_id,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	
	
	-- term performance
	SELECT ROUND(AVG(`average`)) FROM `school_term_subject_aggregates` 
		WHERE `term_auto_id`=l_term_auto_id  INTO l_average;
	CALL `getGrade2`(l_average,null,l_term_auto_id, null,null, null, null, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `school_term_aggregates` WHERE `term_auto_id`=prev_term_auto_id);
	INSERT INTO `school_term_aggregates`
	(`term_auto_id`,`average`,`grade`,`improvement`)
	VALUES
	(l_term_auto_id,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	




END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `computeStreamPerformance` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `computeStreamPerformance`( IN p_stream_auto_id INT,IN p_exam_auto_id INT,IN p_subject_code INT)
BEGIN
DECLARE counter INT;
DECLARE subject_count INT;
DECLARE l_average INT;
DECLARE prev_exam_auto_id INT;
DECLARE l_term_auto_id INT;
DECLARE prev_term_auto_id INT;
DECLARE improvement INT;
DECLARE l_subject_code INT;
DECLARE l_class_of INT;
DECLARE curs0 CURSOR FOR SELECT `code`  FROM `done_subject` WHERE  IF(p_subject_code IS NULL OR p_subject_code=0,1,IF(`code`=p_subject_code,1,0));

SET subject_count=(SELECT COUNT(`code`)  FROM `done_subject` WHERE  IF(p_subject_code IS NULL OR p_subject_code=0,1,IF(`code`=p_subject_code,1,0)));
SELECT `class_of` FROM `class_stream` WHERE `auto_id`=p_stream_auto_id INTO l_class_of;
CALL `get_exam_marks_template`(null, p_stream_auto_id, null,p_exam_auto_id, null);

SELECT `auto_id` from `exam` WHERE `start_date`<(SELECT `start_date` from `exam` WHERE `auto_id` =p_exam_auto_id) 
ORDER BY `start_date` DESC LIMIT 1   iNTO prev_exam_auto_id;

SELECT `exam`.`term_auto_id` FROM `exam` WHERE `exam`.`auto_id`=p_exam_auto_id INTO l_term_auto_id;
SET prev_term_auto_id = `computeTerm`(l_term_auto_id, -1)  ;
SET counter=0;
OPEN curs0;
WHILE counter<subject_count DO
	FETCH curs0 INTO l_subject_code;
	-- exams subject performance
    SELECT ROUND(AVG(`percentage`)) FROM  (SELECT * FROM `exam_marks_template` WHERE `subject_code`=l_subject_code) AS `exam_marks_template` JOIN
		(SELECT * FROM `marks_view` WHERE `exam_auto_id`=p_exam_auto_id  AND `subject_code`=l_subject_code)AS `marks_view` ON
		`exam_marks_template`.`auto_id`=`marks_view`.`student_auto_id` INTO l_average;
	CALL `getGrade2`(l_average,p_exam_auto_id,null, null,p_stream_auto_id, null, l_subject_code, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `stream_exam_subject_aggregates` WHERE `stream_auto_id`=p_stream_auto_id AND `exam_auto_id`=prev_exam_auto_id AND `subject_code`=l_subject_code );
	INSERT INTO `stream_exam_subject_aggregates`
	(`stream_auto_id`,`exam_auto_id`,`subject_code`,`average`,`grade`,`improvement`)
	VALUES
	(p_stream_auto_id,p_exam_auto_id,l_subject_code,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	

	CALL `update_positions`("stream_exam_subject_aggregates", "class_position", "stream_auto_id","average", CONCAT(" exam_auto_id=",p_exam_auto_id," AND `subject_code`=",l_subject_code,"  AND stream_auto_id IN (SELECT `auto_id` FROM `class_stream` WHERE `class_of`=",l_class_of,")"));
	CALL `update_positions`("stream_exam_subject_aggregates", "school_position", "stream_auto_id","average",  CONCAT(" exam_auto_id=",p_exam_auto_id," AND `subject_code`=",l_subject_code," "));
	
	CALL `update_positions_stream_exam_subject`(p_exam_auto_id, p_subject_code);
	-- terms subject performance
	SELECT ROUND(AVG(`average`)) FROM  (SELECT * FROM `exam_marks_template` WHERE `subject_code`=l_subject_code) AS `exam_marks_template` JOIN
		(SELECT * FROM `student_term_subject_aggregates` WHERE `term_auto_id`=l_term_auto_id  AND `subject_code`=l_subject_code)AS `student_term_subject_aggregates` ON
		`exam_marks_template`.`auto_id`=`student_term_subject_aggregates`.`student_auto_id` INTO l_average;
	CALL `getGrade2`(l_average,null,l_term_auto_id, null,p_stream_auto_id, null, l_subject_code, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `stream_term_subject_aggregates` WHERE `stream_auto_id`=p_stream_auto_id AND `term_auto_id`=prev_term_auto_id AND `subject_code`=l_subject_code );
	INSERT INTO `stream_term_subject_aggregates`
	(`stream_auto_id`,`term_auto_id`,`subject_code`,`average`,`grade`,`improvement`)
	VALUES
	(p_stream_auto_id,l_term_auto_id,l_subject_code,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	

	CALL `update_positions`("stream_term_subject_aggregates", "class_position", "stream_auto_id","average", CONCAT(" term_auto_id=",l_term_auto_id," AND `subject_code`=",l_subject_code,"  AND stream_auto_id IN (SELECT `auto_id` FROM `class_stream` WHERE `class_of`=",l_class_of,")"));
	CALL `update_positions`("stream_term_subject_aggregates", "school_position", "stream_auto_id","average",  CONCAT(" term_auto_id=",l_term_auto_id," AND `subject_code`=",l_subject_code," "));

	CALL `update_positions_stream_term_subject`(l_term_auto_id ,p_subject_code);
	SET counter=counter+1;
END WHILE;
CLOSE curs0;
	-- exam performance
    SELECT ROUND(AVG(`average`)) FROM `stream_exam_subject_aggregates` 
		WHERE `stream_auto_id`=p_stream_auto_id AND `exam_auto_id`=p_exam_auto_id  INTO l_average;
	CALL `getGrade2`(l_average,p_exam_auto_id,null, null,p_stream_auto_id, null, null, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `stream_exam_aggregates` WHERE `stream_auto_id`=p_stream_auto_id AND `exam_auto_id`=prev_exam_auto_id);
	INSERT INTO `stream_exam_aggregates`
	(`stream_auto_id`,`exam_auto_id`,`average`,`grade`,`improvement`)
	VALUES
	(p_stream_auto_id,p_exam_auto_id,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	

	CALL `update_positions`("stream_exam_aggregates", "class_position", "stream_auto_id","average", CONCAT(" exam_auto_id=",p_exam_auto_id,"  AND stream_auto_id IN (SELECT `auto_id` FROM `class_stream` WHERE `class_of`=",l_class_of,")"));
	CALL `update_positions`("stream_exam_aggregates", "school_position", "stream_auto_id","average",  CONCAT(" exam_auto_id=",p_exam_auto_id," "));
	CALL `update_positions_stream_exam_average`(p_exam_auto_id);

	-- term performance
	SELECT ROUND(AVG(`average`)) FROM `stream_term_subject_aggregates` 
		WHERE `stream_auto_id`=p_stream_auto_id AND `term_auto_id`=l_term_auto_id  INTO l_average;
	CALL `getGrade2`(l_average,null,l_term_auto_id, null,p_stream_auto_id, null, null, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
	SET improvement=l_average-(SELECT `average` FROM `stream_term_aggregates` WHERE `stream_auto_id`=p_stream_auto_id AND `term_auto_id`=prev_term_auto_id);
	INSERT INTO `stream_term_aggregates`
	(`stream_auto_id`,`term_auto_id`,`average`,`grade`,`improvement`)
	VALUES
	(p_stream_auto_id,l_term_auto_id,l_average,@p_grade_name,improvement)
	ON duplicate key UPDATE `average`= l_average, `grade`=@p_grade_name ,`improvement`=improvement;	

	CALL `update_positions`("stream_term_aggregates", "class_position", "stream_auto_id","average", CONCAT(" term_auto_id=",l_term_auto_id,"  AND stream_auto_id IN (SELECT `auto_id` FROM `class_stream` WHERE `class_of`=",l_class_of,")"));
	CALL `update_positions`("stream_term_aggregates", "school_position", "stream_auto_id","average",  CONCAT(" term_auto_id=",l_term_auto_id," "));
	CALL `update_positions_stream_term_average`(l_term_auto_id);


END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `computeStudentPerformance` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `computeStudentPerformance`(IN p_auto_id BIGINT,IN p_student_auto_id INT,IN p_exam_auto_id INT,IN p_subject_code INT,IN p_mark INT)
BEGIN
DECLARE l_term_auto_id INT;
DECLARE exam_total INT;
DECLARE number_of_subjects INT;
DECLARE mean INT;
DECLARE term_subject_average INT;
DECLARE term_average INT;
DECLARE student_class INT;
DECLARE percentage_mark INT;
DECLARE prev_exam_auto_id INT;
DECLARE prev_term_auto_id INT;
DECLARE l_improvement INT;
DECLARE l_kcpe_improvement_index INT;
DECLARE kcpe_average INT;

SELECT `exam`.`term_auto_id` FROM `exam` WHERE `exam`.`auto_id`=p_exam_auto_id INTO l_term_auto_id;

SELECT `auto_id` from `exam` WHERE `start_date`<(SELECT `start_date` from `exam` WHERE `auto_id` =p_exam_auto_id) 
ORDER BY `start_date` DESC LIMIT 1   iNTO prev_exam_auto_id;

SET prev_term_auto_id = `computeTerm`(l_term_auto_id, -1)  ;

SET student_class=`school`.`getClass`(p_student_auto_id, null, null, p_exam_auto_id , null, null);

SET kcpe_average=ROUND((SELECT kcpe_mark FROM students WHERE `auto_id`=p_student_auto_id)/5);

-- update the extended marks table --
SET percentage_mark=ROUND(p_mark/(SELECT `out_of` FROM `exam` WHERE `auto_id` =p_exam_auto_id)*100);
CALL `getGrade`(percentage_mark, student_class, p_subject_code, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
SET l_improvement=percentage_mark-(SELECT `percentage` FROM `marks_view` WHERE `exam_auto_id`=prev_exam_auto_id 
AND `student_auto_id`=p_student_auto_id AND `subject_code`=p_subject_code) ;
INSERT INTO `marks_extended`
(`exam_mark_auto_id`,`percentage`,`grade_name`,`grade_points`,`comment`,`improvement`)
VALUES(p_auto_id,percentage_mark,@p_grade_name,@p_grade_points,@p_comment,l_improvement) 
ON duplicate key update `percentage`= percentage_mark,`grade_name`=@p_grade_name,`comment`=@p_comment,`improvement`=l_improvement;

-- get the exam_marks_template for the student --
CALL get_exam_marks_template(p_student_auto_id,0,0,p_exam_auto_id,null);

-- update exam aggregates of the student  --
SELECT SUM(IFNULL(`subject_marks`.`percentage`,0)),COUNT(IFNULL(`subject_marks`.`percentage`,0)) FROM 
`exam_marks_template`
LEFT JOIN  
(SELECT `subject_code`,  `percentage` FROM `marks_view` 
WHERE `marks_view`.`student_auto_id`=p_student_auto_id AND `marks_view`.`exam_auto_id`=p_exam_auto_id) AS `subject_marks` 
ON `exam_marks_template`.`subject_code`=`subject_marks`.`subject_code` INTO exam_total,number_of_subjects;
SET mean=ROUND(exam_total/number_of_subjects);
CALL `getGrade`(mean, student_class, null, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
SET l_kcpe_improvement_index=mean-kcpe_average;
SET l_improvement=mean-(SELECT `average` FROM `student_exam_aggregates` WHERE `student_auto_id`=p_student_auto_id
				 AND `exam_auto_id`=prev_exam_auto_id);
-- calculate cluster points --

DROP TEMPORARY TABLE IF EXISTS `cluster_table`;
CREATE temporary table `cluster_table` engine=memory AS SELECT `exam_marks_template`.`subject_code`,`grade_points` AS points FROM  `exam_marks_template`
LEFT JOIN `marks_view` ON exam_auto_id=p_exam_auto_id AND `exam_marks_template`.`auto_id`=`marks_view`.`student_auto_id`;
CALL `getClusterPoints`(student_class,@agg_cluster_point,@agg_cluster_grade);

-- save exam aggregates --
INSERT INTO `student_exam_aggregates`
(`student_auto_id`,`exam_auto_id`,`total`,`average`,`average_grade`,`comment`,`agg_cluster_point`,`agg_cluster_grade`,`improvement`,`kcpe_improvement_index`)
VALUES(p_student_auto_id,p_exam_auto_id,exam_total,mean,@p_grade_name,@p_comment,@agg_cluster_point,@agg_cluster_grade,l_improvement,l_kcpe_improvement_index)
ON DUPLICATE KEY UPDATE `total`=exam_total, `average` = mean,`average_grade` = @p_grade_name,`comment` = @p_comment,
`agg_cluster_point` = @agg_cluster_point,`agg_cluster_grade` = @agg_cluster_grade,`improvement` = l_improvement,
`kcpe_improvement_index` = l_kcpe_improvement_index;



/*update the students subject average of the term*/
SELECT SUM(IFNULL(`mark`/`out_of`*account_for,0)) FROM 
(SELECT auto_id,out_of,account_for FROM exam_view WHERE `term_auto_id`=l_term_auto_id AND `featured_class`=student_class)  AS exam
LEFT JOIN (SELECT exam_auto_id,`mark` FROM exam_mark WHERE  exam_mark.student_auto_id=p_student_auto_id AND exam_mark.subject_code=p_subject_code )AS exam_mark
ON exam.auto_id=exam_mark.exam_auto_id INTO term_subject_average;
CALL `getGrade`(term_subject_average, student_class, p_subject_code, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
SET l_improvement=mean-(SELECT `average` FROM `student_term_subject_aggregates` WHERE `student_auto_id`=p_student_auto_id
				 AND `term_auto_id`=prev_term_auto_id  AND `subject_code`=p_subject_code) ;
INSERT INTO `student_term_subject_aggregates`
(`student_auto_id`,`subject_code`,`term_auto_id`,`average`,`grade`,`comment`,`improvement`)
VALUES(p_student_auto_id,p_subject_code,l_term_auto_id,term_subject_average,@p_grade_name,@p_comment,l_improvement)
ON DUPLICATE KEY UPDATE `average`=term_subject_average,`grade`=@p_grade_name,`comment`=@p_comment,`improvement`=l_improvement;

/*update the students aggregates of the term*/
SELECT ROUND(AVG(IFNULL(subject_averages.average,0))) FROM 
`exam_marks_template`
LEFT JOIN  
(SELECT `subject_code`,  `average`
FROM `student_term_subject_aggregates` WHERE `student_auto_id`=p_student_auto_id AND `term_auto_id`=l_term_auto_id) AS `subject_averages` 
ON `exam_marks_template`.`subject_code`=`subject_averages`.`subject_code` INTO term_average;

CALL `getGrade`(term_average, student_class, null, @p_grade_auto_id, @p_grade_points, @p_grade_name,@p_comment);
SET l_kcpe_improvement_index=term_average-kcpe_average;
SET l_improvement=term_average-(SELECT `average` FROM `student_term_aggregates` WHERE `student_auto_id`=p_student_auto_id
				 AND `term_auto_id`=prev_term_auto_id);
-- calculate cluster points --
DROP TEMPORARY TABLE IF EXISTS `cluster_table`;
CREATE temporary table `cluster_table` engine=memory AS SELECT `exam_marks_template`.`subject_code`,`points` FROM  `exam_marks_template`
LEFT JOIN `student_term_subject_aggregates` ON `student_term_subject_aggregates`.`term_auto_id`=l_term_auto_id AND `exam_marks_template`.`auto_id`=`student_term_subject_aggregates`.`student_auto_id`;
CALL `getClusterPoints`(student_class,@agg_cluster_point,@agg_cluster_grade);

-- save exam aggregates --
INSERT INTO `student_term_aggregates`
(`student_auto_id`,`term_auto_id`,`average`,`average_grade`,`comment`,`agg_cluster_point`,`agg_cluster_grade`,`improvement`,`kcpe_improvement_index`)
VALUES(p_student_auto_id,l_term_auto_id,term_average,@p_grade_name,@p_comment,@agg_cluster_point,@agg_cluster_grade,l_improvement,l_kcpe_improvement_index)
ON DUPLICATE KEY UPDATE `average` = term_average,`average_grade` = @p_grade_name,`comment` = @p_comment,
`agg_cluster_point` = @agg_cluster_point,`agg_cluster_grade` = @agg_cluster_grade,`improvement` = l_improvement,
`kcpe_improvement_index` = l_kcpe_improvement_index;


END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `executeStatement` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `executeStatement`(IN prepared_query LONGTEXT)
BEGIN

DECLARE index_of INT;
WHILE(LENGTH(prepared_query)!=0) DO

SET @query1=SUBSTRING_INDEX(prepared_query,';',1);
PREPARE stmt0 FROM @query1;
EXECUTE stmt0;
DEALLOCATE PREPARE stmt0;

SET index_of=LOCATE(';',prepared_query);
if(index_of=0) THEN SET prepared_query='';
ELSE
SET prepared_query=SUBSTRING(prepared_query,index_of+1);
END IF;
END while;




END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `fill_mark` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `fill_mark`(IN p_student_auto_id INT,IN p_exam_auto_id INT,IN p_subject_code INT,IN p_mark INT)
BEGIN

IF(Markable(p_student_auto_id,p_exam_auto_id,p_subject_code)) THEN 
INSERT INTO `exam_mark`
(`student_auto_id`,
`exam_auto_id`,
`subject_code`,
`mark`)
VALUES
(p_student_auto_id,
p_exam_auto_id,
p_subject_code,
p_mark) ON duplicate key update `mark`=p_mark;

END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getBalancesAsAt` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getBalancesAsAt`(IN as_at DATE,IN student_auto_id INT,IN class_stream_auto_id INT,IN class_of INT)
BEGIN
CALL `school`.`get_req_student`(student_auto_id, class_stream_auto_id,class_of);
SELECT `req_student`.`auto_id`  AS `student_auto_id`,`req_student`.`admno`,`req_student`.`name`,IFNULL(SUM(`fee_transaction`.`amount`),0) AS balance  
FROM `req_student` LEFT JOIN  `fee_transaction` ON `req_student`.`auto_id`=`fee_transaction`.`student_auto_id` 
AND `fee_transaction`.`date` <= as_at GROUP BY `req_student`.`auto_id`;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getClassList` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getClassList`(IN purpose Varchar(45),IN class_stream_auto_id INT,IN class_of INT)
BEGIN

DECLARE bDone INT;
DECLARE abbrev VarCHAR(45);
DECLARE sql_query Text;
DECLARE junior_compulsory tinyint;
DECLARE senior_compulsory tinyint;


DECLARE curs1 CURSOR FOR  SELECT `abbreviation`,`is_junior_compulsory`,`is_senior_compulsory` FROM `done_subject`;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET bDone = 1;

CALL `get_req_student`(null, class_stream_auto_id,class_of);
CASE purpose
    WHEN 'Blank' THEN
		BEGIN
			OPEN curs1;
			SET bDone = 0;
			SET sql_query='SELECT `req_student`.`admno`,`req_student`.`name`,';
			SET sql_query=TRIM(TRAILING ',' FROM sql_query);
			CLOSE curs1;
			CALL executeStatement(CONCAT(sql_query,' FROM `req_student`;'));
        END;
      WHEN 'General' THEN
		BEGIN
			OPEN curs1;
			SET bDone = 0;
			SET sql_query='SELECT `req_student`.`admno`,`req_student`.`name`,';
			FETCH curs1 INTO abbrev,junior_compulsory,senior_compulsory;
				WHILE NOT bDone DO
					SET sql_query=CONCAT(sql_query,'NULL AS `',abbrev,'` ,');
					FETCH curs1 INTO abbrev,junior_compulsory,senior_compulsory;
				END WHILE;
			SET sql_query=TRIM(TRAILING ',' FROM sql_query);
			CLOSE curs1;
			CALL executeStatement(CONCAT(sql_query,' FROM `req_student`;'));
        END;
      WHEN 'Marks Entry' THEN
		BEGIN
			OPEN curs1;
			SET bDone = 0;
			SET sql_query='SELECT `req_student`.`admno`,`req_student`.`name`,';
			FETCH curs1 INTO abbrev,junior_compulsory,senior_compulsory;
				WHILE NOT bDone DO
					SET sql_query=CONCAT(sql_query,'NULL AS `',abbrev,'` ,');
					FETCH curs1 INTO abbrev,junior_compulsory,senior_compulsory;
				END WHILE;
			SET sql_query=TRIM(TRAILING ',' FROM sql_query);
			CLOSE curs1;
			CALL executeStatement(CONCAT(sql_query,' FROM `req_student`;'));
		END;
      WHEN 'Junior Subject Selection' THEN
		BEGIN
			OPEN curs1;
			SET bDone = 0;
			SET sql_query='SELECT `req_student`.`admno`,`req_student`.`name`,';
			FETCH curs1 INTO abbrev,junior_compulsory,senior_compulsory;
				WHILE NOT bDone DO
					IF junior_compulsory=FALSE THEN
					SET sql_query=CONCAT(sql_query,'NULL AS `',abbrev,'` ,');
					END IF;
					FETCH curs1 INTO abbrev,junior_compulsory,senior_compulsory;
				END WHILE;
			SET sql_query=TRIM(TRAILING ',' FROM sql_query);
			CLOSE curs1;
			CALL executeStatement(CONCAT(sql_query,' FROM `req_student`;'));
		END;
		WHEN 'Senior Subject Selection' THEN
		BEGIN
			OPEN curs1;
			SET bDone = 0;
			SET sql_query='SELECT `req_student`.`admno`,`req_student`.`name`,';
			FETCH curs1 INTO abbrev,junior_compulsory,senior_compulsory;
				WHILE NOT bDone DO
					IF senior_compulsory=FALSE THEN
					SET sql_query=CONCAT(sql_query,'NULL AS `',abbrev,'` ,');
					END IF;
					FETCH curs1 INTO abbrev,junior_compulsory,senior_compulsory;
				END WHILE;
			SET sql_query=TRIM(TRAILING ',' FROM sql_query);
			CLOSE curs1;
			CALL executeStatement(CONCAT(sql_query,' FROM `req_student`;'));
		END;
      ELSE
       BEGIN
		END;
    END CASE;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getClassListData` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getClassListData`(IN purpose Varchar(45),IN class_stream_auto_id INT,IN class_of INT)
BEGIN

CALL `get_req_student`(null, class_stream_auto_id,class_of);
CASE purpose
    WHEN 'Blank' THEN
		BEGIN
		SELECT `req_student`.`admno`,`req_student`.`name` FROM `req_student`;
        END;
      WHEN 'General' THEN
		BEGIN
		SELECT `req_student`.`admno`,`req_student`.`name`,`done_subject`.`abbreviation`,'' AS `blank` FROM `req_student` JOIN `done_subject`;
        END;
      WHEN 'Junior Marks Entry' THEN
		BEGIN
		SELECT `req_student`.`admno`,`req_student`.`name`,done_subject.`abbreviation` ,if(`student_junior_subject_doing`.`doing`=1,'','-') AS blank FROM `req_student` 
		LEFT JOIN student_junior_subject_doing ON `req_student`.`auto_id` = student_junior_subject_doing.`student_auto_id` 
		JOIN `done_subject`  ON student_junior_subject_doing.`subject_code` =done_subject.`code` ;
        END;
      WHEN 'Senior Marks Entry' THEN
		BEGIN
		SELECT `req_student`.`admno`,`req_student`.`name`,done_subject.`abbreviation` ,if(`student_senior_subject_doing`.`doing`=1,'','-') AS blank FROM `req_student` 
		LEFT JOIN student_senior_subject_doing ON `req_student`.`auto_id` = student_senior_subject_doing.`student_auto_id` 
		JOIN `done_subject`  ON student_senior_subject_doing.`subject_code` =done_subject.`code` ;
        END;
      WHEN 'Junior Subject Selection' THEN
		BEGIN
		SELECT `req_student`.`admno`,`req_student`.`name`,done_subject.`abbreviation` ,'' AS blank FROM `req_student` 
		 JOIN `done_subject`  ON done_subject.`is_junior_compulsory`=false; 
        END;
		WHEN 'Senior Subject Selection' THEN
		BEGIN
		SELECT `req_student`.`admno`,`req_student`.`name`,done_subject.`abbreviation` ,'' AS blank FROM `req_student` 
	    JOIN `done_subject`  ON done_subject.`is_senior_compulsory`=false; 
        END;
      ELSE
       BEGIN
			SELECT `req_student`.`admno`,`req_student`.`name` FROM `req_student`;
		END;
    END CASE;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getClassList_2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getClassList_2`(IN purpose Varchar(45),IN class_stream_auto_id INT,IN class_of INT)
BEGIN

SET @vparam=null,@vparam1=class_stream_auto_id,@vparam2=class_of;
CASE purpose
      WHEN 'General' THEN
		BEGIN
			CALL transformtable(
			' (SELECT req_student_view.auto_id,`done_subject`.`abbreviation`,null AS doing FROM  req_student_view JOIN `done_subject` ) AS `classlist` ',
			'auto_id',
			'abbreviation',
			'doing');
        END;
      WHEN 'Marks Entry' THEN
		BEGIN
			CALL transformtable(
			' (SELECT req_student_view.auto_id,senior_students_subject.doing,senior_students_subject.subject_code FROM  req_student_view JOIN senior_students_subject ON req_student_view.auto_id=senior_students_subject.student_auto_id ) AS `classlist` ',
			'auto_id',
			'subject_code',
			'doing');
		END;
      WHEN 'Junior Subject Selection' THEN
		BEGIN
			CALL transformtable(
			' (SELECT req_student_view.auto_id,`done_subject`.`abbreviation`,null AS doing FROM  req_student_view JOIN `done_subject` WHERE `done_subject`.`is_junior_compulsory`=false ) AS `classlist` ',
			'auto_id',
			'abbreviation',
			'doing');
		END;
		WHEN 'Senior Subject Selection' THEN
		BEGIN
			CALL transformtable(
			' (SELECT req_student_view.auto_id,`done_subject`.`abbreviation`,null AS doing FROM  req_student_view JOIN `done_subject` WHERE `done_subject`.`is_senior_compulsory`=false ) AS `classlist` ',
			'auto_id',
			'abbreviation',
			'doing');
		END;
      ELSE
       BEGIN
		END;
    END CASE;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getClassResults` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getClassResults`(IN req_exam_auto_id INT,IN req_term_auto_id INT,IN req_stream_auto_id INT,IN req_class_of INT)
BEGIN

IF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 AND  req_stream_auto_id IS NOT NULL AND  req_stream_auto_id!=0) THEN
 SELECT `subject`.`abbreviation` AS `subject`,`stream_exam_subject_aggregates`.* FROM 
	(SELECT `subject_code`,`average`,`grade`,`class_position`,`school_position`,`improvement` 
		FROM `stream_exam_subject_aggregates` WHERE `exam_auto_id`=req_exam_auto_id AND `stream_auto_id`=req_stream_auto_id)
		AS `stream_exam_subject_aggregates`
		JOIN `subject` WHERE `stream_exam_subject_aggregates`.`subject_code`=`subject`.`code`;

ELSEIF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 AND  req_class_of IS NOT NULL AND  req_class_of!=0) THEN
 SELECT `subject`.`abbreviation` AS `subject`,`class_exam_subject_aggregates`.* FROM 
	(SELECT `subject_code`,`average`,`grade`,`position`,`improvement` 
		FROM `class_exam_subject_aggregates` WHERE `exam_auto_id`=req_exam_auto_id AND `class_of`=req_class_of)
		AS `class_exam_subject_aggregates`
		JOIN `subject` WHERE `class_exam_subject_aggregates`.`subject_code`=`subject`.`code`;

ELSEIF(req_term_auto_id IS NOT NULL AND req_term_auto_id!=0 AND  req_stream_auto_id IS NOT NULL AND  req_stream_auto_id!=0) THEN
 SELECT `subject`.`abbreviation` AS `subject`,`stream_term_subject_aggregates`.* FROM 
	(SELECT `subject_code`,`average`,`grade`,`class_position`,`school_position`,`improvement` 
		FROM `stream_term_subject_aggregates` WHERE `term_auto_id`=req_term_auto_id AND `stream_auto_id`=req_stream_auto_id)
		AS `stream_term_subject_aggregates`
		JOIN `subject` WHERE `stream_term_subject_aggregates`.`subject_code`=`subject`.`code`;
ELSE 
 SELECT `subject`.`abbreviation` AS `subject`,`class_term_subject_aggregates`.* FROM 
	(SELECT `subject_code`,`average`,`grade`,`position`,`improvement` 
		FROM `class_term_subject_aggregates` WHERE `term_auto_id`=req_term_auto_id AND `class_of`=req_class_of)
		AS `class_term_subject_aggregates`
		JOIN `subject` WHERE `class_term_subject_aggregates`.`subject_code`=`subject`.`code`;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getClassResultsAggr` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getClassResultsAggr`(IN req_exam_auto_id INT,IN req_term_auto_id INT,IN req_stream_auto_id INT,IN req_class_of INT)
BEGIN

IF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 AND  req_stream_auto_id IS NOT NULL AND  req_stream_auto_id!=0) THEN
SELECT `average`,`grade`,`class_position`,`school_position`,`improvement` 
		FROM `stream_exam_aggregates` WHERE `exam_auto_id`=req_exam_auto_id AND `stream_auto_id`=req_stream_auto_id;

ELSEIF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 AND  req_class_of IS NOT NULL AND  req_class_of!=0) THEN
SELECT `average`,`grade`,`position`,`improvement` 
		FROM `class_exam_aggregates` WHERE `exam_auto_id`=req_exam_auto_id AND `class_of`=req_class_of;

ELSEIF(req_term_auto_id IS NOT NULL AND req_term_auto_id!=0 AND  req_stream_auto_id IS NOT NULL AND  req_stream_auto_id!=0) THEN
SELECT `average`,`grade`,`class_position`,`school_position`,`improvement` 
		FROM `stream_term_aggregates` WHERE `term_auto_id`=req_term_auto_id AND `stream_auto_id`=req_stream_auto_id;
ELSE 
SELECT `average`,`grade`,`position`,`improvement` 
		FROM `class_term_aggregates` WHERE `term_auto_id`=req_term_auto_id AND `class_of`=req_class_of;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getClusterPoints` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getClusterPoints`(IN p_class INT,INout agg_cluster_point INT,INOUT agg_cluster_grade Varchar(2))
BEGIN
DECLARE compulsory_sum INT;
DECLARE two_sciences_sum INT;
DECLARE one_humanity_sum INT;
DECLARE  any_other INT default 0;

DECLARE  any_other_temp INT;



IF(p_class=3 OR p_class=4) THEN 
BEGIN
DROP TEMPORARY TABLE IF EXISTS `grouped_cluster_table`;
CREATE TEMPORARY TABLE `grouped_cluster_table` engine=memory AS (Select `cluster_table`.`subject_code`,`subject`.`group`,`cluster_table`.`points` From `cluster_table` JOIN `subject`
ON `cluster_table`.`subject_code`= `subject`.`code` ORDER BY `cluster_table`.`points` DESC);

SELECT SUM(`points`) FROM `grouped_cluster_table` WHERE `group`=1 LIMIT 3 INTO compulsory_sum;
SELECT  SUM(`points`) FROM `grouped_cluster_table` WHERE `group`=2 LIMIT 2 INTO two_sciences_sum;
SELECT  `points` FROM `grouped_cluster_table` WHERE `group`=3 LIMIT 1 INTO  one_humanity_sum;
SELECT `points` FROM `grouped_cluster_table` WHERE `group`=2 LIMIT 2,1 INTO any_other_temp;
IF(any_other_temp>any_other) THEN SET any_other=any_other_temp; END IF;
SELECT `points` FROM `grouped_cluster_table` WHERE `group`=3 LIMIT 1,1 INTO any_other_temp;
IF(any_other_temp>any_other) THEN SET any_other=any_other_temp; END IF;
SELECT `points` FROM `grouped_cluster_table` WHERE `group`>3 LIMIT 1 INTO any_other_temp;
IF(any_other_temp>any_other) THEN SET any_other=any_other_temp; END IF;

SET agg_cluster_point=(compulsory_sum+two_sciences_sum+one_humanity_sum+any_other)/7;
END;
ELSEIF (p_class=1 OR p_class=2) THEN 
BEGIN
SELECT avg(`points`) FROM  `cluster_table` INTO agg_cluster_point;
END;
ELSE 
	SET agg_cluster_point=null;
end if;
SELECT `name` FROM `grade` WHERE `points`=ROUND(agg_cluster_point) INTO agg_cluster_grade;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getExamProgress` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getExamProgress`(IN req_exam_auto_id INT)
BEGIN

declare number_of_students_subjects INT;

declare exam_year INT;
declare marks_entered INT;
declare total INT;
declare total_marks_entered INT;
SET total=0;
SET total_marks_entered=0;
SELECT `term`.`year` FROM `exam` JOIN `term` ON term.auto_id=exam.term_auto_id WHERE exam.auto_id=req_exam_auto_id INTO exam_year;
/*form1*/
IF((SELECT `exam_auto_id` FROM `exam_class` WHERE `featured_class`=1 AND `exam_class`.`exam_auto_id`=req_exam_auto_id) is NOT NULL) then
BEGIN
SELECT COUNT(`junior_students_subject`.`student_auto_id`),COUNT(`exam_mark`.`mark`) 
FROM (SELECT * FROM `student_basic_info` WHERE `class_of`=exam_year+3) as `student_basic_info`
JOIN `junior_students_subject` ON `student_basic_info`.`auto_id`=`junior_students_subject`.`student_auto_id`
LEFT JOIN `exam_mark` 
ON `exam_mark`.`exam_auto_id`=req_exam_auto_id
AND `student_basic_info`.`auto_id`=`exam_mark`.`student_auto_id` 
AND `junior_students_subject`.`subject_code`=`exam_mark`.`subject_code`
INTO number_of_students_subjects,marks_entered;
SET total=total+number_of_students_subjects ;
SET total_marks_entered=total_marks_entered+marks_entered;
END;END IF;

/*form2*/
IF((SELECT `exam_auto_id` FROM `exam_class` WHERE `featured_class`=2 AND `exam_class`.`exam_auto_id`=req_exam_auto_id) is NOT NULL) then
BEGIN
SELECT COUNT(`junior_students_subject`.`student_auto_id`),COUNT(`exam_mark`.`mark`) 
FROM (SELECT * FROM `student_basic_info` WHERE `class_of`=exam_year+2) as `student_basic_info`
JOIN `junior_students_subject` ON `student_basic_info`.`auto_id`=`junior_students_subject`.`student_auto_id`
LEFT JOIN `exam_mark` 
ON `exam_mark`.`exam_auto_id`=req_exam_auto_id
AND `student_basic_info`.`auto_id`=`exam_mark`.`student_auto_id` 
AND `junior_students_subject`.`subject_code`=`exam_mark`.`subject_code`
INTO number_of_students_subjects,marks_entered;
SET total=total+number_of_students_subjects ;
SET total_marks_entered=total_marks_entered+marks_entered;
END;END IF;

/*form3*/
IF((SELECT `exam_auto_id` FROM `exam_class` WHERE `featured_class`=3 AND `exam_class`.`exam_auto_id`=req_exam_auto_id) is NOT NULL) then
BEGIN
SELECT COUNT(`senior_students_subject`.`student_auto_id`),COUNT(`exam_mark`.`mark`) 
FROM (SELECT * FROM `student_basic_info` WHERE `class_of`=exam_year+1) as `student_basic_info`
JOIN `senior_students_subject` ON `student_basic_info`.`auto_id`=`senior_students_subject`.`student_auto_id`
LEFT JOIN `exam_mark` 
ON `exam_mark`.`exam_auto_id`=req_exam_auto_id
AND `student_basic_info`.`auto_id`=`exam_mark`.`student_auto_id` 
AND `senior_students_subject`.`subject_code`=`exam_mark`.`subject_code`
INTO number_of_students_subjects,marks_entered;
SET total=total+number_of_students_subjects ;
SET total_marks_entered=total_marks_entered+marks_entered;
END;END IF;

/*form4*/
IF((SELECT `exam_auto_id` FROM `exam_class` WHERE `featured_class`=4 AND `exam_class`.`exam_auto_id`=req_exam_auto_id) is NOT NULL) then
BEGIN
SELECT COUNT(`senior_students_subject`.`student_auto_id`),COUNT(`exam_mark`.`mark`) 
FROM (SELECT * FROM `student_basic_info` WHERE `class_of`=exam_year) as `student_basic_info`
JOIN `senior_students_subject` ON `student_basic_info`.`auto_id`=`senior_students_subject`.`student_auto_id`
LEFT JOIN `exam_mark` 
ON `exam_mark`.`exam_auto_id`=req_exam_auto_id
AND `student_basic_info`.`auto_id`=`exam_mark`.`student_auto_id` 
AND `senior_students_subject`.`subject_code`=`exam_mark`.`subject_code`
INTO number_of_students_subjects,marks_entered;
SET total=total+number_of_students_subjects ;
SET total_marks_entered=total_marks_entered+marks_entered;
END;
END IF;
IF total IS NULL THEN SELECT null as progress;
ELSEIF total_marks_entered=0 THEN SELECT 0 as progress;
ELSE SELECT total_marks_entered/total*100 as progress;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getGrade` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getGrade`(IN p_mark FLoat,IN p_class INT ,IN p_subject_code INT,OUT p_grade_auto_id INT,OUT p_grade_points INT,OUT p_grade_name Varchar(2),OUT p_comment VARCHAR(100))
BEGIN

IF p_subject_code=0 or p_subject_code IS NULL then
SELECT `auto_id`,`points`,`name`,`comment` FROM general_grade_view 
WHERE `form`=p_class AND p_mark between `lower_bound` and `upper_bound` 
INTO p_grade_auto_id,p_grade_points,p_grade_name,p_comment;
else
SELECT `auto_id`,`points`,`name`,`comment` FROM subject_grade_view 
WHERE `form`=p_class AND `subject_code`=p_subject_code AND p_mark between `lower_bound` and `upper_bound` 
INTO p_grade_auto_id,p_grade_points,p_grade_name,p_comment;
End if;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getGrade2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getGrade2`(IN p_mark FLoat,IN p_exam_auto_id INT,IN p_term_auto_id INT,IN p_student_auto_id INT,IN p_stream_auto_id INT,IN p_class_of INT ,IN p_subject_code INT,OUT p_grade_auto_id INT,OUT p_grade_points INT,OUT p_grade_name Varchar(2),OUT p_comment VARCHAR(100))
BEGIN
DECLARE l_class_of INT;
DECLARE l_exam_year INT;
DECLARE l_class INT;

IF p_student_auto_id IS NOT NULL AND p_student_auto_id!=0 THEN
	SELECT `class_of` FROM `class_stream` WHERE `auto_id`=(SELECT `class_stream_auto_id` FROM `students` WHERE `auto_id`=p_student_auto_id) INTO l_class_of;
ELSEIF  p_stream_auto_id IS NOT NULL AND p_stream_auto_id!=0 THEN
	SELECT `class_of` FROM `class_stream` WHERE `auto_id`=p_stream_auto_id INTO l_class_of;
ELSE 
	SELECT p_class_of INTO l_class_of;
END IF;

IF p_exam_auto_id IS NOT NULL AND p_exam_auto_id!=0 THEN
SELECT `term`.`year` FROM `term` WHERE `term`.`auto_id` = (SELECT `exam`.`term_auto_id` FROM `exam` WHERE `exam`.`auto_id`=p_exam_auto_id) INTO l_exam_year;
ELSE 
	SELECT `term`.`year` FROM `term` WHERE `term`.`auto_id` =p_term_auto_id INTO l_exam_year;
END IF;
SET l_class_of=IF(l_class_of IS NULL ,l_exam_year,l_class_of);

SET l_class=l_exam_year-l_class_of+4;
IF p_subject_code=0 or p_subject_code IS NULL then
SELECT `auto_id`,`points`,`name`,`comment` FROM general_grade_view 
WHERE `form`=l_class AND p_mark between `lower_bound` and `upper_bound` 
INTO p_grade_auto_id,p_grade_points,p_grade_name,p_comment;
else
SELECT `auto_id`,`points`,`name`,`comment` FROM subject_grade_view 
WHERE `form`=l_class AND `subject_code`=p_subject_code AND p_mark between `lower_bound` and `upper_bound` 
INTO p_grade_auto_id,p_grade_points,p_grade_name,p_comment;
End if;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getGradeAnalysis` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getGradeAnalysis`(IN req_exam_auto_id INT,IN req_term_auto_id INT,IN req_stream_auto_id INT,IN req_class_of INT)
BEGIN
CALL `school`.`get_exam_marks_template`(null, req_stream_auto_id, req_class_of, req_exam_auto_id , req_term_auto_id );

IF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0) THEN
SELECT `subject_grade`.`abbreviation`  AS `subject`,`subject_grade`.`grade_name` AS `grade` ,`grade_analysis`.`count` FROM 
(
	SELECT `done_subject`.`abbreviation`,`done_subject`.`code` AS `subject_code`,`grade`.`name` AS `grade_name` FROM  `done_subject` JOIN `grade` 
) AS `subject_grade`
LEFT JOIN
(
	SELECT  `exam_marks_template`.`subject_code`,`marks_view`.`grade_name` AS `grade`,COUNT(*) AS `count` FROM `exam_marks_template`
	LEFT JOIN (
				SELECT * FROM `marks_view`  WHERE `exam_auto_id`= req_exam_auto_id
			  ) AS  `marks_view` 
	ON `exam_marks_template`.`auto_id`=`marks_view`.`student_auto_id` AND `exam_marks_template`.`subject_code`=`marks_view`.`subject_code`
	GROUP BY `exam_marks_template`.`subject_code`,`marks_view`.`grade_name` 
) AS `grade_analysis`
ON `subject_grade`.`subject_code` =`grade_analysis`.`subject_code` AND `subject_grade`.`grade_name` =`grade_analysis`.`grade` ;

ELSE
SELECT `subject_grade`.`abbreviation`  AS `subject`,`subject_grade`.`grade_name` AS `grade` ,`grade_analysis`.`count` FROM 
(
	SELECT `done_subject`.`abbreviation`,`done_subject`.`code` AS `subject_code`,`grade`.`name` AS `grade_name` FROM  `done_subject` JOIN `grade` 
) AS `subject_grade`
LEFT JOIN
(
	SELECT  `exam_marks_template`.`subject_code`,`student_term_subject_aggregates`.`grade` AS `grade`,COUNT(*) AS `count` FROM `exam_marks_template`
	LEFT JOIN (
				SELECT * FROM `student_term_subject_aggregates`  WHERE `term_auto_id`= req_term_auto_id
			  ) AS  `student_term_subject_aggregates` 
	ON `exam_marks_template`.`auto_id`=`student_term_subject_aggregates`.`student_auto_id` AND `exam_marks_template`.`subject_code`=`student_term_subject_aggregates`.`subject_code`
	GROUP BY `exam_marks_template`.`subject_code`,`student_term_subject_aggregates`.`grade` 
) AS `grade_analysis`
ON `subject_grade`.`subject_code` =`grade_analysis`.`subject_code` AND `subject_grade`.`grade_name` =`grade_analysis`.`grade` ;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getMarkSheet` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getMarkSheet`(IN req_exam_auto_id INT,IN req_term_auto_id INT,IN req_stream_auto_id INT,IN req_class_of INT)
BEGIN
CALL `school`.`get_exam_marks_template`(null, req_stream_auto_id, req_class_of, req_exam_auto_id , req_term_auto_id);
DROP TEMPORARY TABLE IF EXISTS `req_marksheet`;
IF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 ) THEN 
BEGIN
CREATE TEMPORARY TABLE `req_marksheet` ENGINE = MEMORY 
SELECT 
	`exam_marks_template`.`auto_id` AS `student_auto_id`,
    `exam_marks_template`.`admno`,
    `exam_marks_template`.`name`,
    `subject`.`abbreviation` AS `subject_abbrev`,
    `marks_view`.`percentage`
FROM
    `exam_marks_template`
        LEFT JOIN
    (SELECT 
        *
    FROM
        `marks_view`
    WHERE
        `exam_auto_id` = req_exam_auto_id) AS `marks_view` ON `exam_marks_template`.`auto_id` = `marks_view`.`student_auto_id`
        AND `exam_marks_template`.`subject_code` = `marks_view`.`subject_code`
        JOIN
    `subject` ON `subject`.`code` = `exam_marks_template`.`subject_code`
ORDER BY `exam_marks_template`.`subject_code`;


CALL `get_transformed_table`('req_marksheet', 'student_auto_id', 'subject_abbrev', 'percentage', 'INT');


SELECT 
    `transformed_table`.*,
    `total`,
    `average`,
    `average_grade` AS 'average\ngrade',
    `agg_cluster_grade` AS 'aggr cluster\ngrade',
    `improvement`,
    `kcpe_improvement_index` AS 'KCPE Improv\nIndex',
    `stream_position` AS 'Stream\nPosition',
    `class_position` AS 'Class\nposition'
FROM
    `transformed_table`
        LEFT JOIN
    (SELECT 
        *
    FROM
        `student_exam_aggregates`
    WHERE
        `exam_auto_id` = req_exam_auto_id) AS `marks_aggr` ON `transformed_table`.`student_auto_id` = `marks_aggr`.`student_auto_id`
ORDER BY  `marks_aggr`.`class_position`;
END;
ELSE begin

CREATE TEMPORARY TABLE `req_marksheet` ENGINE = MEMORY 
SELECT 
	`exam_marks_template`.`auto_id` AS `student_auto_id`,
    `exam_marks_template`.`admno`,
    `exam_marks_template`.`name`,
    `subject`.`abbreviation` AS `subject_abbrev`,
    `term_subject_marks`.`average`
FROM
    `exam_marks_template`
        LEFT JOIN
    (SELECT 
        *
    FROM
        `student_term_subject_aggregates`
    WHERE
        `term_auto_id` = req_term_auto_id) AS `term_subject_marks` ON `exam_marks_template`.`auto_id` = `term_subject_marks`.`student_auto_id`
        AND `exam_marks_template`.`subject_code` = `term_subject_marks`.`subject_code`
        JOIN
    `subject` ON `subject`.`code` = `exam_marks_template`.`subject_code`
ORDER BY `exam_marks_template`.`subject_code`;

CALL `get_transformed_table`('req_marksheet', 'student_auto_id', 'subject_abbrev', 'average', 'INT');

SELECT 
    `transformed_table`.*,
    `average`,
    `average_grade` AS 'average\ngrade',
    `agg_cluster_grade` AS 'aggr cluster\ngrade',
    `improvement`,
    `kcpe_improvement_index` AS 'KCPE Improv\nIndex',
    `stream_position` AS 'Stream\nPosition',
    `class_position` AS 'Class\nposition'
FROM
    `transformed_table`
        LEFT JOIN
    (SELECT 
        *
    FROM
        `student_term_aggregates`
    WHERE
        `term_auto_id` = req_term_auto_id) AS `marks_aggr` ON `transformed_table`.`student_auto_id` = `marks_aggr`.`student_auto_id`
ORDER BY  `marks_aggr`.`class_position`;

END;
END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getMostImproved` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getMostImproved`(IN req_exam_auto_id INT,IN req_term_auto_id INT,IN req_stream_auto_id INT,IN req_class_of INT)
BEGIN
CALL `get_exam_marks_template`(null, req_stream_auto_id, req_class_of, req_exam_auto_id , req_term_auto_id);
IF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 ) THEN BEGIN
SELECT 
    `exam_marks_template`.`admno`,
	`exam_marks_template`.`name`,
    `average`,
    `average_grade` ,
    `agg_cluster_grade` ,
    `improvement`
FROM
    (SELECT distinct `auto_id`,`admno`,`name` FROM `exam_marks_template` )AS `exam_marks_template`
        JOIN
    (SELECT 
        *
    FROM
        `student_exam_aggregates`
    WHERE
        `exam_auto_id` = req_exam_auto_id AND `improvement`>0 ) AS `marks_aggr` ON `exam_marks_template`.`auto_id` = `marks_aggr`.`student_auto_id`
	ORDER BY  `marks_aggr`.`improvement` DESC LIMIT 3;
END;
ELSE begin
SELECT 
	`exam_marks_template`.`admno`,
	`exam_marks_template`.`name`,
    `average`,
    `average_grade` ,
    `agg_cluster_grade` ,
    `improvement`
FROM
    (SELECT distinct `auto_id`,`admno`,`name` FROM `exam_marks_template` )AS `exam_marks_template`
       JOIN
    (SELECT 
        *
    FROM
        `student_term_aggregates`
    WHERE
        `term_auto_id` = req_term_auto_id AND `improvement`>0 ) AS `marks_aggr` ON `exam_marks_template`.`auto_id` = `marks_aggr`.`student_auto_id`
ORDER BY   `marks_aggr`.`improvement` DESC LIMIT 3;

END;
END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getReportCardDetails` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getReportCardDetails`(IN req_student_auto_id INT,IN req_term_auto_id INT)
BEGIN

CALL `get_exam_marks_template`(req_student_auto_id, null,null,null,req_term_auto_id);
SELECT * FROM 
(
	SELECT `auto_id` AS `student_auto_id`, `admno`,`name`,`kcpe_mark`,`image_filepath` FROM `students` WHERE `auto_id`=req_student_auto_id
) AS `student_details`
LEFT JOIN
(
	SELECT `exam_marks_template`.`auto_id` AS `student_auto_id`,`average`,`average_grade`,`comment`,`agg_cluster_grade`,`improvement`,`kcpe_improvement_index`,`stream_position`,`class_position`  FROM 
	(SELECT DISTINCT(`auto_id`) FROM `exam_marks_template`)AS `exam_marks_template`
	LEFT JOIN  
	(SELECT * FROM `student_term_aggregates` WHERE `student_auto_id`=req_student_auto_id AND `term_auto_id`= req_term_auto_id) AS `marks_aggr` 
	ON `exam_marks_template`.`auto_id`=`marks_aggr`.`student_auto_id`
)AS `term_aggregates` ON `student_details`.`student_auto_id`=`term_aggregates`.`student_auto_id`
JOIN 
(
	SELECT `fees_balance`,`next_term_fees`, `fees_balance`+`next_term_fees` AS`total_fees` FROM
	(
		SELECT `TermFeeBalance`(req_term_auto_id , req_student_auto_id) AS `fees_balance` ,
				`NextTermsFees`(req_term_auto_id, req_student_auto_id) AS `next_term_fees`
	) AS `fee` 
) AS `fee_details` ;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getReportCardMarks` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getReportCardMarks`(IN req_student_auto_id INT,IN req_term_auto_id INT)
BEGIN
DECLARE students_class INT;
DECLARE students_stream_auto_id INT;

SET students_class=`getClass`(req_student_auto_id, null, null, null, req_term_auto_id,null);
SET students_stream_auto_id=(SELECT `class_stream_auto_id` FROM `students` WHERE `auto_id`= req_student_auto_id);

CALL `get_exam_marks_template`(req_student_auto_id, null, null, null , req_term_auto_id);

DROP TEMPORARY TABLE IF EXISTS `req_report_card_marks`;
CREATE TEMPORARY TABLE `req_report_card_marks` ENGINE = MEMORY 
SELECT 
    `exam_subject_combi`.`subject_code`,
    `exam_subject_combi`.`exam_name` AS `exam`,
    `marks_view`.`percentage` AS `mark`
FROM
    (SELECT 
        `exam_marks_template`.`subject_code`,
            `exams`.`auto_id` AS `exam_auto_id`,
            `exams`.`name` AS `exam_name`
    FROM
        `exam_marks_template`
    JOIN (SELECT 
        `exam_view`.`auto_id`,
            CONCAT(`exam_view`.`name`, '\nACC FOR: ', `exam_view`.`account_for`, '%') AS `name`
    FROM
        `exam_view`
    WHERE
        `term_auto_id` = req_term_auto_id
            AND `featured_class` = students_class
            AND `account_for` != 0) AS `exams`) AS `exam_subject_combi`
        LEFT JOIN
    (SELECT 
        `exam_auto_id`, `subject_code`, `percentage`
    FROM
        `marks_view`
    WHERE
        `marks_view`.`student_auto_id` = req_student_auto_id) AS `marks_view` ON `exam_subject_combi`.`exam_auto_id` = `marks_view`.`exam_auto_id`
        AND `exam_subject_combi`.`subject_code` = `marks_view`.`subject_code`;
CALL `get_transformed_table`('req_report_card_marks', 'subject_code', 'exam', 'mark', 'INT');

SELECT 
    `subject`.`abbreviation` AS `subject`,
	`transformed_table`.*,
    `subject_aggregates`.`average`,
    `subject_aggregates`.`grade`,
    `subject_aggregates`.`comment`,
	`subject_teachers`.`teacher_name` AS 'subject\nTeacher'
FROM
    `transformed_table`
        LEFT JOIN
    (SELECT 
        *
    FROM
        `student_term_subject_aggregates`
    WHERE
        `student_auto_id` = req_student_auto_id
            AND `term_auto_id` = req_term_auto_id) AS `subject_aggregates` ON `transformed_table`.`subject_code` = `subject_aggregates`.`subject_code`
        JOIN
      `subject` ON `transformed_table`.`subject_code` = `subject`.`code`
		LEFT JOIN (SELECT `subject_code` ,(SELECT `name` FROM `teacher` WHERE `auto_id`=`teacher_auto_id`) AS `teacher_name` FROM `stream_teacher_subject` 
		WHERE `stream_auto_id`=students_stream_auto_id) AS `subject_teachers` ON `transformed_table`.`subject_code` = `subject_teachers`.`subject_code`
ORDER BY `transformed_table`.`subject_code`;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getStreamResults` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getStreamResults`(IN req_exam_auto_id INT,IN req_term_auto_id INT)
BEGIN

IF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 ) THEN
SELECT  CONCAT(`getClass`(null, null, `class_stream`.`class_of`, req_exam_auto_id,null, null) ,' ',`class_stream`.`stream_name`)AS `stream`,
`average`,`grade`,`class_position`,`school_position`,`improvement`
FROM `stream_exam_aggregates` 
JOIN `class_stream` ON `stream_exam_aggregates`.`exam_auto_id`=req_exam_auto_id  AND `stream_exam_aggregates`.`stream_auto_id` =`class_stream`.`auto_id`
ORDER BY `class_stream`.`class_of`;
ELSE
SELECT  CONCAT(`getClass`(null, null, `class_stream`.`class_of`, null,req_term_auto_id, null) ,' ',`class_stream`.`stream_name`)AS `stream`,
`average`,`grade`,`class_position`,`school_position`,`improvement`
FROM `stream_term_aggregates` 
JOIN `class_stream` ON `stream_term_aggregates`.`term_auto_id`=req_term_auto_id  AND `stream_term_aggregates`.`stream_auto_id` =`class_stream`.`auto_id`
ORDER BY `class_stream`.`class_of`;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getSubjectResults` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getSubjectResults`(IN req_exam_auto_id INT,IN req_term_auto_id INT,IN req_subject_code INT)
BEGIN

IF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 ) THEN
SELECT  CONCAT(`getClass`(null, null, `class_stream`.`class_of`, req_exam_auto_id,null, null) ,' ',`class_stream`.`stream_name`)AS `stream`,
`average`,`grade`,`class_position`,`school_position`,`improvement`
FROM `stream_exam_subject_aggregates` 
JOIN `class_stream` ON `stream_exam_subject_aggregates`.`exam_auto_id`=req_exam_auto_id AND `stream_exam_subject_aggregates`.`subject_code`=req_subject_code AND `stream_exam_subject_aggregates`.`stream_auto_id` =`class_stream`.`auto_id`
ORDER BY `class_stream`.`class_of`;
ELSE
SELECT  CONCAT(`getClass`(null, null, `class_stream`.`class_of`, null,req_term_auto_id, null) ,' ',`class_stream`.`stream_name`)AS `stream`,
`average`,`grade`,`class_position`,`school_position`,`improvement`
FROM `stream_term_subject_aggregates` 
JOIN `class_stream` ON `stream_term_subject_aggregates`.`term_auto_id`=req_term_auto_id AND `stream_term_subject_aggregates`.`subject_code`=req_subject_code AND `stream_term_subject_aggregates`.`stream_auto_id` =`class_stream`.`auto_id`
ORDER BY `class_stream`.`class_of`;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getTopStudents` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getTopStudents`(IN req_exam_auto_id INT,IN req_term_auto_id INT,IN req_stream_auto_id INT,IN req_class_of INT)
BEGIN
CALL `get_exam_marks_template`(null, req_stream_auto_id, req_class_of, req_exam_auto_id , req_term_auto_id);
IF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 ) THEN BEGIN
SELECT 
    `exam_marks_template`.`admno`,
	`exam_marks_template`.`name`,
    `average`,
    `average_grade` ,
    `agg_cluster_grade` ,
    `stream_position` ,
    `class_position` 
FROM
    (SELECT distinct `auto_id`,`admno`,`name` FROM `exam_marks_template` )AS `exam_marks_template`
        JOIN
    (SELECT 
        *
    FROM
        `student_exam_aggregates`
    WHERE
        `exam_auto_id` = req_exam_auto_id AND (`class_position`<=3 OR `stream_position`<=3)) AS `marks_aggr` ON `exam_marks_template`.`auto_id` = `marks_aggr`.`student_auto_id`
	ORDER BY  `marks_aggr`.`class_position` ;
END;
ELSE begin
SELECT 
	`exam_marks_template`.`admno`,
	`exam_marks_template`.`name`,
    `average`,
    `average_grade` ,
    `agg_cluster_grade` ,
    `stream_position` ,
    `class_position`
FROM
    (SELECT distinct `auto_id`,`admno`,`name` FROM `exam_marks_template` )AS `exam_marks_template`
       JOIN
    (SELECT 
        *
    FROM
        `student_term_aggregates`
    WHERE
        `term_auto_id` = req_term_auto_id AND(  `class_position`<=3 OR  `stream_position`<=3)) AS `marks_aggr` ON `exam_marks_template`.`auto_id` = `marks_aggr`.`student_auto_id`
ORDER BY  `marks_aggr`.`class_position`;

END;
END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `getTopStudentsPerSubject` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `getTopStudentsPerSubject`(IN req_exam_auto_id INT,IN req_term_auto_id INT,IN req_stream_auto_id INT,IN req_class_of INT)
BEGIN
CALL `get_exam_marks_template`(null, req_stream_auto_id, req_class_of, req_exam_auto_id , req_term_auto_id);
IF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 ) THEN BEGIN
SELECT 
    `admno`,
	`name`,
    `abbreviation` AS `subject`,
     MAX(`percentage`) AS `marks`,
     `grade_name` AS `grade` 
FROM ( SELECT `exam_marks_template`.`admno`,`exam_marks_template`.`name`,`marks_view`.* ,`subject`.`abbreviation` FROM
     `exam_marks_template`
       JOIN
    (SELECT 
        *
    FROM
        `marks_view`
    WHERE
        `exam_auto_id` = req_exam_auto_id) AS `marks_view` ON `exam_marks_template`.`auto_id` = `marks_view`.`student_auto_id`
	AND  `exam_marks_template`.`subject_code` = `marks_view`.`subject_code`
	JOIN `subject` ON `exam_marks_template`.`subject_code`=`subject`.`code` 
	) AS joined
	GROUP  BY  `subject_code`;
END;
ELSE begin
SELECT  
	`exam_marks_template`.`admno`,
	`exam_marks_template`.`name`,
    `subject`.`abbreviation` AS `subject`,
    MAX(`average`) AS `marks`,
     `grade` 
FROM
    `exam_marks_template`
       JOIN
    (SELECT 
        *
    FROM
        `student_term_subject_aggregates`
    WHERE
        `term_auto_id` = req_term_auto_id ) AS `marks_aggr` ON `exam_marks_template`.`auto_id` = `marks_aggr`.`student_auto_id`
	AND  `exam_marks_template`.`subject_code` = `marks_aggr`.`subject_code`
	JOIN `subject` ON `exam_marks_template`.`subject_code`=`subject`.`code` 
	GROUP  BY  `exam_marks_template`.`subject_code`;
END;
END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `get_exam_marks_template` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `get_exam_marks_template`(IN req_student_auto_id INT,IN req_stream_auto_id INT,
IN req_class_of INT,IN req_exam_auto_id INT,IN req_term_auto_id INT)
BEGIN
DECLARE exam_year INT;
DECLARE student_class_of INT;
DECLARE student_class INT;

CALL get_req_student(req_student_auto_id,req_stream_auto_id,req_class_of);
DROP TEMPORARY TABLE IF EXISTS `exam_marks_template`;
IF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0) THEN 
SELECT `term`.`year` FROM `term` WHERE `term`.`auto_id` = (SELECT `exam`.`term_auto_id` FROM `exam` WHERE `exam`.`auto_id`=req_exam_auto_id)
	INTO exam_year;
ELSE SELECT `term`.`year` FROM `term` WHERE `term`.`auto_id` = req_term_auto_id
	INTO exam_year;

END IF;
IF req_student_auto_id IS NOT NULL  AND req_student_auto_id != 0  THEN
	SELECT `class_of` FROM `class_stream` WHERE `auto_id`=	
	(SELECT `class_stream_auto_id` FROM `students` WHERE `auto_id`=req_student_auto_id) INTO student_class_of;
ELSEIF req_stream_auto_id IS NOT NULL AND req_stream_auto_id != 0 THEN
	SELECT `class_of` FROM `class_stream` WHERE `auto_id`=req_stream_auto_id  INTO student_class_of;
ELSEIF req_class_of IS NOT NULL AND req_class_of != 0 THEN
	SET student_class_of=req_class_of;
ELSE SET student_class_of=0;
END IF;

SET student_class=exam_year-student_class_of+4;
IF((req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 AND (SELECT `exam_class`.`exam_auto_id` FROM `exam_class` WHERE `featured_class`=student_class AND `exam_class`.`exam_auto_id`=req_exam_auto_id) is NULL) 
OR (req_term_auto_id IS NOT NULL AND req_term_auto_id!=0 AND(SELECT COUNT(`exam_class`.`exam_auto_id`) FROM `exam_class` JOIN `exam` ON  `exam_class`.`exam_auto_id`=`exam`.`auto_id` AND `exam`.`term_auto_id`=req_term_auto_id
 WHERE `featured_class`=student_class)=0))
then
	CREATE TEMPORARY TABLE `exam_marks_template`  ENGINE = MEMORY SELECT `req_student`.*,`senior_students_subject`.`subject_code` FROM req_student JOIN senior_students_subject ON 1=0;

ELSEIF (student_class=1 OR student_class=2) THEN
	CREATE TEMPORARY TABLE `exam_marks_template`  ENGINE = MEMORY SELECT `req_student`.*,`junior_students_subject`.`subject_code` FROM `req_student` JOIN junior_students_subject 
	ON  req_student.auto_id = junior_students_subject.student_auto_id;

ELSEIF (student_class=3 OR student_class=4) THEN
	CREATE TEMPORARY TABLE `exam_marks_template`  ENGINE = MEMORY SELECT `req_student`.*,`senior_students_subject`.`subject_code` FROM req_student JOIN senior_students_subject 
	ON  req_student.auto_id = `senior_students_subject`.`student_auto_id`;

else
	CREATE TEMPORARY TABLE `exam_marks_template`  ENGINE = MEMORY SELECT `req_student`.*,`senior_students_subject`.`subject_code` FROM req_student JOIN senior_students_subject ON 1=0;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `get_exam_marks_template2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `get_exam_marks_template2`(IN req_student_auto_id INT,IN req_stream_auto_id INT,
IN req_class_of INT,IN req_exam_auto_id INT,IN req_term_auto_id INT)
BEGIN
DECLARE exam_year INT;
DECLARE student_class_of INT;
DECLARE student_class INT;

CALL get_req_student2(req_student_auto_id,req_stream_auto_id,req_class_of);
DROP TEMPORARY TABLE IF EXISTS `exam_marks_template2`;
IF(req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0) THEN 
SELECT `term`.`year` FROM `term` WHERE `term`.`auto_id` = (SELECT `exam`.`term_auto_id` FROM `exam` WHERE `exam`.`auto_id`=req_exam_auto_id)
	INTO exam_year;
ELSE SELECT `term`.`year` FROM `term` WHERE `term`.`auto_id` = req_term_auto_id
	INTO exam_year;
END IF;
IF req_student_auto_id IS NOT NULL  AND req_student_auto_id != 0  THEN
	SELECT `class_of` FROM `class_stream` WHERE `auto_id`=	
	(SELECT `class_stream_auto_id` FROM `students` WHERE `auto_id`=req_student_auto_id) INTO student_class_of;
ELSEIF req_stream_auto_id IS NOT NULL AND req_stream_auto_id != 0 THEN
	SELECT `class_of` FROM `class_stream` WHERE `auto_id`=req_stream_auto_id  INTO student_class_of;
ELSEIF req_class_of IS NOT NULL AND req_class_of != 0 THEN
	SET student_class_of=req_class_of;
ELSE SET student_class_of=0;
END IF;

SET student_class=exam_year-student_class_of+4;
IF((req_exam_auto_id IS NOT NULL AND req_exam_auto_id!=0 AND (SELECT `exam_class`.`exam_auto_id` FROM `exam_class` WHERE `featured_class`=student_class AND `exam_class`.`exam_auto_id`=req_exam_auto_id) is NULL) 
OR (req_term_auto_id IS NOT NULL AND req_term_auto_id!=0 AND(SELECT COUNT(`exam_class`.`exam_auto_id`) FROM `exam_class` JOIN `exam` ON  `exam_class`.`exam_auto_id`=`exam`.`auto_id` AND `exam`.`term_auto_id`=req_term_auto_id
 WHERE `featured_class`=student_class)=0))
then
	CREATE TEMPORARY TABLE `exam_marks_template2`  ENGINE = MEMORY SELECT `req_student2`.*,`senior_students_subject`.`subject_code` FROM req_student2 JOIN senior_students_subject ON 1=0;

ELSEIF (student_class=1 OR student_class=2) THEN
	CREATE TEMPORARY TABLE `exam_marks_template2`  ENGINE = MEMORY SELECT `req_student2`.*,`junior_students_subject`.`subject_code` FROM `req_student2` JOIN junior_students_subject 
	ON  req_student2.auto_id = junior_students_subject.student_auto_id;

ELSEIF (student_class=3 OR student_class=4) THEN
	CREATE TEMPORARY TABLE `exam_marks_template2`  ENGINE = MEMORY SELECT `req_student2`.*,`senior_students_subject`.`subject_code` FROM req_student2 JOIN senior_students_subject 
	ON  req_student2.auto_id = `senior_students_subject`.`student_auto_id`;

else
	CREATE TEMPORARY TABLE `exam_marks_template2`  ENGINE = MEMORY SELECT `req_student2`.*,`senior_students_subject`.`subject_code` FROM req_student2 JOIN senior_students_subject ON 1=0;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `get_junior_student` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `get_junior_student`(In cur_year INT)
BEGIN
DROP TEMPORARY TABLE IF EXISTS `junior_student`;
CREATE TEMPORARY TABLE `junior_student`  ENGINE = MEMORY SELECT `auto_id` FROM `student_basic_info` WHERE `student_basic_info`.`class_of`= cur_year+2 OR `student_basic_info`.`class_of`= cur_year+3;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `get_req_student` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `get_req_student`(IN student_auto_id INT,IN class_stream_auto_id INT,IN class_of INT)
BEGIN

DROP TEMPORARY TABLE IF EXISTS `req_student`;

IF student_auto_id IS NOT NULL  AND student_auto_id != 0  THEN
CREATE TEMPORARY TABLE `req_student`  ENGINE = MEMORY SELECT `auto_id`,`admno`,`name` FROM `student_basic_info` WHERE `student_basic_info`.`auto_id`= student_auto_id;

ELSEIF class_stream_auto_id IS NOT NULL AND class_stream_auto_id != 0 THEN
CREATE TEMPORARY TABLE `req_student`  ENGINE = MEMORY SELECT `auto_id`,`admno`,`name` FROM `student_basic_info` WHERE `student_basic_info`.`class_stream_auto_id`= class_stream_auto_id;

ELSEIF class_of IS NOT NULL AND class_of != 0 THEN
CREATE TEMPORARY TABLE `req_student`  ENGINE = MEMORY SELECT `auto_id`,`admno`,`name` FROM `student_basic_info` WHERE  `student_basic_info`.`class_of`=class_of;

ELSE 
CREATE TEMPORARY TABLE `req_student`  ENGINE = MEMORY SELECT `auto_id`,`admno`,`name` FROM `student_basic_info` ;

END IF;


END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `get_req_student2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `get_req_student2`(IN student_auto_id INT,IN class_stream_auto_id INT,IN class_of INT)
BEGIN

DROP TEMPORARY TABLE IF EXISTS `req_student2`;

IF student_auto_id IS NOT NULL  AND student_auto_id != 0  THEN
CREATE TEMPORARY TABLE `req_student2`  ENGINE = MEMORY SELECT `auto_id`,`admno`,`name` FROM `student_basic_info` WHERE `student_basic_info`.`auto_id`= student_auto_id;

ELSEIF class_stream_auto_id IS NOT NULL AND class_stream_auto_id != 0 THEN
CREATE TEMPORARY TABLE `req_student2`  ENGINE = MEMORY SELECT `auto_id`,`admno`,`name` FROM `student_basic_info` WHERE `student_basic_info`.`class_stream_auto_id`= class_stream_auto_id;

ELSEIF class_of IS NOT NULL AND class_of != 0 THEN
CREATE TEMPORARY TABLE `req_student2`  ENGINE = MEMORY SELECT `auto_id`,`admno`,`name` FROM `student_basic_info` WHERE  `student_basic_info`.`class_of`=class_of;

ELSE 
CREATE TEMPORARY TABLE `req_student2`  ENGINE = MEMORY SELECT `auto_id`,`admno`,`name` FROM `student_basic_info`;

END IF;


END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `get_senior_student` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `get_senior_student`(In cur_year INT)
BEGIN
DROP TEMPORARY TABLE IF EXISTS `senior_student`;
CREATE TEMPORARY TABLE `senior_student`  ENGINE = MEMORY SELECT `auto_id` FROM `student_basic_info` WHERE `student_basic_info`.`class_of`= cur_year OR `student_basic_info`.`class_of`= cur_year+1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `get_transformed_table` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `get_transformed_table`(IN p_table Text,IN pivot_column Varchar(200),IN stretch_column Varchar(200),IN load_column Varchar(200),IN load_column_data_type VARCHAR(45))
proc:BEGIN
DECLARE query0 longText;
DECLARE query1 longText;
DECLARE query2 longText;
DECLARE query3 longText;
DECLARE query4 longText;


SET query0=CONCAT('SELECT group_concat(DISTINCT \' ADD COLUMN `\', `',stretch_column,'`,\'` ',load_column_data_type,' NULL \') FROM `',p_table,'` INTO @stretch_columns;');
CALL `executeStatement`(query0);


DROP TEMPORARY TABLE IF EXISTS `transformed_table`;


SET query1=CONCAT('CREATE TEMPORARY TABLE `transformed_table`  ENGINE = MEMORY SELECT `',p_table,'`.*  FROM `',p_table,'` GROUP BY `',pivot_column,'`;');
CALL `executeStatement`(query1);

SET query4=CONCAT('ALTER TABLE `transformed_table` DROP COLUMN `',stretch_column,'`,DROP COLUMN `',load_column,'` ',IF(@stretch_columns IS NOT NULL,CONCAT(' , ',@stretch_columns),''),';');
CALL `executeStatement`(query4);

SET SESSION group_concat_max_len=600000;
SET query2=CONCAT('SELECT group_concat(\'`\',`',stretch_column,'`,\'`\',\'=IF(`',pivot_column,'`=\\\'\',`'
      ,pivot_column,'` ,\'\\\',\\\'\',`',load_column,'`,\'\\\',\',\'`\',`',stretch_column,'`,\'`\',\')\') FROM `',p_table,'`  INTO @updates ');
CALL `executeStatement`(query2);
IF(@updates IS NOT NULL) THEN
BEGIN
SET query3=CONCAT('UPDATE `transformed_table` SET ',@updates,' ;');
CALL `executeStatement`(query3);
END;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `insertExamClasses` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `insertExamClasses`(IN in_exam_auto_id INT,IN exam_classes VARCHAR(50))
BEGIN
DECLARE index_of INT;
DELETE FROM `exam_class`  WHERE `exam_auto_id`=in_exam_auto_id;
WHILE(LENGTH(exam_classes)!=0) DO
INSERT INTO `exam_class`(`exam_auto_id`,`featured_class`)VALUES(in_exam_auto_id,SUBSTRING_INDEX(exam_classes,',',1));
SET index_of=LOCATE(',',exam_classes);
if(index_of=0) THEN SET exam_classes='';
ELSE
SET exam_classes=SUBSTRING(exam_classes,index_of+1);
END IF;
END while;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `new_procedure` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `new_procedure`(IN p_subject_code INT)
BEGIN
DECLARE bDone INT default 0;
DECLARE l_subject_code INT;
DECLARE curs0 CURSOR FOR SELECT `code`  FROM `done_subject` WHERE  IF(p_subject_code IS NULL OR p_subject_code=0,1,IF(`code`=p_subject_code,1,0));
DECLARE CONTINUE HANDLER FOR NOT FOUND SET bDone = 1;

OPEN curs0;
FETCH curs0 INTO l_subject_code;
WHILE NOT bDone DO
	SELECT bDone,l_subject_code;
	FETCH curs0 INTO l_subject_code;
END WHILE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `subjectSchoolTrend` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `subjectSchoolTrend`(IN use_exam INT,IN p_subject_code INT)
BEGIN
IF(use_exam IS NOT NULL AND use_exam !=0)then
SELECT CONCAT(`exam`.`name` ,' ',`term_year`,' Term ',`term_number`) AS `name`,`school_exam_subject_aggregates`.`average` FROM 
                        (
	                        SELECT `exam`.`auto_id`,`exam`.`name`,`term`.`year` AS `term_year`,`term`.`number` AS `term_number` FROM `exam` JOIN `term` ON `exam`.`term_auto_id`=`term`.`auto_id` WHERE `account_for`!=0 ORDER BY `start_date`
                        ) AS `exam`
                        JOIN
                        (
	                        SELECT * FROM `school_exam_subject_aggregates` WHERE `subject_code`=p_subject_code
                        ) AS `school_exam_subject_aggregates`
                        ON `exam`.`auto_id`=`school_exam_subject_aggregates`.`exam_auto_id`;

else
SELECT CONCAT(`term`.`year`,' Term ',`term`.`number`) AS `name`,`school_term_subject_aggregates`.`average` FROM 
                        (
	                        SELECT * FROM `term` ORDER BY `year`,`number`
                        ) AS `term`
                        JOIN
                        (
	                        SELECT * FROM `school_term_subject_aggregates` WHERE `subject_code`=p_subject_code
                        ) AS `school_term_subject_aggregates` 
                        ON `term`.`auto_id`=`school_term_subject_aggregates`.`term_auto_id`;
end if;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `TransformTable` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `TransformTable`(IN _table Text,IN pivot_column Varchar(200),IN stretch_column Varchar(200),IN load_column Varchar(200),IN other_columns TEXT)
BEGIN
DECLARE bDone INT;
DECLARE stretch_value Varchar(100);
DECLARE query1 Text;
DECLARE query2 Text;
DECLARE curs1 CURSOR FOR SELECT `stretch_table`.`stretch_column`  FROM `stretch_table`;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET bDone = 1;

CALL executeStatement('DROP TEMPORARY TABLE IF EXISTS `stretch_table`;');
CALL executeStatement(CONCAT('CREATE TEMPORARY TABLE `stretch_table`  ENGINE = MEMORY
							SELECT DISTINCT `',stretch_column,'` AS `stretch_column`   FROM ',_table,';'));


SET bDone = 0;
SET query1=CONCAT('CREATE TEMPORARY TABLE `transformed_table`  ENGINE = MEMORY SELECT `pivot`.`',pivot_column,'`,');
SET query2=CONCAT(' FROM (SELECT DISTINCT `',pivot_column,'` ',other_columns,' FROM ',_table,') AS pivot ');
OPEN curs1;
FETCH curs1 INTO stretch_value;
	WHILE NOT bDone DO
		SET query1=CONCAT(query1,'`',stretch_value,'`.`',load_column,'` AS `',stretch_value,'`,');
		SET query2=CONCAT(query2,' LEFT JOIN (SELECT * FROM ',_table,' WHERE `',stretch_column,'`=\'',stretch_value,'\') AS `',stretch_value,'` ON `pivot`.`',pivot_column,'`=`',stretch_value,'`.`',pivot_column,'`');
		FETCH curs1 INTO stretch_value;
	END WHILE;
SET query1=TRIM(TRAILING ',' FROM query1);
CLOSE curs1;
SEt @var=CONCAT(query1,' ',query2,';');
SELECT @var;
DROP TEMPORARY TABLE IF EXISTS `transformed_table`;
CALL executeStatement(CONCAT(query1,' ',query2,';'));

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `update_positions` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `update_positions`(IN _table Varchar(100),IN position_column Varchar(100)
,IN identifier_column varchar(100),IN quantifier_clumn varchar(100),IN filters TEXT)
BEGIN
DECLARE query0 LONGTEXT;
DECLARE query1 LONGTEXT;
SET @i=0;
SET @j=1;
SET @old_value=null;

SET SESSION group_concat_max_len=600000;
SET query0=CONCAT("
SELECT
GROUP_CONCAT('`",position_column,"`=IF(`",identifier_column,"` =',`id_value`,',',`position`,',`",position_column,"`)')
FROM
    (SELECT 
        `",identifier_column,"` AS id_value,
            @i:=@i + 1 AS absolute_position,
            IF(`",quantifier_clumn,"` != @old_value, @j:=@i, @j) AS position,
            @old_value:=`",quantifier_clumn,"` AS next_old_value
		FROM
        (SELECT * FROM `",_table,"`  ",IF(filters iS NULL,"",CONCAT(" WHERE ",filters)),"    ORDER BY `",quantifier_clumn,"` DESC
		) AS req_table
	) AS req_table INTO @updates;");
-- SELECT query0;
CALL `executeStatement`(query0);

-- SELECT @updates;
IF(@updates IS NOT NULL) THEN
BEGIN
	SET query1=CONCAT("UPDATE `",_table,"` SET ",@updates,"  ",IF(filters iS NULL,"",CONCAT(" WHERE ",filters)),";");
-- SELECT query1;
	CALL `executeStatement`(query1);
end;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `update_positions_class_exam_average` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `update_positions_class_exam_average`(IN p_exam_auto_id INT)
BEGIN
declare l_position INT;
declare l_student_auto_id INT;
DECLARE v_finished INT;
DEClARE cursor0 CURSOR FOR 
SELECT `student_auto_id`,`position` FROM (	
SELECT `student_auto_id`,@i:=@i+1 AS absolute_position, IF(`average`!=@old_value,@j:=@i,@j) AS position,@old_value:=`average` AS next_old_value 
FROM (
SELECT `exam_marks_template`.`auto_id` AS `student_auto_id`,`student_exam_aggregates`.`average`
FROM (SELECT DISTINCT(`auto_id`) FROM  `exam_marks_template`) AS `exam_marks_template` JOIN
(SELECT * FROM `student_exam_aggregates` WHERE  `student_exam_aggregates`.`exam_auto_id`= p_exam_auto_id )AS `student_exam_aggregates`
ON `exam_marks_template`.`auto_id`=`student_exam_aggregates`.`student_auto_id`  ORDER BY `average` DESC) AS req_join) AS req_marks_view;
DECLARE CONTINUE HANDLER  FOR NOT FOUND SET v_finished = 1;
SET @i=0;
SET @j=1;
SET @old_value=null;
OPEN cursor0;

loop0: LOOP
	FETCH cursor0 INTO l_student_auto_id,l_position;
	IF v_finished = 1 THEN LEAVE loop0; END IF;
 -- do stuff
	UPDATE `student_exam_aggregates` SET `class_position`=l_position WHERE `exam_auto_id`=p_exam_auto_id 
	AND `student_auto_id`=l_student_auto_id AND (`class_position` IS NULL OR `class_position`!=l_position );
END LOOP loop0;
CLOSE cursor0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `update_positions_class_exam_subject` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `update_positions_class_exam_subject`(IN p_exam_auto_id INT,IN p_subject_code INT)
BEGIN
declare l_position INT;
declare l_mark_auto_id INT;
DECLARE v_finished INT;
DEClARE cursor0 CURSOR FOR 
SELECT `exam_mark_auto_id`,`position` FROM (
SELECT `exam_mark_auto_id`,@i:=@i+1 AS absolute_position, IF(`percentage`!=@old_value,@j:=@i,@j) AS position,@old_value:=`percentage` AS next_old_value 
FROM 
(SELECT `marks_view`.`auto_id` AS `exam_mark_auto_id`,`marks_view`.`percentage`
 FROM( SELECT * FROM `exam_marks_template` WHERE `subject_code`=p_subject_code)AS  `exam_marks_template` LEFT JOIN
(SELECT * FROM `marks_view` WHERE `exam_auto_id`= p_exam_auto_id AND `marks_view`.`subject_code`=p_subject_code )AS `marks_view` ON
`exam_marks_template`.`auto_id`=`marks_view`.`student_auto_id`  ORDER BY `percentage` DESC) AS req_join) AS req_marks_view;
DECLARE CONTINUE HANDLER  FOR NOT FOUND SET v_finished = 1;
SET @i=0;
SET @j=1;
SET @old_value=null;
OPEN cursor0;

loop0: LOOP
	FETCH cursor0 INTO l_mark_auto_id,l_position;
	IF v_finished = 1 THEN LEAVE loop0; END IF;
 -- do stuff
	UPDATE `marks_extended` SET `class_position`=l_position WHERE `exam_mark_auto_id`=l_mark_auto_id AND (`class_position` IS NULL OR `class_position`!=l_position );
END LOOP loop0;
CLOSE cursor0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `update_positions_class_term_average` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `update_positions_class_term_average`(IN p_term_auto_id INT)
BEGIN
declare l_position INT;
declare l_student_auto_id INT;
DECLARE v_finished INT;
DEClARE cursor0 CURSOR FOR 
SELECT `student_auto_id`,`position` FROM (	
SELECT `student_auto_id`,@i:=@i+1 AS absolute_position, IF(`average`!=@old_value,@j:=@i,@j) AS position,@old_value:=`average` AS next_old_value 
FROM (
SELECT `exam_marks_template`.`auto_id` AS `student_auto_id`,`student_term_aggregates`.`average`
FROM (SELECT DISTINCT(`auto_id`) FROM  `exam_marks_template`) AS `exam_marks_template` JOIN
(SELECT * FROM `student_term_aggregates` WHERE  `student_term_aggregates`.`term_auto_id`= p_term_auto_id )AS `student_term_aggregates`
ON `exam_marks_template`.`auto_id`=`student_term_aggregates`.`student_auto_id`  ORDER BY `average` DESC) AS req_join) AS req_marks_view;
DECLARE CONTINUE HANDLER  FOR NOT FOUND SET v_finished = 1;
SET @i=0;
SET @j=1;
SET @old_value=null;
OPEN cursor0;

loop0: LOOP
	FETCH cursor0 INTO l_student_auto_id,l_position;
	IF v_finished = 1 THEN LEAVE loop0; END IF;
 -- do stuff
	UPDATE `student_term_aggregates` SET `class_position`=l_position WHERE `term_auto_id`=p_term_auto_id 
	AND `student_auto_id`=l_student_auto_id AND (`class_position` IS NULL OR `class_position`!=l_position );
END LOOP loop0;
CLOSE cursor0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `update_positions_class_term_subject` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `update_positions_class_term_subject`(IN p_term_auto_id INT,IN p_subject_code INT)
BEGIN
declare l_position INT;
declare l_student_auto_id INT;
DECLARE v_finished INT;
DEClARE cursor0 CURSOR FOR 
SELECT `student_auto_id`,`position` FROM (	
SELECT `student_auto_id`,@i:=@i+1 AS absolute_position, IF(`average`!=@old_value,@j:=@i,@j) AS position,@old_value:=`average` AS next_old_value 
FROM (
SELECT `exam_marks_template`.`auto_id` AS `student_auto_id`,`student_term_subject_aggregates`.`average`
FROM (SELECT * FROM  `exam_marks_template` WHERE `subject_code`=p_subject_code ) AS `exam_marks_template` JOIN
(SELECT * FROM `student_term_subject_aggregates` WHERE `student_term_subject_aggregates`.`subject_code`=p_subject_code 
AND `student_term_subject_aggregates`.`term_auto_id`= p_term_auto_id )AS `student_term_subject_aggregates`
ON `exam_marks_template`.`auto_id`=`student_term_subject_aggregates`.`student_auto_id`  ORDER BY `average` DESC) AS req_join) AS req_marks_view;
DECLARE CONTINUE HANDLER  FOR NOT FOUND SET v_finished = 1;
SET @i=0;
SET @j=1;
SET @old_value=null;
OPEN cursor0;

loop0: LOOP
	FETCH cursor0 INTO l_student_auto_id,l_position;
	IF v_finished = 1 THEN LEAVE loop0; END IF;
 -- do stuff
	UPDATE `student_term_subject_aggregates` SET `class_position`=l_position WHERE `term_auto_id`=p_term_auto_id AND `subject_code`=p_subject_code
	AND `student_auto_id`=l_student_auto_id AND (`class_position` IS NULL OR `class_position`!=l_position );
END LOOP loop0;
CLOSE cursor0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `update_positions_stream_exam_average` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `update_positions_stream_exam_average`(IN p_exam_auto_id INT)
BEGIN
declare l_position INT;
declare l_student_auto_id INT;
DECLARE v_finished INT;
DEClARE cursor0 CURSOR FOR 
SELECT `student_auto_id`,`position` FROM (	
SELECT `student_auto_id`,@i:=@i+1 AS absolute_position, IF(`average`!=@old_value,@j:=@i,@j) AS position,@old_value:=`average` AS next_old_value 
FROM (
SELECT `exam_marks_template`.`auto_id` AS `student_auto_id`,`student_exam_aggregates`.`average`
FROM (SELECT DISTINCT(`auto_id`) FROM  `exam_marks_template`) AS `exam_marks_template` JOIN
(SELECT * FROM `student_exam_aggregates` WHERE  `student_exam_aggregates`.`exam_auto_id`= p_exam_auto_id )AS `student_exam_aggregates`
ON `exam_marks_template`.`auto_id`=`student_exam_aggregates`.`student_auto_id`  ORDER BY `average` DESC) AS req_join) AS req_marks_view;
DECLARE CONTINUE HANDLER  FOR NOT FOUND SET v_finished = 1;
SET @i=0;
SET @j=1;
SET @old_value=null;
OPEN cursor0;

loop0: LOOP
	FETCH cursor0 INTO l_student_auto_id,l_position;
	IF v_finished = 1 THEN LEAVE loop0; END IF;
 -- do stuff
	UPDATE `student_exam_aggregates` SET `stream_position`=l_position WHERE `exam_auto_id`=p_exam_auto_id 
	AND `student_auto_id`=l_student_auto_id AND (`stream_position` IS NULL OR `stream_position`!=l_position );
END LOOP loop0;
CLOSE cursor0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `update_positions_stream_exam_subject` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `update_positions_stream_exam_subject`(IN p_exam_auto_id INT,IN p_subject_code INT)
BEGIN
declare l_position INT;
declare l_mark_auto_id INT;
DECLARE v_finished INT;
DEClARE cursor0 CURSOR FOR 
SELECT `exam_mark_auto_id`,`position` FROM (
SELECT `exam_mark_auto_id`,@i:=@i+1 AS absolute_position, IF(`percentage`!=@old_value,@j:=@i,@j) AS position,@old_value:=`percentage` AS next_old_value 
FROM 
(SELECT `marks_view`.`auto_id` AS `exam_mark_auto_id`,`marks_view`.`percentage`
 FROM( SELECT * FROM `exam_marks_template` WHERE `subject_code`=p_subject_code)AS  `exam_marks_template` LEFT JOIN
(SELECT * FROM `marks_view` WHERE `exam_auto_id`= p_exam_auto_id AND `marks_view`.`subject_code`=p_subject_code )AS `marks_view` ON
`exam_marks_template`.`auto_id`=`marks_view`.`student_auto_id`  ORDER BY `percentage` DESC) AS req_join) AS req_marks_view;
DECLARE CONTINUE HANDLER  FOR NOT FOUND SET v_finished = 1;
SET @i=0;
SET @j=1;
SET @old_value=null;
OPEN cursor0;
loop0: LOOP
	FETCH cursor0 INTO l_mark_auto_id,l_position;
	IF v_finished = 1 THEN LEAVE loop0; END IF;
 -- do stuff
	UPDATE `marks_extended` SET `stream_position`=l_position WHERE `exam_mark_auto_id`=l_mark_auto_id AND (`stream_position` IS NULL OR `stream_position`!=l_position );
END LOOP loop0;
CLOSE cursor0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `update_positions_stream_term_average` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `update_positions_stream_term_average`(IN p_term_auto_id INT)
BEGIN
declare l_position INT;
declare l_student_auto_id INT;
DECLARE v_finished INT;
DEClARE cursor0 CURSOR FOR 
SELECT `student_auto_id`,`position` FROM (	
SELECT `student_auto_id`,@i:=@i+1 AS absolute_position, IF(`average`!=@old_value,@j:=@i,@j) AS position,@old_value:=`average` AS next_old_value 
FROM (
SELECT `exam_marks_template`.`auto_id` AS `student_auto_id`,`student_term_aggregates`.`average`
FROM (SELECT DISTINCT(`auto_id`) FROM  `exam_marks_template`) AS `exam_marks_template` JOIN
(SELECT * FROM `student_term_aggregates` WHERE  `student_term_aggregates`.`term_auto_id`= p_term_auto_id )AS `student_term_aggregates`
ON `exam_marks_template`.`auto_id`=`student_term_aggregates`.`student_auto_id`  ORDER BY `average` DESC) AS req_join) AS req_marks_view;
DECLARE CONTINUE HANDLER  FOR NOT FOUND SET v_finished = 1;
SET @i=0;
SET @j=1;
SET @old_value=null;
OPEN cursor0;

loop0: LOOP
	FETCH cursor0 INTO l_student_auto_id,l_position;
	IF v_finished = 1 THEN LEAVE loop0; END IF;
 -- do stuff
	UPDATE `student_term_aggregates` SET `stream_position`=l_position WHERE `term_auto_id`=p_term_auto_id 
	AND `student_auto_id`=l_student_auto_id AND (`stream_position` IS NULL OR `stream_position`!=l_position );
END LOOP loop0;
CLOSE cursor0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `update_positions_stream_term_subject` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `update_positions_stream_term_subject`(IN p_term_auto_id INT,IN p_subject_code INT)
BEGIN
declare l_position INT;
declare l_student_auto_id INT;
DECLARE v_finished INT;
DEClARE cursor0 CURSOR FOR 
SELECT `student_auto_id`,`position` FROM (	
SELECT `student_auto_id`,@i:=@i+1 AS absolute_position, IF(`average`!=@old_value,@j:=@i,@j) AS position,@old_value:=`average` AS next_old_value 
FROM (
SELECT `exam_marks_template`.`auto_id` AS `student_auto_id`,`student_term_subject_aggregates`.`average`
FROM (SELECT * FROM  `exam_marks_template` WHERE `subject_code`=p_subject_code ) AS `exam_marks_template` JOIN
(SELECT * FROM `student_term_subject_aggregates` WHERE `student_term_subject_aggregates`.`subject_code`=p_subject_code 
AND `student_term_subject_aggregates`.`term_auto_id`= p_term_auto_id )AS `student_term_subject_aggregates`
ON `exam_marks_template`.`auto_id`=`student_term_subject_aggregates`.`student_auto_id`  ORDER BY `average` DESC) AS req_join) AS req_marks_view;
DECLARE CONTINUE HANDLER  FOR NOT FOUND SET v_finished = 1;
SET @i=0;
SET @j=1;
SET @old_value=null;
OPEN cursor0;

loop0: LOOP
	FETCH cursor0 INTO l_student_auto_id,l_position;
	IF v_finished = 1 THEN LEAVE loop0; END IF;
 -- do stuff
	UPDATE `student_term_subject_aggregates` SET `stream_position`=l_position WHERE `term_auto_id`=p_term_auto_id AND `subject_code`=p_subject_code
	AND `student_auto_id`=l_student_auto_id AND (`stream_position` IS NULL OR `stream_position`!=l_position );
END LOOP loop0;
CLOSE cursor0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Final view structure for view `currentstudent`
--

/*!50001 DROP VIEW IF EXISTS `currentstudent`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `currentstudent` AS select `students`.`auto_id` AS `auto_id`,`students`.`admno` AS `admno`,`students`.`name` AS `name`,`students`.`kcpe_mark` AS `kcpe_mark`,`students`.`gender` AS `gender`,`students`.`image_filepath` AS `image_filepath`,`students`.`guardian_name` AS `guardian_name`,`students`.`guardian_phone_no` AS `guardian_phone_no`,`students`.`class_stream_auto_id` AS `class_stream_auto_id` from `students` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `done_subject`
--

/*!50001 DROP VIEW IF EXISTS `done_subject`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `done_subject` AS select `subject`.`code` AS `code`,`subject`.`name` AS `name`,`subject`.`abbreviation` AS `abbreviation`,`subject`.`group` AS `group`,`subject`.`is_junior_compulsory` AS `is_junior_compulsory`,`subject`.`is_senior_compulsory` AS `is_senior_compulsory` from `subject` where (`subject`.`is_done_by_school` = 1) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `exam_view`
--

/*!50001 DROP VIEW IF EXISTS `exam_view`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `exam_view` AS select `exam`.`auto_id` AS `auto_id`,`exam`.`name` AS `name`,`exam`.`term_auto_id` AS `term_auto_id`,`exam`.`out_of` AS `out_of`,`exam`.`start_date` AS `start_date`,`exam_class`.`exam_auto_id` AS `exam_auto_id`,`exam_class`.`featured_class` AS `featured_class`,`exam_class`.`account_for` AS `account_for` from (`exam` join `exam_class` on((`exam`.`auto_id` = `exam_class`.`exam_auto_id`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `fee_transaction`
--

/*!50001 DROP VIEW IF EXISTS `fee_transaction`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `fee_transaction` AS select `receipt`.`student_auto_id` AS `student_auto_id`,`receipt`.`date` AS `date`,'RECEIPT' AS `trans_type`,`receipt`.`receipt_no` AS `trans_number`,'Paid fees' AS `description`,(-(1) * `receipt`.`amount`) AS `amount` from `receipt` union select `invoice`.`student_auto_id` AS `student_auto_id`,`invoice`.`date` AS `date`,'INVOICE' AS `trans_type`,'INOTHER0' AS `trans_number`,`invoice`.`description` AS `description`,`invoice`.`amount` AS `amount` from `invoice` union select `fee_credit`.`student_auto_id` AS `student_auto_id`,`fee_credit`.`date` AS `date`,'CREDIT NOTE' AS `trans_type`,'CREDNOTE0' AS `trans_number`,`fee_credit`.`description` AS `description`,(-(1) * `fee_credit`.`amount`) AS `amount` from `fee_credit` union select `student_fee_invoice`.`student_auto_id` AS `student_auto_id`,`student_fee_invoice`.`date` AS `date`,'INVOICE' AS `trans_type`,`student_fee_invoice`.`invoice_number` AS `trans_number`,`student_fee_invoice`.`description` AS `description`,`student_fee_invoice`.`amount` AS `amount` from `student_fee_invoice` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `general_grade_view`
--

/*!50001 DROP VIEW IF EXISTS `general_grade_view`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `general_grade_view` AS select `general_grade`.`auto_id` AS `auto_id`,`grade`.`name` AS `name`,`grade`.`points` AS `points`,`general_grade`.`form` AS `form`,`general_grade`.`lower_bound` AS `lower_bound`,`general_grade`.`comment` AS `comment`,if((`grade`.`points` = 12),100,(`general_grade2`.`lower_bound` - 1)) AS `upper_bound` from ((`grade` left join `general_grade` on((`grade`.`points` = `general_grade`.`grade_points`))) left join `general_grade` `general_grade2` on(((`grade`.`points` = (`general_grade2`.`grade_points` - 1)) and (`general_grade`.`form` = `general_grade2`.`form`)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `junior_student_v`
--

/*!50001 DROP VIEW IF EXISTS `junior_student_v`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `junior_student_v` AS select `student_basic_info`.`auto_id` AS `auto_id` from `student_basic_info` where ((`student_basic_info`.`class_of` = (`getVparam`(0) + 2)) or (`student_basic_info`.`class_of` = (`getVparam`(0) + 3))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `junior_students_subject`
--

/*!50001 DROP VIEW IF EXISTS `junior_students_subject`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `junior_students_subject` AS select `students`.`auto_id` AS `student_auto_id`,`done_subject`.`code` AS `subject_code`,'1' AS `doing` from (`students` join `done_subject`) where (`done_subject`.`is_junior_compulsory` = 1) union select `junior_subject_selection`.`student_auto_id` AS `student_auto_id`,`junior_subject_selection`.`subject_code` AS `subject_code`,'1' AS `doing` from `junior_subject_selection` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `marks_view`
--

/*!50001 DROP VIEW IF EXISTS `marks_view`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `marks_view` AS select `exam_mark`.`auto_id` AS `auto_id`,`exam_mark`.`student_auto_id` AS `student_auto_id`,`exam_mark`.`exam_auto_id` AS `exam_auto_id`,`exam_mark`.`subject_code` AS `subject_code`,`exam_mark`.`mark` AS `mark`,`marks_extended`.`exam_mark_auto_id` AS `exam_mark_auto_id`,`marks_extended`.`percentage` AS `percentage`,`marks_extended`.`grade_name` AS `grade_name`,`marks_extended`.`grade_points` AS `grade_points`,`marks_extended`.`comment` AS `comment`,`marks_extended`.`stream_position` AS `stream_position`,`marks_extended`.`class_position` AS `class_position`,`marks_extended`.`improvement` AS `improvement` from (`exam_mark` join `marks_extended` on((`exam_mark`.`auto_id` = `marks_extended`.`exam_mark_auto_id`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `req_student_view`
--

/*!50001 DROP VIEW IF EXISTS `req_student_view`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `req_student_view` AS select `student_basic_info`.`auto_id` AS `auto_id`,`student_basic_info`.`admno` AS `admno`,`student_basic_info`.`name` AS `name` from `student_basic_info` where ((ifnull(`getVparam`(0),1) or (`student_basic_info`.`auto_id` = `getVparam`(0))) and (ifnull(`getVparam`(1),1) or (`student_basic_info`.`class_stream_auto_id` = `getVparam`(1))) and (ifnull(`getVparam`(2),1) or (`student_basic_info`.`class_of` = `getVparam`(2)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `senior_student_v`
--

/*!50001 DROP VIEW IF EXISTS `senior_student_v`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `senior_student_v` AS select `student_basic_info`.`auto_id` AS `auto_id` from `student_basic_info` where ((`student_basic_info`.`class_of` = (`getVparam`(0) + 2)) or (`student_basic_info`.`class_of` = (`getVparam`(0) + 3))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `senior_students_subject`
--

/*!50001 DROP VIEW IF EXISTS `senior_students_subject`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `senior_students_subject` AS select `students`.`auto_id` AS `student_auto_id`,`done_subject`.`code` AS `subject_code`,'1' AS `doing` from (`students` join `done_subject`) where (`done_subject`.`is_senior_compulsory` = 1) union select `senior_subject_selection`.`student_auto_id` AS `student_auto_id`,`senior_subject_selection`.`subject_code` AS `subject_code`,'1' AS `doing` from `senior_subject_selection` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `stream_fee_amount`
--

/*!50001 DROP VIEW IF EXISTS `stream_fee_amount`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `stream_fee_amount` AS select `class_stream`.`auto_id` AS `class_stream_auto_id`,`class_stream`.`class_of` AS `class_of`,`class_stream`.`stream_name` AS `stream_name`,`term`.`year` AS `year`,`term`.`number` AS `term_number`,`term`.`opening_date` AS `posting_date`,`fee_amount`.`form` AS `form`,`fee_amount`.`amount` AS `amount` from ((`fee_amount` join `term` on((`term`.`auto_id` = `fee_amount`.`term_auto_id`))) join `class_stream` on((((`term`.`year` - `class_stream`.`class_of`) + 4) = `fee_amount`.`form`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `student_basic_info`
--

/*!50001 DROP VIEW IF EXISTS `student_basic_info`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `student_basic_info` AS select `students`.`auto_id` AS `auto_id`,`students`.`admno` AS `admno`,`students`.`name` AS `name`,`students`.`class_stream_auto_id` AS `class_stream_auto_id`,`class_stream`.`class_of` AS `class_of` from (`students` join `class_stream` on((`students`.`class_stream_auto_id` = `class_stream`.`auto_id`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `student_fee_invoice`
--

/*!50001 DROP VIEW IF EXISTS `student_fee_invoice`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `student_fee_invoice` AS select `stream_fee_amount`.`posting_date` AS `date`,`students`.`auto_id` AS `student_auto_id`,'INFEE000' AS `invoice_number`,concat('Form ',`stream_fee_amount`.`form`,' term ',`stream_fee_amount`.`term_number`,' fees') AS `description`,`stream_fee_amount`.`amount` AS `amount` from (`students` join `stream_fee_amount` on((`stream_fee_amount`.`class_stream_auto_id` = `students`.`class_stream_auto_id`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `student_junior_subject_doing`
--

/*!50001 DROP VIEW IF EXISTS `student_junior_subject_doing`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `student_junior_subject_doing` AS select `student_subject`.`student_auto_id` AS `student_auto_id`,`student_subject`.`subject_code` AS `subject_code`,if(isnull(`junior_students_subject`.`student_auto_id`),0,1) AS `doing` from (`student_subject` left join `junior_students_subject` on(((`student_subject`.`student_auto_id` = `junior_students_subject`.`student_auto_id`) and (`student_subject`.`subject_code` = `junior_students_subject`.`subject_code`)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `student_senior_subject_doing`
--

/*!50001 DROP VIEW IF EXISTS `student_senior_subject_doing`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `student_senior_subject_doing` AS select `student_subject`.`student_auto_id` AS `student_auto_id`,`student_subject`.`subject_code` AS `subject_code`,if(isnull(`senior_students_subject`.`student_auto_id`),0,1) AS `doing` from (`student_subject` left join `senior_students_subject` on(((`student_subject`.`student_auto_id` = `senior_students_subject`.`student_auto_id`) and (`student_subject`.`subject_code` = `senior_students_subject`.`subject_code`)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `student_subject`
--

/*!50001 DROP VIEW IF EXISTS `student_subject`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `student_subject` AS select `students`.`auto_id` AS `student_auto_id`,`done_subject`.`code` AS `subject_code` from (`students` join `done_subject`) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `subject_grade_view`
--

/*!50001 DROP VIEW IF EXISTS `subject_grade_view`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `subject_grade_view` AS select `subject_grade`.`auto_id` AS `auto_id`,`grade`.`name` AS `name`,`grade`.`points` AS `points`,`subject_grade`.`form` AS `form`,`subject_grade`.`subject_code` AS `subject_code`,`subject_grade`.`lower_bound` AS `lower_bound`,`subject_grade`.`comment` AS `comment`,if((`grade`.`points` = 12),100,(`subject_grade2`.`lower_bound` - 1)) AS `upper_bound` from ((`grade` left join `subject_grade` on((`grade`.`points` = `subject_grade`.`grade_points`))) left join `subject_grade` `subject_grade2` on(((`grade`.`points` = (`subject_grade2`.`grade_points` - 1)) and (`subject_grade`.`form` = `subject_grade2`.`form`) and (`subject_grade`.`subject_code` = `subject_grade2`.`subject_code`)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2016-01-26 11:55:53
